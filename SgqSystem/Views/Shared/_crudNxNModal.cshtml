  <!-- Modal Edição  crudNxN -->
<div class="modal fade" id="crudNxNEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="">
    <div class="modal-dialog    " role="document">
        <div class="modal-content">
            <div class="modal-header modal-header-gray">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">a</h4>
            </div>
            <div class="modal-body">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">@Resources.Resource.close</button>
                <button type="button" class="btn btn-primary" id="save">@Resources.Resource.save</button>
            </div>
        </div>
    </div>
</div>

<script>

    var crudNxN = {
        verificaCompany: function (companyName, tableId, clomunIndex) {
            var isValid = true;
            $('#tableMeta  tbody  tr  td:nth-child(' + clomunIndex + ')').each(function (c, o) {
                var existente = $(o).text();
                if (existente == companyName) {
                    openMessageModal("Dados já cadastrados para a empresa " + companyName + ".")
                    isValid = false;
                }
            });
            return isValid;
        },
        adiciona: function (o, idTable, tdsName) {

            var tr = "";
            var objData = {};

            if (o["IsActive"] == true) {
                tr += "<tr pos=" + crudNxN.inifnito + ">"
            } else {
                tr += "<tr pos=" + crudNxN.inifnito + " class='inativeTr'>";
            }

            tdsName.forEach(function (oo, cc) {/*Para cada name de tdName monta uma TD, coloca valor a ser mostrado na TD a prop do objeto[name].*/
                if (oo == "btn") {
                    if (o["Id"] != null && o["Id"] != undefined && o["Id"] > 0) {
                        if (o["IsActive"]) {
                            o[oo] = crudNxN.btnInactive + crudNxN.btnEdit; //+ crudNxN.btnRemoveDb;
                        } else {
                            o[oo] = crudNxN.btnReActive + crudNxN.btnEdit; //+ crudNxN.btnRemoveDb;
                        }
                    } else {
                        o[oo] = crudNxN.btnRemove + crudNxN.btnEdit;
                    }
                }
                tr += '<td>' + o[oo] + '</td>';
            });

            tr += '</tr>'
            $(tr)
            $('#' + idTable + ' > tbody').append($(tr).data(o));
            crudNxN.verificaSeMostraTable(idTable);
            reloadPopovers();

        },
        verificaSeMostraTable: function (idTable) {
            if ($('#' + idTable + ' > tbody > tr').length > 0) {
                $('#' + idTable).fadeIn();
            } else {
                $('#' + idTable).fadeOut();
            }
        },
        btnRemove: '<button type="button" class="btn btn-danger btn-xs popovers" data-content="@Resources.Resource.remove" data-trigger="hover" data-placement="right" name="" onclick="crudNxN.funcRemove($(this));"><i class="fa fa-times" aria-hidden="true"></i></button>',
        funcRemove: function (e) {
            if ($(e).parents('table').find('tr').length <= 2)
                $(e).parents('table').css('display', 'none');
            $(e).parents('tr').remove();
        },
        btnInactive: '<button type="button" class="btn btn-danger btn-xs popovers" data-content="@Resources.Resource.inactivate" data-trigger="hover" data-placement="right" name="" onclick="crudNxN.funcInactive($(this));"><i class="fa fa-times" aria-hidden="true"></i></button>',
        funcInactive: function (e) {
            var obj = $(e).parents('tr').data();
            obj["IsActive"] = false;
            $(e).parents('tr').removeData();
            $(e).parents('tr').data(obj);
            var element = $(e).parents('tr');
            element.find('td:last').empty();
            element.find('td:last').append(crudNxN.btnReActive, crudNxN.btnEdit);
            reloadPopovers();
        },
        btnReActive: '<button type="button" class="btn btn-info btn-xs popovers" data-content="@Resources.Resource.reactivate" data-trigger="hover" data-placement="right" name="" onclick="crudNxN.funcReActive($(this));"><i class="fa fa-undo" aria-hidden="true"></i></button>',
        funcReActive: function (e) {
            var obj = $(e).parents('tr').data();
            obj["IsActive"] = true;
            $(e).parents('tr').removeData();
            $(e).parents('tr').data(obj);
            var element = $(e).parents('tr');
            element.find('td:last').empty();
            element.find('td:last').append(crudNxN.btnInactive, crudNxN.btnEdit);
            reloadPopovers();
        },
        //btnRemoveDb: '<button type="button" class="btn btn-danger btn-xs popovers" data-content="Excluir" data-trigger="hover" data-placement="right" name="" onclick="crudNxN.funcRemove($(this));"><i class="fa fa-trash" aria-hidden="true"></i></button>',
        //funcRemoveDb: function (e) {
        //    var obj = $(e).parents('tr').data();
        //    obj["IsRemove"] = true;
        //    $(e).parents('tr').removeData();
        //    $(e).parents('tr').data(obj);
        //    var element = $(e).parents('tr');
        //    element.find('td:last').empty();
        //    element.find('td:last').append(crudNxN.btnInactive, crudNxN.btnEdit);
        //    reloadPopovers();
        //},

        btnEdit: '<button type="button" class="btn btn-success btn-xs popovers" data-content="@Resources.Resource.alter" data-trigger="hover" data-placement="right" name="" onclick="crudNxN.funcEdit($(this));"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button>',
        funcEdit: function (e) {
            $('#crudNxNEdit > div > div > div.modal-body').empty();
            $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').off('click');
            var obj = $(e).parents('tr').data();

            /*RegraNc*/
            if ($(e).parents('#level1_nc_accordion').length || $(e).parents('#level2_nc_accordion').length || $(e).parents('#level3_nc_accordion').length) {
                crudNxN.modalAlterarRegraNc(obj);
                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {

                    var editado = crudNxN.retornaObjetoAlteradoRegraNc(obj);
                    console.log("clique salvar" + editado);
                    $(e).parents('tr').removeData();
                    $(e).parents('tr').data(editado);
                    $($(e).parents('tr').find('td')[0]).html(editado.ParNotConformityRule_Name);
                    $($(e).parents('tr').find('td')[1]).html(editado.Value);
                    $($(e).parents('tr').find('td')[2]).html(editado.IsReauditShowTable);
                    $($(e).parents('tr').find('td')[3]).html(editado.CorrectiveActionShowTable);
                    $('#crudNxNEdit').modal('hide');

                });
            }
            /*Contadores*/
            else if ($(e).parents('#level1_counter_accordion').length || $(e).parents('#level2_counter_accordion').length || $(e).parents('#level3_counter_accordion').length) {
                crudNxN.modalAlterarContadores(obj);//
                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {
                    var editado = crudNxN.retornaObjetoAlteradoContadores(obj);//
                    $(e).parents('tr').removeData();
                    $(e).parents('tr').data(editado);
                    $($(e).parents('tr').find('td')[0]).html(editado.ParCounterName)//
                    $($(e).parents('tr').find('td')[1]).html(editado.ParLocalName)//
                    $('#crudNxNEdit').modal('hide');
                });
            }
            else if ($(e).parents('#level1_rotina_accordion').length || $(e).parents('#level2_rotina_accordion').length || $(e).parents('#level3_rotina_accordion').length) {

                crudNxN.modalAlterarVinculoRotina(obj);//
                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {
                    var editado = crudNxN.retornaObjetoAlteradoRotina(obj);//
                    $(e).parents('tr').removeData();
                    $(e).parents('tr').data(editado);
                    $($(e).parents('tr').find('td')[0]).html(editado.Rotina).prop('disabled', true);
                    $($(e).parents('tr').find('td')[1]).html(editado.Name)//
                    $($(e).parents('tr').find('td')[2]).html(editado.ParLevelDefinition_Name)//
                    $('#crudNxNEdit').modal('hide');
                });
            }
            /*Reincidencia*/
            else if ($(e).parents('#level1_reincidencia_accordion').length || $(e).parents('#level2_reincidencia_accordion').length || $(e).parents('#level3_reincidencia_accordion').length) {
                crudNxN.modalAlterarReincidencia(obj);//
                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {
                    var editado = crudNxN.retornaObjetoAlteradoReincidencia(obj);//
                    $(e).parents('tr').removeData();
                    $(e).parents('tr').data(editado);
                    $($(e).parents('tr').find('td')[0]).html(editado.NcNumber)//
                    $($(e).parents('tr').find('td')[1]).html(editado.EffectiveLength)//
                    $($(e).parents('tr').find('td')[2]).html(editado.parFrequencyName)//
                    $('#crudNxNEdit').modal('hide');
                });
            }
            /*Cluster*/
            else if ($(e).parents('#level1_cluster_accordion').length) {
                crudNxN.modalAlterarCluster(obj);//
                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {

                    /*Valida se pode criar o objeto*/
                    if (ClusterL1.veifyAdd('crudNxNEdit')) {
                        var editado = crudNxN.retornaObjetoAlteradoCluster(obj);//
                        $(e).parents('tr').removeData();
                        $(e).parents('tr').data(editado);
                        $($(e).parents('tr').find('td')[0]).html(editado.Cluster_Name)//
                        $($(e).parents('tr').find('td')[1]).html(editado.ParCriticalLevel_Name)//
                        $($(e).parents('tr').find('td')[2]).html(editado.EffectiveDate)//
                        $($(e).parents('tr').find('td')[3]).html(editado.Points)//
                        ClusterL1.atualizarDataLista();
                        $('#crudNxNEdit').modal('hide');
                    }
                });
            }
            /*Grupo L2*/
            else if ($(e).parents('#level2_GroupLevel_accordion').length) {
                crudNxN.modalAlterarGroupLevel2(obj);//
                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {
                    var editado = crudNxN.retornaObjetoAlteradoGroupLevel2(obj);//
                    $(e).parents('tr').removeData();
                    $(e).parents('tr').data(editado);
                    $($(e).parents('tr').find('td')[0]).html(editado.Name)//
                    $('#crudNxNEdit').modal('hide');
                });
            }
            /*Pontos L3*/
            else if ($(e).parents('#level3_PesoL3_accordion').length) {
                crudNxN.modalAlterarPesoL3(obj);//
                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {
                    if (PesoL3.veifyAdd('crudNxNEdit')) {
                        var editado = PesoL3.getObjAdd('crudNxNEdit', obj);
                        $(e).parents('tr').removeData();
                        $(e).parents('tr').data(editado);
                        $($(e).parents('tr').find('td')[0]).html(editado.companyName)//
                        $($(e).parents('tr').find('td')[1]).html(editado.Weight)//
                        $($(e).parents('tr').find('td')[2]).html(editado.IsKnockout)//
                        $($(e).parents('tr').find('td')[3]).html(editado.groupName)//
                        $('#crudNxNEdit').modal('hide');
                        //$('#crudNxNEdit #percentVal').inputmask('remove');
                    }

                });
            }
            /*AvAm L2*/
            else if ($(e).parents('#level2_AvAmostra_accordion').length) {
                crudNxN.modalAlterarAvAmL2(obj);//
                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {
                    if (AvAm2.veifyAdd('crudNxNEdit')) {
                        var editado = AvAm2.getObjAdd('crudNxNEdit', obj);
                        $(e).parents('tr').removeData();
                        $(e).parents('tr').data(editado);
                        $($(e).parents('tr').find('td')[0]).html(editado.companyName);
                        $($(e).parents('tr').find('td')[3]).html(editado.ParFrequency_Name);
                        $($(e).parents('tr').find('td')[4]).html(editado.evaluationNumber);
                        $($(e).parents('tr').find('td')[5]).html(editado.sampleNumber);
                        $('#crudNxNEdit').modal('hide');
                    }

                });
            }
            /*Meta L1*/
            else if ($(e).parents('#level1_Meta_accordion').length) {
                crudNxN.modalAlterarMetal1(obj);//
                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {

                    if (MetaL1.veifyAdd('crudNxNEdit')) {//
                        var editado = MetaL1.getObjAdd('crudNxNEdit', obj);//
                        $(e).parents('tr').removeData();
                        $(e).parents('tr').data(editado);
                        $($(e).parents('tr').find('td')[0]).html(editado.companyName)//
                        $($(e).parents('tr').find('td')[1]).html(editado.EffectiveDate)//
                        $($(e).parents('tr').find('td')[2]).html(editado.PercentValue)//
                        MetaL1.atualizarDataLista();
                        $('#crudNxNEdit').modal('hide');
                    }

                });
            }
            /*Tipos de dados L3*/
            else if ($(e).parents('#tableLevel3Value').length) {
                crudNxN.modalAlterarLevel3Value(obj);

                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {

                    if (level3Value.veifyAdd('crudNxNEdit')) {

                        var editado = level3Value.getObjAdd('crudNxNEdit', obj);

                        if ([3, 4, 7, 8, 9, 10].indexOf(editado.ParLevel3InputType_Id) > 0) {
                            if (isNaN(parseFloat(editado.IntervalMin)) && isNaN(parseFloat(editado.IntervalMax))) {
                                openMessageModal("Pelo menos um limite deve ser preechido", null);
                                return false;

                            } else if (!isNaN(parseFloat(editado.IntervalMin)) && !isNaN(parseFloat(editado.IntervalMax)) && (parseFloat(editado.IntervalMin) > parseFloat(editado.IntervalMax))) {
                                openMessageModal("Valor do Limite Superior menor que o Limite Inferior", null);
                                return false;

                            }
                        }

                        $(e).parents('tr').removeData();
                        $(e).parents('tr').data(editado);
                        $($(e).parents('tr').find('td')[0]).html(editado.ParLevel3InputType_Name)
                        $($(e).parents('tr').find('td')[1]).html(editado.ParLevel1_Name)
                        $($(e).parents('tr').find('td')[2]).html(editado.ParLevel2_Name)
                        $($(e).parents('tr').find('td')[3]).html(editado.ParCompany_Name)
                        $($(e).parents('tr').find('td')[4]).html(editado.ParMeasurementUnit_Name)
                        $($(e).parents('tr').find('td')[5]).html(editado.IntervalMin)
                        $($(e).parents('tr').find('td')[6]).html(editado.IntervalMax)
                        $($(e).parents('tr').find('td')[7]).html(editado.AcceptableValueBetween_Name)
                        $($(e).parents('tr').find('td')[8]).html(editado.ParLevel3BoolFalse_Name)
                        $($(e).parents('tr').find('td')[9]).html(editado.ParLevel3BoolTrue_Name)
                        $('#crudNxNEdit').modal('hide');
                    }

                });
            }
            /*Configuracao Amostra\Avaliacoes L3*/
            else if ($(e).parents('#level3_AvAmostra_accordion').length) {

                crudNxN.modalAlterarAvAmL3(obj);
                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {

                    if (AvAm3.veifyAdd('crudNxNEdit')) {//
                        var editado = AvAm3.getObjAdd('crudNxNEdit', obj);//
                        $(e).parents('tr').removeData();
                        $(e).parents('tr').data(editado);
                        $($(e).parents('tr').find('td')[0]).html(editado.ParCompany_Name)//
                        $($(e).parents('tr').find('td')[1]).html(editado.ParLevel1_Name)//
                        $($(e).parents('tr').find('td')[2]).html(editado.ParLevel2_Name)//
                        $($(e).parents('tr').find('td')[3]).html(editado.EvaluationNumber)//
                        $($(e).parents('tr').find('td')[4]).html(editado.SampleNumber)//
                        $($(e).parents('tr').find('td')[5]).html(editado.EvaluationInterval)//
                        $('#crudNxNEdit').modal('hide');
                    }

                });
            }
            else if ($('#level3_ParLevel3XDepartment_accordion').length) {

                crudNxN.modalAlterParLevel3XDepartment(obj);

                $('#crudNxNEdit > div > div > div.modal-footer > button.btn.btn-primary').on('click', function () {

                    if (ParLevel3XDepartment.veifyAdd('crudNxNEdit')) {

                        var editado = ParLevel3XDepartment.getObjAdd('crudNxNEdit', obj);

                        $(e).parents('tr').removeData();
                        $(e).parents('tr').data(editado);
                        $($(e).parents('tr').find('td')[0]).html(editado.ParCompany_Name);
                        $($(e).parents('tr').find('td')[1]).html(editado.ParLevel1_Name);
                        $($(e).parents('tr').find('td')[2]).html(editado.ParLevel2_Name);
                        $($(e).parents('tr').find('td')[3]).html(editado.ParDepartment_Name);
                        $('#crudNxNEdit').modal('hide');

                    }

                });
            }

            $('#crudNxNEdit').modal();

        },

        /*Tipos de dados L3*/
        modalAlterarLevel3Value: function (obj) {
            var divDeEdicao;
            debugger
            divDeEdicao = $('#companyValueL3 > td').parent().clone();
            $(divDeEdicao).show();
            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/

            divDeEdicao = $('.VinculoParLevel').clone();
            $(divDeEdicao).show();
            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/

            //if (obj.ParLevel1_Id > 0)
            //    $('#crudNxNEdit #parLevel1Select2TipoDadosEntrada').val(obj.ParLevel1_Id).change();
            //if (obj.ParLevel2_Id > 0)
            //    $('#crudNxNEdit #parLevel2Select2TipoDadosEntrada').val(obj.ParLevel2_Id).change();

            if (obj.ParLevel3InputType_Id == 3 || obj.ParLevel3InputType_Id == 9 || obj.ParLevel3InputType_Id == 4) {

                divDeEdicao = $('.ParIntervalos').clone();
                $(divDeEdicao).show();
                $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/

                $('#crudNxNEdit #selectUnidadeDeMedidas').val(obj.ParMeasurementUnit_Id).change();
                $('#crudNxNEdit #parLevel3Value_IntervalMin').val(obj.IntervalMin);
                $('#crudNxNEdit #parLevel3Value_IntervalMax').val(obj.IntervalMax);
                $('#crudNxNEdit #parIntervalosType').val(obj.AcceptableValueBetween).change().show().append();
                if (obj.ParCompany_Id > 0)
                    $('#crudNxNEdit #selectUnidadeParL3Value').val(obj.ParCompany_Id).change();

                $(document).on('input', '#crudNxNEdit #parLevel3Value_IntervalMax', function (e) {
                    changeComboEdit();
                });

                $(document).on('input', '#crudNxNEdit #parLevel3Value_IntervalMin', function (e) {
                    changeComboEdit();
                });
                $('#crudNxNEdit #parLevel3Value_IntervalMin').trigger('input');
                $('#crudNxNEdit #parIntervalosType').val(obj.AcceptableValueBetween ? 1 : 0).change();
                $("#crudNxNEdit #companyValueL3").hide();
            } else if (obj.ParLevel3InputType_Id == 1 || obj.ParLevel3InputType_Id == 6 || obj.ParLevel3InputType_Id == 12) {

                divDeEdicao = $('.ParBinarios').clone();
                $(divDeEdicao).show();
                $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/

                $('#crudNxNEdit #selectConforme').val(obj.ParLevel3BoolTrue_Id).change();
                $('#crudNxNEdit #selectNaoConforme').val(obj.ParLevel3BoolFalse_Id).change();
                if (obj.ParCompany_Id > 0)
                    $('#crudNxNEdit #selectUnidadeParL3Value').val(obj.ParCompany_Id).change();

                $("#crudNxNEdit #companyValueL3").hide();

            } else if (obj.ParLevel3InputType_Id == 10) {
                divDeEdicao = $('.ParResultadoEdit').clone();
                $(divDeEdicao).show();
                $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/

                $('#crudNxNEdit #parLevel3Value_IntervalMin').val(obj.IntervalMin).change().show().append();
                $('#crudNxNEdit #parLevel3Value_IntervalMax').val(obj.IntervalMax).change().show().append();
                $('#crudNxNEdit #parLevel3Value_DynamicValue').val(obj.DynamicValue).change().show().append();
                $("#crudNxNEdit #companyValueL3").hide();
            } else if (obj.ParLevel3InputType_Id == 2) {
                divDeEdicao = $('.ParIntervalos').clone();
                $(divDeEdicao).show();
                $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/

                $('#crudNxNEdit #selectUnidadeDeMedidas').val(obj.ParMeasurementUnit_Id).change();
                $('#crudNxNEdit #parLevel3Value_IntervalMin').val(obj.IntervalMin);

                $('#crudNxNEdit > div > div > div.modal-body > tr > td:nth-child(1)').hide();
                $('#crudNxNEdit > div > div > div.modal-body > tr > td:nth-child(2)').hide()

                $('#crudNxNEdit #parLevel3Value_IntervalMax').val(obj.IntervalMax);
                $('#crudNxNEdit #parIntervalosType').val(obj.AcceptableValueBetween).change().show().append();

                if (obj.ParCompany_Id > 0)
                    $('#crudNxNEdit #selectUnidadeParL3Value').val(obj.ParCompany_Id).change();

                $(document).on('input', '#crudNxNEdit #parLevel3Value_IntervalMax', function (e) {
                    changeComboEdit();
                });

                $(document).on('input', '#crudNxNEdit #parLevel3Value_IntervalMin', function (e) {
                    changeComboEdit();
                });
                $('#crudNxNEdit #parLevel3Value_IntervalMin').trigger('input');
                $('#crudNxNEdit #parIntervalosType').val(obj.AcceptableValueBetween ? 1 : 0).change();
                $("#crudNxNEdit #companyValueL3").hide();
            } else if (obj.ParLevel3InputType_Id == 8 || obj.ParLevel3InputType_Id == 7) {

                divDeEdicao = $('.ParIntervalos').clone();
                $(divDeEdicao).show();
                $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/

                $('#crudNxNEdit #parLevel3Value_IntervalMin').val(obj.IntervalMin);
                $('#crudNxNEdit #parLevel3Value_IntervalMax').val(obj.IntervalMax);
                if (obj.ParCompany_Id > 0)
                    $('#crudNxNEdit #selectUnidadeParL3Value').val(obj.ParCompany_Id).change();

                $(document).on('input', '#crudNxNEdit #parLevel3Value_IntervalMax', function (e) {
                    changeComboEdit();
                });

                $(document).on('input', '#crudNxNEdit #parLevel3Value_IntervalMin', function (e) {
                    changeComboEdit();
                });
                $('#crudNxNEdit #parLevel3Value_IntervalMin').trigger('input');
                $('#crudNxNEdit #selectUnidadeDeMedidas').parents('td').hide();
                $('#crudNxNEdit #parIntervalosType').parents('td').hide();
                $("#crudNxNEdit #companyValueL3").hide();
            }

            divDeEdicao = $('#selectTipoInput').clone();
            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/
            $('#crudNxNEdit #selectTipoInput').val(obj.ParLevel3InputType_Id).change().hide();

            $('#crudNxNEdit #selectUnidadeParL3Value').attr("disabled", true).parents('tr').hide();
            $('#crudNxNEdit #parLevel1Select2TipoDadosEntrada').attr("disabled", true).parents('tr').hide();
            $('#crudNxNEdit #parLevel2Select2TipoDadosEntrada').attr("disabled", true).parents('tr').hide();
            //$('#crudNxNEdit .VinculoParLevel').hide();
            $('#crudNxNEdit > div > div > div.modal-body').show();
            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();
            $('#crudNxNEdit #myModalLabel').html($('#tableLevel3Value').attr('nameModal'));

        },

        /*MetaLevel1*/
        modalAlterarMetal1: function (obj) {
            var divDeEdicao = $('#level1_Meta_accordion > div  table.table-erp').clone();

            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/
            $('#crudNxNEdit #percentVal').val(obj.PercentValue);
            $('#crudNxNEdit #effectiveDateMeta').val(obj.EffectiveDate);

            $('#crudNxNEdit #metaCompany').attr("disabled", true);
            if (obj.ParCompany_Id > 0)
                $('#crudNxNEdit #metaCompany').val(obj.ParCompany_Id).change();

            GuardJs.mascaraNumerica('#crudNxNEdit #percentVal');
            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();
            $('#crudNxNEdit #myModalLabel').html($('#tableMeta').attr('nameModal'));
        },
        /*Avaliação e Amostra L2*/
        modalAlterarAvAmL2: function (obj) {

            if ((obj.sampleNumber + '').indexOf('infin') >= 0)
                obj.sampleNumber = 0;

            if ((obj.evaluationNumber + '').indexOf('infin') >= 0)
                obj.evaluationNumber = 0;

            $('#level2_AvAmostra_accordion > div  table.table-erp select').select2('destroy');

            var divDeEdicao = $('#level2_AvAmostra_accordion > div  table.table-erp').clone();

            $('#level2_AvAmostra_accordion > div  table.table-erp select').select2();

            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/

            $('#crudNxNEdit #avaliacao').val(obj.evaluationNumber);
            $('#crudNxNEdit #amostra').val(obj.sampleNumber);
            $('#crudNxNEdit #avAmCompany').attr("disabled", true);

            if (obj.companyId > 0)
                $('#crudNxNEdit #avAmCompany').val(obj.companyId).change();

            if (obj.ParFrequency_Id && obj.ParFrequency_Id > 0) {
                $('#crudNxNEdit #parFrequencySelect2AmostraLevel').val(obj.ParFrequency_Id).change();
            }

            if ($(obj.agendamento).hasClass('btn-success')) {//tem Agendamento?
                $('#crudNxNEdit #parFrequencySelect2AmostraLevel').prop("disabled", true);
            } else {
                $('#crudNxNEdit #parFrequencySelect2AmostraLevel').prop("disabled", false);
            }

            $('#crudNxNEdit #parLevel1Select2AmostraLevel').parents('td').html('');
            $('#crudNxNEdit #parClusterSelect2AmostraLevel').parents('td').html('');

            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();
            $('#crudNxNEdit #myModalLabel').html($('#tableAvAm').attr('nameModal'));
        },
        modalAlterarAvAmL3: function (obj) {
            var divDeEdicao = $('#level3_AvAmostra_accordion > div  table.table-erp').clone();

            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/

            $('#crudNxNEdit #avaliacao').val(obj.EvaluationNumber);
            $('#crudNxNEdit #amostra').val(obj.SampleNumber);
            $('#crudNxNEdit #intervaloParaAvaliar').val(obj.EvaluationInterval);
            $('#crudNxNEdit #avAmCompany').attr("disabled", true);
            if (obj.ParCompany_Id > 0)
                $('#crudNxNEdit #avAmCompany').val(obj.ParCompany_Id).change();

            $('#crudNxNEdit #parLevel1Select2AmostraLevel3').attr("disabled", true);
            //if (obj.ParLevel1_Id > 0)
            $('#crudNxNEdit #parLevel1Select2AmostraLevel3').val(obj.ParLevel1_Id).change();

            $('#crudNxNEdit #parLevel2Select2AmostraLevel3').attr("disabled", true);
            //if (obj.ParLevel2_Id > 0)
            $('#crudNxNEdit #parLevel2Select2AmostraLevel3').val(obj.ParLevel2_Id).change();

            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();
            $('#crudNxNEdit #myModalLabel').html($('#tableAvAm').attr('nameModal'));
        },
        /*Peso L3*/
        modalAlterarPesoL3: function (obj) {
            $("#paramsDto_parLevel3Level2_IsKnockout").bootstrapSwitch('destroy', true);

            var divDeEdicao = $('#level3__PesoL3_collapse > div > table.table-erp').clone();

            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/


            $("#crudNxNEdit #paramsDto_parLevel3Level2_IsKnockout.check-box").bootstrapSwitch('state', obj.IsKnockout);

            $('#crudNxNEdit #pesoCompany').attr("disabled", true);
            if (obj.ParCompany_Id > 0) {
                $('#crudNxNEdit #pesoCompany').val(obj.ParCompany_Id).change();
            }
            $('#crudNxNEdit #peso').val(obj.Weight);
            $('#crudNxNEdit #peso').inputmask("mascaraNumericaPositivaNegativa");
            $('#crudNxNEdit #pesoGroupLevel2').val(obj.ParLevel3Group_Id).change();

            $("#paramsDto_parLevel3Level2_IsKnockout").bootstrapSwitch();

            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();
            $('#crudNxNEdit #myModalLabel').html($('#tablePeso').attr('nameModal'));
        },

        modalAlterarMeta: function (obj) {
            var divDeEdicao = $('#level1__Meta_collapse > div > table.table-erp').clone();
            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/
            $('#crudNxNEdit #metaCompany').val(obj.ParCompany_Id).change();
            $('#crudNxNEdit #percentVal').val(obj.PercentValue);
            GuardJs.mascaraPorcentegem('#crudNxNEdit #percentVal');
            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();

        },
        retornaObjetoAlteradoMetaL1: function (obj) {
            /*Valida se pode criar o objeto*/
            MetaL1.veifyAdd('crudNxNEdit')
            MetaL1.getObjAdd('crudNxNEdit', obj);
            return obj;
        },

        //modalAlterarLevel3Value: function (obj) {

        //    var divDeEdicao = $('#level1__Meta_collapse > div > table.table-erp').clone();
        //    $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/
        //    $('#crudNxNEdit #metaCompany').val(obj.ParCompany_Id).change();
        //    $('#crudNxNEdit #percentVal').val(obj.PercentValue);
        //    GuardJs.mascaraPorcentegem('#crudNxNEdit #percentVal');
        //    $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();
        //},
        //retornaObjetoAlteradoLevel3Value: function (obj) {
        //    /*Valida se pode criar o objeto*/
        //    level3Value.veifyAdd('crudNxNEdit')
        //    level3Value.getObjAdd('crudNxNEdit', obj);
        //    return obj;
        //},


        modalAlterarRegraNc: function (obj) {
            $("#paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_IsReaudit").bootstrapSwitch('destroy', true);
            $("#paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_CorrectiveAction").bootstrapSwitch('destroy', true);

            $('#crudNxNEdit #myModalLabel').html($('#tableRegraNc').attr('nameModal'));

            var divDeEdicao = $('#level1_nc_collapse > div > table.table-erp').clone();
            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/
            $('#crudNxNEdit #selectNotConformityRule').val(obj.ParNotConformityRule_Id);/*Preenche*/
            $("#crudNxNEdit #paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_IsReaudit").bootstrapSwitch('state', obj.IsReaudit);
            $("#crudNxNEdit #paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_CorrectiveAction").bootstrapSwitch('state', obj.CorrectiveAction);
            $('#crudNxNEdit #paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_Value').val(obj.Value);

            $("#paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_IsReaudit").bootstrapSwitch();
            $("#paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_CorrectiveAction").bootstrapSwitch();

            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();
            return obj;

        },
        retornaObjetoAlteradoRegraNc: function (obj) {

            /*Valida se pode criar o objeto*/
            if ($('#crudNxNEdit #selectNotConformityRule :selected').val() <= 0) {
                alert("Por favor Selecione Regra de Não conformidade.");
                return;
            }

            if ($('#crudNxNEdit #paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_Value').val().replace(/[^0-9.]/g, '') == "") {
                alert("É necessário preencher o campo Valor da Regra de alerta.");
                return;
            }

            obj.ParNotConformityRule_Id = $('#crudNxNEdit #selectNotConformityRule :selected').val();
            obj.ParNotConformityRule_Name = $('#crudNxNEdit #selectNotConformityRule :selected').text();
            obj.Value = $('#crudNxNEdit #paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_Value').val();
            obj.IsReaudit                 = $('#crudNxNEdit #paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_IsReaudit').is(":checked") ? true : false;
            obj.IsReauditShowTable        = $('#crudNxNEdit #paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_IsReaudit').is(":checked") ? "@Resources.Resource.y" : "@Resources.Resource.n";
            obj.CorrectiveAction          = $('#crudNxNEdit #paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_CorrectiveAction').is(":checked") ? true : false;
            obj.CorrectiveActionShowTable = $('#crudNxNEdit #paramsDto_parLevel1Dto_parNotConformityRuleXLevelDto_CorrectiveAction').is(":checked") ? "@Resources.Resource.y" : "@Resources.Resource.n";

            return obj;
        },

        modalAlterarContadores: function (obj) {

            var divDeEdicao = $('#camposContador').clone();
            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/
            $('#crudNxNEdit #myModalLabel').html($('#tableContadores').attr('nameModal'));
            $('#crudNxNEdit #parCounter').val(obj.ParCounter_Id);/*Preenche*/
            $('#crudNxNEdit #parLocal').val(obj.ParLocal_Id);/*Preenche*/

            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();
        },

        modalAlterarVinculoRotina: function (obj) {

            var divDeEdicao = $('#camposRotina').clone();
            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/
            $('#crudNxNEdit #myModalLabel').html($('#tableRotinas').attr('nameModal'));
            $('#crudNxNEdit #rotinaIngracaoDTO_Name').val(obj.Name);/*Preenche*/
            $('#crudNxNEdit #ParLevelDefinition_Id').val(obj.ParLevelDefinition_Id);/*Preenche*/
            $('#crudNxNEdit #rotina').val(obj.RotinaIntegracao_Id).prop('disabled', true);/*Preenche*/

            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();
        },
        retornaObjetoAlteradoContadores: function (obj) {

            /*Valida se pode criar o objeto*/
            if ($('#crudNxNEdit #parCounter :selected').val() <= 0) {
                alert("Por favor selecione o contador.");
                return;
            }

            if ($('#crudNxNEdit #parLocal').val() <= 0) {
                alert("Por favor selecione o local.");
                return;
            }

            obj.ParLocal_Id = $('#crudNxNEdit #parLocal :selected').val();
            obj.ParLocalName = $('#crudNxNEdit #parLocal :selected').text();
            obj.ParCounter_Id = $('#crudNxNEdit #parCounter :selected').val();
            obj.ParCounterName = $('#crudNxNEdit #parCounter :selected').text();

            return obj;
        },

        modalAlterarReincidencia: function (obj) {

            var divDeEdicao = $('#camposRencidencia').clone();
            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/
            $('#crudNxNEdit #myModalLabel').html($('#tableReincidencia').attr('nameModal'));
            $('#crudNxNEdit #selectFrequenciaReincidencia').val(obj.ParFrequency_Id);/*Preenche*/
            $('#crudNxNEdit #inputNumeroNC').val(obj.NcNumber);/*Preenche*/
            $('#crudNxNEdit #inputVigencia').val(obj.EffectiveLength);/*Preenche*/

            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();

        },
        retornaObjetoAlteradoReincidencia: function (obj) {
            /*Valida se pode criar o objeto*/
            ReincidenciaL1.veifyAdd('crudNxNEdit')
            ReincidenciaL1.getObjAdd('crudNxNEdit', obj);
            return obj;
        },
        retornaObjetoAlteradoRotina: function (obj) {
            /*Valida se pode criar o objeto*/

            if ($('#crudNxNEdit #rotina :selected').val() <= 0) {
                alert("Por favor selecione uma rotina.");
                return;
            }

            if ($('#crudNxNEdit #rotinaIngracaoDTO_Name').val() === "") {
                alert("Por favor insira um nome para o vinculo.");
                return;
            }
            obj.RotinaIntegracao_Id = $('#crudNxNEdit #rotina :selected').val();
            obj.Name = $('#crudNxNEdit #rotinaIngracaoDTO_Name').val();
            obj.ParLevelDefinition_Id = $('#crudNxNEdit #ParLevelDefinition_Id').val();
            obj.ParLevelDefinition_Name = $('#crudNxNEdit #ParLevelDefinition_Id option[value=' + obj.ParLevelDefinition_Id + ']').text();
            //obj.Retornos = $('#crudNxNEdit #Retornos').val();
            //obj.Parametro = $('#crudNxNEdit #Parametro').val();

            return obj;
        },

        modalAlterarCluster: function (obj) {

            var divDeEdicao = $('#camposCluster').clone();
            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/
            $('#crudNxNEdit #myModalLabel').html($('#tableClusters').attr('nameModal'));
            $('#crudNxNEdit #valueCluster').val(obj.ParCluster_Id).attr('disabled', true);/*Preenche*/
            $('#crudNxNEdit #valCrit').val(obj.ParCriticalLevel_Id);/*Preenche*/
            $('#crudNxNEdit #effectiveDate').val(obj.EffectiveDate);/*Preenche*/
            $('#crudNxNEdit #pontosCluster').val(obj.Points);/*Preenche*/

            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();
        },
        retornaObjetoAlteradoCluster: function (obj) {
            /*Valida se pode criar o objeto*/
            //ClusterL1.veifyAdd('crudNxNEdit')
            ClusterL1.getObjAdd('crudNxNEdit', obj);
            return obj;
        },

        modalAlterarGroupLevel2: function (obj) {

            var divDeEdicao = $('#camposGroup').clone();
            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao)/*append*/
            $('#crudNxNEdit #myModalLabel').html($('#tableGroupLevel').attr('nameModal'));
            $('#crudNxNEdit #inputParLevel03Name').val(obj.Name);/*Preenche*/

            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();

        },
        retornaObjetoAlteradoGroupLevel2: function (obj) {
            /*Valida se pode criar o objeto*/
            GroupL2.veifyAdd('crudNxNEdit')
            GroupL2.getObjAdd('crudNxNEdit', obj);
            return obj;
        },
        modalAlterParLevel3XDepartment: function (obj) {

            var divDeEdicao = $('#level3__ParLevel3XDepartment_collapse .panel-body .table-erp').clone();

            let ParCompany_Id = obj.ParCompany_Id ? obj.ParCompany_Id : -1;
            let ParLevel1_Id = obj.ParLevel1_Id ? obj.ParLevel1_Id : -1;
            let ParLevel2_Id = obj.ParLevel2_Id ? obj.ParLevel2_Id : -1;
            let ParDepartment_Id = obj.ParDepartment_Id ? obj.ParDepartment_Id : -1;

            $(divDeEdicao).find('#parCompanySelectParLevel3XDepartment').val(ParCompany_Id);
            $(divDeEdicao).find('#parLevel1SelectParLevel3XDepartment').val(ParLevel1_Id);
            $(divDeEdicao).find('#parLevel2SelectParLevel3XDepartment').val(ParLevel2_Id);
            $(divDeEdicao).find('#parDepartmentSelectParLevel3XDepartment').val(ParDepartment_Id);

            $(divDeEdicao).find('.input-group').removeClass();

            $('#crudNxNEdit > div > div > div.modal-body').append(divDeEdicao);

            $('#crudNxNEdit #myModalLabel').html("Editar Departamento");
            $('#crudNxNEdit #inputParLevel03Name').val(obj.Name);

            $('#crudNxNEdit button').not('#save').not('.close').not('.btn-default').remove();
        }
    }

</script>
