-- 27 03 2018 - LEO (criação da ParModuleXModule)

Insert into MigrationHistory (Name, AddDate) VALUES ('20180327_0000_CriacaoParModuleXModules',GetDate())

IF NOT EXISTS (SELECT * FROM sysobjects WHERE name='ParModuleXModule' AND xtype='U')
	CREATE TABLE [dbo].[ParModuleXModule](
		[Id] [int] IDENTITY(1,1) NOT NULL,
		[ParModuleParent_Id] [int] NOT NULL,
		CONSTRAINT [FK_ParModuleXModule_ParModuleParent] FOREIGN KEY([ParModuleParent_Id])
		REFERENCES [dbo].[ParModule] ([Id]),
		[ParModuleChild_Id] [int] NOT NULL,
		CONSTRAINT [FK_ParModuleXModule_ParModuleChild] FOREIGN KEY([ParModuleChild_Id])
		REFERENCES [dbo].[ParModule] ([Id])
	) 

ALTER TABLE ParModuleXModule
ADD CONSTRAINT PK_ParModuleXModule PRIMARY KEY (Id);