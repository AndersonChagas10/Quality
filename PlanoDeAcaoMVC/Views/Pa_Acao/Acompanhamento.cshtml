@model PlanoAcaoCore.Pa_Acao
@using PlanoAcaoCore

@{
    var showTipo1 = "display:none";
    var showTipo2 = "display:none";
    if (Model.TipoIndicador == 1)
    {
        showTipo1 = "";
    }
    else if (Model.TipoIndicador == 2)
    {
        showTipo2 = "";
    }
}
<style>
    input,
    select,
    textarea {
        max-width: 100% !important;
    }
</style>
@if (Conn.visaoOperacional)
{
    <style>
        .showAsEstrategy {
            display: none;
        }
    </style>

}
<button type="button" class="edit btn btn-default btn-sm" style="text-align: left; width:100%"><span title="Editar" class="glyphicon glyphicon-edit" style="cursor:pointer"></span>&nbsp @Resources.Resource.edit</button>
<br />

<div class="panel-group accordion">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h5>
                <a class="accordion-toggle collapsed" data-toggle="collapse" data-target="#divCollapseAcompanhamentoAcao" aria-expanded="false" style="display:block;cursor:pointer">@Resources.Resource.accompaniment_action</a>
            </h5>
        </div>
    </div>
</div>

<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 defaultDiv collapse" id="divCollapseAcompanhamentoAcao">
    <table class="borderedNinja nowrap .col-md-6 .col-md-offset-3 display table table-striped" cellspacing="0" style="width: 100%;">
        <tbody>
            <tr>
                <td style="width: 24%;">
                    @Html.Raw(Resources.Resource.unit)
                </td>
                <td style="width: 60%;">
                    @*@Html.DisplayFor(model => model.Unidade_Id)*@
                    @Html.DisplayFor(model => model.UnidadeName)
                </td>
                <td style="width: 16%;"></td>
            </tr>
            <tr class="showAsEstrategy" style="display:none;">
                <td>
                    @Html.Raw(Resources.Resource.problem_deviation)
                </td>
                <td>
                    @Html.DisplayFor(model => model._Pa_Problema_Desvio_Id.Name)
                </td>
                <td></td>
            </tr>
            @if (Model.TipoIndicador == 1)
            {
                <tr class="showAsEstrategy">
                    <td>
                        @Html.Raw(Resources.Resource.operational_indicator)
                    </td>
                    <td>
                        @Html.DisplayFor(model => model._Pa_IndicadorSgqAcao.Name)
                    </td>
                    <td></td>
                </tr>
            }
            else
            {
                <tr class="showAsEstrategy">
                    <td>
                        @Html.Raw(Resources.Resource.indicator)
                    </td>
                    <td>
                        @Html.DisplayFor(model => model.Level1Name)
                    </td>
                    <td></td>
                </tr>
                            <tr class="showAsEstrategy">
                                <td>
                                    @Html.Raw(Resources.Resource.monitoring)
                                </td>
                                <td>
                                    @Html.DisplayFor(model => model.Level2Name)
                                </td>
                                <td></td>
                            </tr>
                            <tr class="showAsEstrategy">
                                <td>
                                    @Html.Raw(Resources.Resource.task)
                                </td>
                                <td>
                                    @Html.DisplayFor(model => model.Level3Name)
                                </td>
                                <td></td>
                            </tr>
            }

            <tr class="showAsEstrategy">
                <td>
                    @Html.Raw(Resources.Resource.generic_cause)
                </td>
                <td>
                    @Html.DisplayFor(model => model._CausaGenerica)
                </td>
                <td></td>
            </tr>
            <tr class="showAsEstrategy">
                <td>
                    @Html.Raw(Resources.Resource.group_cause)
                </td>
                <td>
                    @Html.DisplayFor(model => model._GrupoCausa)
                </td>
                <td></td>
            </tr>
            <tr class="showAsEstrategy">
                <td>
                    @Html.Raw(Resources.Resource.generic_action)
                </td>
                <td>
                    @Html.DisplayFor(model => model._ContramedidaGenerica)
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    @Html.Raw(Resources.Resource.specific_cause)
                </td>
                <td>
                    @Html.DisplayFor(model => model.CausaEspecifica)
                </td>
                <td></td>
            </tr>
            <tr>
                <td>
                    @Html.Raw(Resources.Resource.specific_action)
                </td>
                <td>
                    @Html.DisplayFor(model => model.ContramedidaEspecifica)
                </td>
                <td></td>
            </tr>

            <tr>
                <td>
                    @Html.Raw(Resources.Resource.who + ":")
                </td>
                <td>
                    @Html.DisplayFor(model => model._Quem)
                </td>
                <td></td>
            </tr>

            <tr>
                <td>
                    @Html.Raw(Resources.Resource.when_start2)
                </td>
                <td>
                    @Html.DisplayFor(model => model.QuandoInicio)
                </td>
                <td></td>
            </tr>

            <tr>
                <td>
                    @Html.Raw(Resources.Resource.when_end2)
                </td>
                <td>
                    @Html.DisplayFor(model => model.QuandoFim)
                </td>
                <td></td>
            </tr>

            <tr>
                <td>
                    @Html.Raw(Resources.Resource.as_important_points)
                </td>
                <td>
                    @Html.DisplayFor(model => model.ComoPontosimportantes)
                </td>
                <td></td>
            </tr>

            <tr>
                <td>
                    @Html.Raw(Resources.Resource.status)
                </td>
                <td>
                    @Html.DisplayFor(model => model._StatusName)
                </td>
                <td></td>
            </tr>

            <tr>
                <td>
                    @Html.Raw(Resources.Resource.term)
                </td>
                <td>
                    @Html.DisplayFor(model => model._Prazo)
                </td>
                <td></td>
            </tr>
        </tbody>
    </table>
</div>

<br />

@foreach (var i in Model._Acompanhamento)
            {
    <div class="container">
        <div class="row" style="border: 2px solid #c1c1c1;">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <div class="short-div">
                    <label class="redLabel" for="inputlg">@Resources.Resource.creation_date:</label><br />
                    @Html.DisplayFor(r => i.AddDate)
                </div>
                <hr />
                <label class="redLabel" for="inputlg">@Resources.Resource.observation:</label><br />
                @Html.DisplayFor(r => i.Name)
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding:0px">
                <div class="short-div">
                    <label class="redLabel" for="inputlg">@Resources.Resource.addressee:</label><br />
                    @foreach (var quem in i._Quem.Where(r => r != null))
                    {
                        @Html.DisplayFor(r => quem.Name) <br />
                    }
                </div>
                <hr />
                <div class="short-div">
                    <label class="redLabel" for="inputlg">@Resources.Resource.status:</label><br />
                    @Html.DisplayFor(r => i._Status.Name)
                </div>
            </div>
        </div>
    </div>
                <br />
}

<br />

<div id="showAcompnhamentoForm" class="container-fluid" style="display:none">
    <div class="row">
        <form id="acompanhamento">
            <div class="col-sm-6">
                <input name="Acao_Id" type="hidden" id="Acao_Id" value="@Model.Id" />

                <div class="form-group">
                    <label class="redLabel" for="inputlg">@Resources.Resource.observation:</label>
                    <textarea name="Name" class="form-control input-sm" id="Name" style="width: 100%; height: 162px;"></textarea>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="redLabel" for="inputlg">@Resources.Resource.notify:</label>
                    @Html.DropDownList("MailTo", new SelectList(ViewBag.Quem, "Id", "Name"),@*"@Resources.Resource.select",*@                                                                                                                            /**/
                                                                                                                                                new { @class = "form-control select2Init", @style = "width:100%;", @multiple = "multiple" })
                </div>

                <div class="form-group">
                    <label class="redLabel" for="inputlg">@Resources.Resource.status:</label>
                    @Html.DropDownList("Status_Id", new SelectList(ViewBag.Status2, "Id", "Name"), Resources.Resource.select2 as string, new { @class = "form-control input-sm" })
                </div>
            </div>
            <br />
            <div class="col-sm-6">
                <button id="SaveAcompanhamento" type="button" class="btn btn-primary" style="width: 100%; margin-top: 10px;">@Resources.Resource.send</button>
            </div>
        </form>
    </div>
</div>
