ü,
UC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\App_Start\BundleConfig.cs
	namespace 	
PlanoDeAcaoMVC
 
{ 
public 

class 
BundleConfig 
{ 
public 
static 
void 
RegisterBundles *
(* +
BundleCollection+ ;
bundles< C
)C D
{		 	
bundles

 
.

 
Add

 
(

 
new

 
ScriptBundle

 (
(

( )
$str

) ;
)

; <
.

< =
Include

= D
(

D E
$str 7
,7 8
$str 7
,7 8
$str :
): ;
); <
;< =
bundles 
. 
Add 
( 
new 
ScriptBundle )
() *
$str* ?
)? @
.@ A
IncludeA H
(H I
$str /
)/ 0
)0 1
;1 2
bundles 
. 
Add 
( 
new 
ScriptBundle (
(( )
$str) >
)> ?
.? @
Include@ G
(G H
$str .
,. /
$str ,
,, -
$str =
,= >
$str K
)K L
)L M
;M N
bundles 
. 
Add 
( 
new 
StyleBundle '
(' (
$str( @
)@ A
.A B
IncludeB I
(I J
$str 3
,3 4
$str *
,* +
$str 6
)6 7
)7 8
;8 9
bundles!! 
.!! 
Add!! 
(!! 
new!! 
ScriptBundle!! (
(!!( )
$str!!) 7
)!!7 8
."" 
Include"" 
("" 
$str"" C
,""C D
$str## N
)##N O
)$$ 
;$$ 
bundles&& 
.&& 
Add&& 
(&& 
new&& 
StyleBundle&& '
(&&' (
$str&&( ;
)&&; <
.'' 
Include'' 
('' 
$str'' A
)''A B
)(( 
;(( 
bundles++ 
.++ 
Add++ 
(++ 
new++ 
ScriptBundle++ (
(++( )
$str++) C
)++C D
.,, 
Include,, 
(,, 
$str,, :
,,,: ;
$str-- :
,--: ;
$str.. 7
,..7 8
$str// *
,//* +
$str00 +
,00+ ,
$str11 *
,11* +
$str22 /
,22/ 0
$str33 /
,33/ 0
$str44 @
,44@ A
$str55 #
,55# $
$str66 &
)66& '
)77 
;77 
bundles:: 
.:: 
Add:: 
(:: 
new:: 
StyleBundle:: '
(::' (
$str::( @
)::@ A
.;; 
Include;; 
(;; 
$str;; 9
);;9 :
)<< 
;<< 
bundles>> 
.>> 
Add>> 
(>> 
new>> 
ScriptBundle>> (
(>>( )
$str>>) B
)>>B C
.?? 
Include?? 
(?? 
$str?? 8
,??8 9
$str@@ 0
)@@0 1
)AA 
;AA 
bundlesEE 
.EE 
AddEE 
(EE 
newEE 
ScriptBundleEE (
(EE( )
$strEE) A
)EEA B
.EEB C
IncludeEEC J
(EEJ K
$strGG D
,GGD E
$strHH E
,HHE F
$strII @
,II@ A
$strJJ 8
,JJ8 9
$strKK :
,KK: ;
$strLL 8
,LL8 9
$strMM @
,MM@ A
$strNN @
,NN@ A
$strOO A
,OOA B
$strPP @
,PP@ A
$strQQ I
,QQI J
$strRR J
,RRJ K
$strSS C
)VV 
)VV 
;VV 
bundlesXX 
.XX 
AddXX 
(XX 
newXX 
StyleBundleXX '
(XX' (
$strXX( :
)XX: ;
.XX; <
IncludeXX< C
(XXC D
$strYY H
,YYH I
$strZZ I
,ZZI J
$str[[ L
,[[L M
$str\\ N
,\\N O
$str]] M
)^^ 
)^^ 
;^^ 
bundlesdd 
.dd 
Adddd 
(dd 
newdd 
ScriptBundledd (
(dd( )
$strdd) >
)dd> ?
.dd? @
Includedd@ G
(ddG H
)ee 
)ee 
;ee 
bundlesgg 
.gg 
Addgg 
(gg 
newgg 
StyleBundlegg '
(gg' (
$strgg( >
)gg> ?
.gg? @
Includegg@ G
(ggG H
$strhh 1
)hh1 2
)hh2 3
;hh3 4
bundlesnn 
.nn 
Addnn 
(nn 
newnn 
StyleBundlenn '
(nn' (
$strnn( G
)nnG H
.nnH I
IncludennI P
(nnP Q
$stroo 0
)oo0 1
)oo1 2
;oo2 3
bundlesqq 
.qq 
Addqq 
(qq 
newqq 
ScriptBundleqq (
(qq( )
$strqq) E
)qqE F
.qqF G
IncludeqqG N
(qqN O
)rr 
)rr 
;rr 
}vv 	
}ww 
}xx Ü
UC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\App_Start\FilterConfig.cs
	namespace 	
PlanoDeAcaoMVC
 
{ 
public 

class 
FilterConfig 
{ 
public 
static 
void !
RegisterGlobalFilters 0
(0 1"
GlobalFilterCollection1 G
filtersH O
)O P
{		 	
filters

 
.

 
Add

 
(

 
new

  
HandleErrorAttribute

 0
(

0 1
)

1 2
)

2 3
;

3 4
} 	
} 
} ˇ
^C:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\App_Start\MoneyMaskBundleConfig.cs
[ 
assembly 	
:	 

WebActivatorEx 
. &
PostApplicationStartMethod 4
(4 5
typeof5 ;
(; <
PlanoDeAcaoMVC< J
.J K
	App_StartK T
.T U!
MoneyMaskBundleConfigU j
)j k
,k l
$strm ~
)~ 
]	 Ä
	namespace 	
PlanoDeAcaoMVC
 
. 
	App_Start "
{ 
public 
class !
MoneyMaskBundleConfig #
{ 
public		 
static			 
void		 
RegisterBundles		 $
(		$ %
)		% &
{

 
BundleTable 
. 
Bundles 
. 
Add 
( 
new 
ScriptBundle +
(+ ,
$str, A
)A B
.B C
IncludeC J
(J K
$strK j
)j k
)k l
;l m
} 
} 
} ‰
TC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\App_Start\RouteConfig.cs
	namespace 	
PlanoDeAcaoMVC
 
{		 
public

 

class

 
RouteConfig

 
{ 
public 
static 
void 
RegisterRoutes )
() *
RouteCollection* 9
routes: @
)@ A
{ 	
routes 
. 
IgnoreRoute 
( 
$str ;
); <
;< =
routes 
. 
MapRoute 
( 
name 
: 
$str 
,  
url 
: 
$str 1
,1 2
defaults 
: 
new 
{ 

controller  *
=+ ,
$str- 3
,3 4
action5 ;
=< =
$str> E
,E F
idG I
=J K
UrlParameterL X
.X Y
OptionalY a
}b c
) 
; 
} 	
} 
} ·	
UC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\App_Start\WebApiConfig.cs
	namespace 	
PlanoDeAcaoMVC
 
{ 
public 

static 
class 
WebApiConfig $
{ 
public 
static 
void 
Register #
(# $
HttpConfiguration$ 5
config6 <
)< =
{ 	
config

 
.

 
Filters

 
.

 
Add

 
(

 
new

 "
	HandleApi

# ,
(

, -
)

- .
)

. /
;

/ 0
config 
. "
MapHttpAttributeRoutes )
() *
)* +
;+ ,
config 
. 
Routes 
. 
MapHttpRoute &
(& '
name 
: 
$str "
," #
routeTemplate 
: 
$str 6
,6 7
defaults 
: 
new 
{ 
id  "
=# $
RouteParameter% 3
.3 4
Optional4 <
}= >
) 
; 
} 	
} 
} è
eC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\Api\ApiGerenciarController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
.$ %
Api% (
{ 
[ 
RoutePrefix 
( 
$str #
)# $
]$ %
public 

class "
ApiGerenciarController '
:( )
BaseApiController* ;
{ 
string 
dtInit 
; 
string 
dtFim 
; 
private 
PlanoDeAcaoEntities #
db$ &
;& '
public "
ApiGerenciarController %
(% &
)& '
{ 	
db 
= 
new 
PlanoDeAcaoEntities (
(( )
)) *
;* +
} 	
[ 	
HttpGet	 
] 
[ 	
Route	 
( 
$str 
) 
] 
public 
List 
< 
JObject 
> 
List !
(! "
JObject" )
filtro* 0
)0 1
{ 	
var 
query 
= 
$str )
+* +
$str	 8
+9 :
$str	 2
+3 4
$str  	 !
+  " #
$str!!	 I
;!!I J
if## 
(## 
!## 
Conn## 
.## 
visaoOperacional## &
)##& '
{$$ 
query%% 
+=%% 
$str	%% â
+
%%ä ã
$str&& f
+&&g h
$str'' ]
+''^ _
$str(( I
+((J K
$str)) i
+))j k
$str** g
+**h i
$str++ R
+++S T
$str,, O
+,,P Q
$str-- M
+--N O
$str.. S
;..S T
}// 
query11 
+=11 
$str11 .
+11/ 0
$str22 @
+22A B
$str33 A
+33B C
$str44 q
+44r s
$str55 [
+55\ ]
$str66 U
+66V W
$str77 C
+77D E
$str88 \
+88] ^
$str99 h
+99i j
$str:: p
+::q r
$str;; Z
+;;[ \
$str<< Z
+<<[ \
$str== V
+==W X
$str>> O
+>>P Q
$str?? W
;??W X
returnCC 

QueryNinjaCC 
(CC 
dbCC  
,CC  !
queryCC" '
)CC' (
;CC( )
}DD 	
}EE 
}FF ßm
_C:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\Api\ApiSgqController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
.$ %
Api% (
{ 
[ 
RoutePrefix 
( 
$str 
) 
] 
[ 

EnableCors 
( 
origins 
: 
$str 
, 
headers %
:% &
$str' *
,* +
methods, 3
:3 4
$str5 8
)8 9
]9 :
public 

class 
ApiSgqController !
:" #
BaseApiController$ 5
{ 
private 
PlanoAcaoEF 
. 
PlanoDeAcaoEntities /
db0 2
;2 3
public 
ApiSgqController 
(  
)  !
{ 	
db 
= 
new 
PlanoAcaoEF  
.  !
PlanoDeAcaoEntities! 4
(4 5
)5 6
;6 7
db 
. 
Configuration 
. 
LazyLoadingEnabled /
=0 1
false2 7
;7 8
db 
. 
Configuration 
. $
AutoDetectChangesEnabled 5
=6 7
false8 =
;= >
} 	
[ 	
HttpPost	 
] 
[ 	
Route	 
( 
$str 
) 
] 
public 

Dictionary 
< 
string  
,  !
int" %
>% &
GetAcoes' /
(/ 0
JObject0 7
filtro8 >
)> ?
{   	
try!! 
{"" 
dynamic## 
	filtroDyn## !
=##" #
filtro##$ *
;##* +
var&& 
retorno&& 
=&& 
new&& !

Dictionary&&" ,
<&&, -
string&&- 3
,&&3 4
int&&5 8
>&&8 9
(&&9 :
)&&: ;
;&&; <
string'' 
inicio'' 
='' 
	filtroDyn''  )
.'') *
	startDate''* 3
;''3 4
string(( 
fim(( 
=(( 
	filtroDyn(( &
.((& '
endDate((' .
;((. /
int)) 
level)) 
=)) 
	filtroDyn)) %
.))% &
isLevel))& -
;))- .
var** 

dataInicio** 
=**  
Guard**! &
.**& '
ParseDateToSqlV2**' 7
(**7 8
inicio**8 >
,**> ?
Guard**@ E
.**E F
CultureCurrent**F T
.**T U
BR**U W
)**W X
;**X Y
var++ 
dataFim++ 
=++ 
Guard++ #
.++# $
ParseDateToSqlV2++$ 4
(++4 5
fim++5 8
,++8 9
Guard++: ?
.++? @
CultureCurrent++@ N
.++N O
BR++O Q
)++Q R
.++R S
AddHours++S [
(++[ \
$num++\ ^
)++^ _
.++_ `

AddMinutes++` j
(++j k
$num++k m
)++m n
.++n o

AddSeconds++o y
(++y z
$num++z |
)++| }
;++} ~
using-- 
(-- 
var-- 
dbSgq--  
=--! "
new--# &

ConexaoSgq--' 1
(--1 2
)--2 3
.--3 4
db--4 6
)--6 7
{.. 
string// 
unidade// "
=//# $
	filtroDyn//% .
.//. /
unitName/// 7
;//7 8
dynamic00 

unidadeDyn00 &
=00' (
dbSgq00) .
.00. /
QueryNinjaADO00/ <
(00< =
$str00= m
+00n o
unidade00p w
+00x y
$str	00z â
+
00ä ã
unidade
00å ì
+
00î ï
$str
00ñ ô
)
00ô ö
.
00ö õ
FirstOrDefault
00õ ©
(
00© ™
)
00™ ´
;
00´ ¨
string22 
unidadeNameSGQ22 )
=22* +

unidadeDyn22, 6
.226 7
Name227 ;
;22; <
if44 
(44 
level44 
==44  
$num44! "
)44" #
{55 
string66 
level166 %
=66& '
	filtroDyn66( 1
.661 2

level1Name662 <
;66< =
string77 
level277 %
=77& '
	filtroDyn77( 1
.771 2

level2Name772 <
;77< =
List88 
<88 
string88 #
>88# $

level3Name88% /
=880 1
	filtroDyn882 ;
.88; <
level3names88< G
.88G H
ToObject88H P
<88P Q
List88Q U
<88U V
string88V \
>88\ ]
>88] ^
(88^ _
)88_ `
;88` a
retorno99 
=99  !
FiltraPorLevel399" 1
(991 2
	filtroDyn992 ;
,99; <

dataInicio99= G
,99G H
dataFim99I P
,99P Q
dbSgq99R W
,99W X
unidade99Y `
,99` a
level199b h
,99h i
unidadeNameSGQ99j x
,99x y
level2	99z Ä
,
99Ä Å

level3Name
99Ç å
)
99å ç
;
99ç é
}:: 
else;; 
if;; 
(;; 
level;; "
==;;# %
$num;;& '
);;' (
{<< 
string== 
level1== %
===& '
	filtroDyn==( 1
.==1 2

level1Name==2 <
;==< =
List>> 
<>> 
string>> #
>>># $

level2Name>>% /
=>>0 1
	filtroDyn>>2 ;
.>>; <
level2names>>< G
.>>G H
ToObject>>H P
<>>P Q
List>>Q U
<>>U V
string>>V \
>>>\ ]
>>>] ^
(>>^ _
)>>_ `
;>>` a
retorno?? 
=??  !
FiltraPorLevel2??" 1
(??1 2

dataInicio??2 <
,??< =
dataFim??> E
,??E F
dbSgq??G L
,??L M
level1??N T
,??T U
unidadeNameSGQ??V d
,??d e

level2Name??f p
)??p q
;??q r
}@@ 
elseAA 
ifAA 
(AA 
levelAA "
==AA# %
$numAA& '
)AA' (
{BB 
ListCC 
<CC 
stringCC #
>CC# $

level1NameCC% /
=CC0 1
	filtroDynCC2 ;
.CC; <
level1namesCC< G
.CCG H
ToObjectCCH P
<CCP Q
ListCCQ U
<CCU V
stringCCV \
>CC\ ]
>CC] ^
(CC^ _
)CC_ `
;CC` a
retornoDD 
=DD  !
FiltraPorLevel1DD" 1
(DD1 2

dataInicioDD2 <
,DD< =
dataFimDD> E
,DDE F
dbSgqDDG L
,DDL M

level1NameDDN X
,DDX Y
unidadeNameSGQDDZ h
)DDh i
;DDi j
}EE 
}GG 
returnII 
retornoII 
;II 
}JJ 
catchKK 
(KK 
	ExceptionKK 
eKK 
)KK 
{LL 
returnMM 
newMM 

DictionaryMM %
<MM% &
stringMM& ,
,MM, -
intMM. 1
>MM1 2
(MM2 3
)MM3 4
;MM4 5
}NN 
}PP 	
privateYY 

DictionaryYY 
<YY 
stringYY !
,YY! "
intYY# &
>YY& '
FiltraPorLevel2YY( 7
(YY7 8
DateTimeYY8 @

dataInicioYYA K
,YYK L
DateTimeYYM U
dataFimYYV ]
,YY] ^
FactoryYY_ f
dbSgqYYg l
,YYl m
stringYYn t
level1YYu {
,YY{ |
string	YY} É
unidadeNameSGQ
YYÑ í
,
YYí ì
List
YYî ò
<
YYò ô
string
YYô ü
>
YYü †

level2Name
YY° ´
)
YY´ ¨
{ZZ 	
var[[ 
	registros[[ 
=[[ 
$num[[ 
;[[ 
var\\ 
retorno\\ 
=\\ 
new\\ 

Dictionary\\ (
<\\( )
string\\) /
,\\/ 0
int\\1 4
>\\4 5
(\\5 6
)\\6 7
;\\7 8
foreach]] 
(]] 
var]] 
l2Name]] 
in]]  "

level2Name]]# -
)]]- .
{^^ 
	registros`` 
=`` 
db`` 
.`` 
Pa_Acao`` &
.``& '
Count``' ,
(``, -
r``- .
=>``/ 1
r``2 3
.``3 4
UnidadeName``4 ?
==``@ B
unidadeNameSGQ``C Q
&&``R T
r``U V
.``V W

Level1Name``W a
==``b d
level1``e k
&&``l n
r``o p
.``p q

Level2Name``q {
==``| ~
l2Name	`` Ö
&&
``Ü à
(
``ä ã
r
``ã å
.
``å ç
Status
``ç ì
==
``î ñ
$num
``ó ò
||
``ô õ
r
``ú ù
.
``ù û
Status
``û §
==
``• ß
$num
``® ©
)
``© ™
)
``™ ´
;
``´ ¨
retornoaa 
.aa 
Addaa 
(aa 
l2Nameaa "
,aa" #
	registrosaa$ -
)aa- .
;aa. /
}bb 
returncc 
retornocc 
;cc 
}dd 	
privateff 

Dictionaryff 
<ff 
stringff !
,ff! "
intff# &
>ff& '
FiltraPorLevel1ff( 7
(ff7 8
DateTimeff8 @

dataInicioffA K
,ffK L
DateTimeffM U
dataFimffV ]
,ff] ^
Factoryff_ f
dbSgqffg l
,ffl m
Listffn r
<ffr s
stringffs y
>ffy z

level1Name	ff{ Ö
,
ffÖ Ü
string
ffá ç
unidadeNameSGQ
ffé ú
)
ffú ù
{gg 	
varhh 
	registroshh 
=hh 
$numhh 
;hh 
varii 
retornoii 
=ii 
newii 

Dictionaryii (
<ii( )
stringii) /
,ii/ 0
intii1 4
>ii4 5
(ii5 6
)ii6 7
;ii7 8
foreachjj 
(jj 
varjj 
l1Namejj 
injj  "

level1Namejj# -
)jj- .
{kk 
	registrosmm 
=mm 
dbmm 
.mm 
Pa_Acaomm &
.mm& '
Countmm' ,
(mm, -
rmm- .
=>mm/ 1
rmm2 3
.mm3 4
UnidadeNamemm4 ?
==mm@ B
unidadeNameSGQmmC Q
&&mmR T
rmmU V
.mmV W

Level1NamemmW a
==mmb d
l1Namemme k
&&mml n
(mmo p
rmmp q
.mmq r
Statusmmr x
==mmy {
$nummm| }
||	mm~ Ä
r
mmÅ Ç
.
mmÇ É
Status
mmÉ â
==
mmä å
$num
mmç é
)
mmé è
)
mmè ê
;
mmê ë
retornonn 
.nn 
Addnn 
(nn 
l1Namenn "
,nn" #
	registrosnn$ -
)nn- .
;nn. /
}oo 
returnpp 
retornopp 
;pp 
}qq 	
privatess 

Dictionaryss 
<ss 
stringss !
,ss! "
intss# &
>ss& '
FiltraPorLevel3ss( 7
(ss7 8
dynamicss8 ?
	filtroDynss@ I
,ssI J
DateTimessK S

dataIniciossT ^
,ss^ _
DateTimess` h
dataFimssi p
,ssp q
Factoryssr y
dbSgqssz 
,	ss Ä
string
ssÅ á
unidade
ssà è
,
ssè ê
string
ssë ó
level1
ssò û
,
ssû ü
string
ss† ¶
unidadeNameSGQ
ssß µ
,
ssµ ∂
string
ss∑ Ω
level2
ssæ ƒ
,
ssƒ ≈
List
ss∆  
<
ss  À
string
ssÀ —
>
ss— “

level3Name
ss” ›
)
ss› ﬁ
{tt 	
varuu 
	registrosuu 
=uu 
$numuu 
;uu 
varvv 
retornovv 
=vv 
newvv 

Dictionaryvv (
<vv( )
stringvv) /
,vv/ 0
intvv1 4
>vv4 5
(vv5 6
)vv6 7
;vv7 8
foreachww 
(ww 
varww 
l3Nameww 
inww  "

level3Nameww# -
)ww- .
{xx 
	registroszz 
=zz 
dbzz 
.zz 
Pa_Acaozz &
.zz& '
Countzz' ,
(zz, -
rzz- .
=>zz/ 1
rzz2 3
.zz3 4
UnidadeNamezz4 ?
==zz@ B
unidadeNameSGQzzC Q
&&zzR T
rzzU V
.zzV W

Level1NamezzW a
==zzb d
level1zze k
&&zzl n
rzzo p
.zzp q

Level2Namezzq {
==zz| ~
level2	zz Ö
&&
zzÜ à
r
zzâ ä
.
zzä ã

Level3Name
zzã ï
==
zzñ ò
l3Name
zzô ü
&&
zz† ¢
(
zz§ •
r
zz• ¶
.
zz¶ ß
Status
zzß ≠
==
zzÆ ∞
$num
zz± ≤
||
zz≥ µ
r
zz∂ ∑
.
zz∑ ∏
Status
zz∏ æ
==
zzø ¡
$num
zz¬ √
)
zz√ ƒ
)
zzƒ ≈
;
zz≈ ∆
retorno{{ 
.{{ 
Add{{ 
({{ 
l3Name{{ "
,{{" #
	registros{{$ -
){{- .
;{{. /
}|| 
return}} 
retorno}} 
;}} 
}~~ 	
}
ÅÅ 
}ÇÇ ∞
^C:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\GerenciarController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
{ 
public		 

class		 
GerenciarController		 $
:		% &

Controller		' 1
{

 
public 
ActionResult 
Index !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
} 
} Âg
UC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\PaMail\PaAsyncServices.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
PaMail 
{ 
public 

static 
class 
PaAsyncServices '
{ 
public 
static 
void 
SendMailPATeste *
(* +
EmailContent+ 7
email8 =
)= >
{ 	
try 
{ 
using 
( 
var 
db 
= 
new  #
PlanoDeAcaoEntities$ 7
(7 8
)8 9
)9 :
{ 
SaveEmailContenteEF '
(' (
email( -
,- .
db/ 1
)1 2
;2 3
Task 
. 
Run 
( 
( 
) 
=>  "

MailSender# -
.- .
SendMail. 6
(6 7
Mapper7 =
.= >
Map> A
<A B
EmailContentDTOB Q
>Q R
(R S
emailS X
)X Y
,Y Z
Conn[ _
._ `
	emailFrom` i
,i j
Guardk p
.p q
DecryptStringAES	q Å
(
Å Ç
Conn
Ç Ü
.
Ü á
	emailPass
á ê
)
ê ë
,
ë í
Conn
ì ó
.
ó ò
	emailSmtp
ò °
,
° ¢
Conn
£ ß
.
ß ®
	emailPort
® ±
,
± ≤
Conn
≥ ∑
.
∑ ∏
emailSSL
∏ ¿
,
¿ ¡%
SendCompletedCallbackPA
¬ Ÿ
,
Ÿ ⁄
true
€ ﬂ
)
ﬂ ‡
)
‡ ·
;
· ‚
} 
} 
catch 
( 
	Exception 
ex 
)  
{   
using!! 
(!! 
var!! 
db!! 
=!! 
new!!  #
PlanoDeAcaoEntities!!$ 7
(!!7 8
)!!8 9
)!!9 :
{"" 
db## 
.## 
Configuration## $
.##$ %!
ValidateOnSaveEnabled##% :
=##; <
false##= B
;##B C
email$$ 
.$$ 

SendStatus$$ $
=$$% &
ex$$' )
.$$) *
Message$$* 1
;$$1 2
email%% 
.%% 
	AlterDate%% #
=%%$ %
DateTime%%& .
.%%. /
Now%%/ 2
;%%2 3
email&& 
.&& 

SendStatus&& $
=&&% &
$str&&' -
;&&- .
var(( 
entry(( 
=(( 
db((  "
.((" #
Entry((# (
(((( )
email(() .
)((. /
;((/ 0
entry)) 
.)) 
State)) 
=))  !
System))" (
.))( )
Data))) -
.))- .
Entity)). 4
.))4 5
EntityState))5 @
.))@ A
Modified))A I
;))I J
entry** 
.** 
Property** "
(**" #
r**# $
=>**% '
r**( )
.**) *

SendStatus*** 4
)**4 5
.**5 6

IsModified**6 @
=**A B
true**C G
;**G H
entry++ 
.++ 
Property++ "
(++" #
r++# $
=>++% '
r++( )
.++) *
	AlterDate++* 3
)++3 4
.++4 5

IsModified++5 ?
=++@ A
true++B F
;++F G
entry,, 
.,, 
Property,, "
(,," #
r,,# $
=>,,% '
r,,( )
.,,) *
SendDate,,* 2
),,2 3
.,,3 4

IsModified,,4 >
=,,? @
true,,A E
;,,E F
db-- 
.-- 
SaveChanges-- "
(--" #
)--# $
;--$ %
}.. 
}11 
}33 	
private55 
static55 
void55 
SaveEmailContenteEF55 /
(55/ 0
EmailContent550 <
email55= B
,55B C
PlanoDeAcaoEntities55D W
dbPa55X \
)55\ ]
{66 	
if77 
(77 
email77 
.77 
Id77 
>77 
$num77 
)77 
{88 
email99 
.99 
	AlterDate99 
=99  !
DateTime99" *
.99* +
Now99+ .
;99. /
dbPa:: 
.:: 
EmailContent:: !
.::! "
Attach::" (
(::( )
email::) .
)::. /
;::/ 0
var;; 
entry;; 
=;; 
dbPa;;  
.;;  !
Entry;;! &
(;;& '
email;;' ,
);;, -
;;;- .
entry<< 
.<< 
State<< 
=<< 
System<< $
.<<$ %
Data<<% )
.<<) *
Entity<<* 0
.<<0 1
EntityState<<1 <
.<<< =
Modified<<= E
;<<E F
entry== 
.== 
Property== 
(== 
e==  
=>==! #
e==$ %
.==% &
AddDate==& -
)==- .
.==. /

IsModified==/ 9
===: ;
false==< A
;==A B
dbPa>> 
.>> 
SaveChanges>>  
(>>  !
)>>! "
;>>" #
}?? 
else@@ 
{AA 
emailBB 
.BB 
AddDateBB 
=BB 
DateTimeBB  (
.BB( )
NowBB) ,
;BB, -
dbPaCC 
.CC 
EmailContentCC !
.CC! "
AddCC" %
(CC% &
emailCC& +
)CC+ ,
;CC, -
dbPaDD 
.DD 
SaveChangesDD  
(DD  !
)DD! "
;DD" #
}EE 
}FF 	
publicHH 
staticHH 
voidHH #
SendCompletedCallbackPAHH 2
(HH2 3
objectHH3 9
senderHH: @
,HH@ A#
AsyncCompletedEventArgsHHB Y
eHHZ [
)HH[ \
{II 	
tryJJ 
{KK 
usingLL 
(LL 
varLL 
dbLL 
=LL 
newLL  #
PlanoDeAcaoEntitiesLL$ 7
(LL7 8
)LL8 9
)LL9 :
{MM 
dbOO 
.OO 
ConfigurationOO $
.OO$ %!
ValidateOnSaveEnabledOO% :
=OO; <
falseOO= B
;OOB C
dbPP 
.PP 
ConfigurationPP $
.PP$ %
LazyLoadingEnabledPP% 7
=PP8 9
falsePP: ?
;PP? @
StringSS 
tokenSS  
=SS! "
(SS# $
stringSS$ *
)SS* +
eSS+ ,
.SS, -
	UserStateSS- 6
;SS6 7
varTT 
idTT 
=TT 
intTT  
.TT  !
ParseTT! &
(TT& '
tokenTT' ,
)TT, -
;TT- .
varVV 
emailContentVV $
=VV% &
dbVV' )
.VV) *
EmailContentVV* 6
.VV6 7
FirstOrDefaultVV7 E
(VVE F
rVVF G
=>VVH J
rVVK L
.VVL M
IdVVM O
==VVP R
idVVS U
)VVU V
;VVV W
ifXX 
(XX 
eXX 
.XX 
	CancelledXX #
)XX# $
{YY 
emailContent[[ $
.[[$ %

SendStatus[[% /
=[[0 1
string[[2 8
.[[8 9
Format[[9 ?
([[? @
$str[[@ W
,[[W X
token[[Y ^
)[[^ _
;[[_ `
}\\ 
if]] 
(]] 
e]] 
.]] 
Error]] 
!=]]  "
null]]# '
)]]' (
{^^ 
emailContent`` $
.``$ %

SendStatus``% /
=``0 1
string``2 8
.``8 9
Format``9 ?
(``? @
$str``@ Z
,``Z [
token``\ a
,``a b
e``c d
.``d e
Error``e j
.``j k
ToString``k s
(``s t
)``t u
)``u v
;``v w
}aa 
elsebb 
{cc 
emailContentee $
.ee$ %

SendStatusee% /
=ee0 1
stringee2 8
.ee8 9
Formatee9 ?
(ee? @
$stree@ O
)eeO P
;eeP Q
}ff 
emailContenthh  
.hh  !
	AlterDatehh! *
=hh+ ,
DateTimehh- 5
.hh5 6
Nowhh6 9
;hh9 :
emailContentii  
.ii  !
SendDateii! )
=ii* +
DateTimeii, 4
.ii4 5
Nowii5 8
;ii8 9
ifkk 
(kk 
emailContentkk $
.kk$ %

SendStatuskk% /
.kk/ 0
Lengthkk0 6
>kk7 8
$numkk9 <
)kk< =
emailContentll $
.ll$ %

SendStatusll% /
=ll0 1
emailContentll2 >
.ll> ?

SendStatusll? I
.llI J
	SubstringllJ S
(llS T
$numllT U
,llU V
$numllW Z
)llZ [
;ll[ \
dboo 
.oo 
EmailContentoo #
.oo# $
Attachoo$ *
(oo* +
emailContentoo+ 7
)oo7 8
;oo8 9
varrr 
entryrr 
=rr 
dbrr  "
.rr" #
Entryrr# (
(rr( )
emailContentrr) 5
)rr5 6
;rr6 7
entryss 
.ss 
Statess 
=ss  !
Systemss" (
.ss( )
Datass) -
.ss- .
Entityss. 4
.ss4 5
EntityStatess5 @
.ss@ A
ModifiedssA I
;ssI J
entrytt 
.tt 
Propertytt "
(tt" #
rtt# $
=>tt% '
rtt( )
.tt) *

SendStatustt* 4
)tt4 5
.tt5 6

IsModifiedtt6 @
=ttA B
truettC G
;ttG H
entryuu 
.uu 
Propertyuu "
(uu" #
ruu# $
=>uu% '
ruu( )
.uu) *
	AlterDateuu* 3
)uu3 4
.uu4 5

IsModifieduu5 ?
=uu@ A
trueuuB F
;uuF G
entryvv 
.vv 
Propertyvv "
(vv" #
rvv# $
=>vv% '
rvv( )
.vv) *
SendDatevv* 2
)vv2 3
.vv3 4

IsModifiedvv4 >
=vv? @
truevvA E
;vvE F
dbxx 
.xx 
SaveChangesxx "
(xx" #
)xx# $
;xx$ %
}zz 
}{{ 
catch|| 
(|| '
DbEntityValidationException|| .
ex1||/ 2
)||2 3
{}} 
var~~ 
aMerdaQueDeu~~  
=~~! "
string~~# )
.~~) *
Empty~~* /
;~~/ 0
foreach
ÄÄ 
(
ÄÄ 
var
ÄÄ 
i
ÄÄ 
in
ÄÄ !
ex1
ÄÄ" %
.
ÄÄ% &$
EntityValidationErrors
ÄÄ& <
)
ÄÄ< =
{
ÅÅ 
aMerdaQueDeu
ÇÇ  
+=
ÇÇ! #
string
ÇÇ$ *
.
ÇÇ* +
Format
ÇÇ+ 1
(
ÇÇ1 2
$strÇÇ2 Ä
,ÇÇÄ Å
iÇÇÇ É
.ÇÇÉ Ñ
EntryÇÇÑ â
.ÇÇâ ä
EntityÇÇä ê
.ÇÇê ë
GetTypeÇÇë ò
(ÇÇò ô
)ÇÇô ö
.ÇÇö õ
NameÇÇõ ü
,ÇÇü †
iÇÇ° ¢
.ÇÇ¢ £
EntryÇÇ£ ®
.ÇÇ® ©
StateÇÇ© Æ
)ÇÇÆ Ø
;ÇÇØ ∞
Console
ÉÉ 
.
ÉÉ 
	WriteLine
ÉÉ %
(
ÉÉ% &
$str
ÉÉ& t
,
ÉÉt u
i
ÉÉv w
.
ÉÉw x
Entry
ÉÉx }
.
ÉÉ} ~
EntityÉÉ~ Ñ
.ÉÉÑ Ö
GetTypeÉÉÖ å
(ÉÉå ç
)ÉÉç é
.ÉÉé è
NameÉÉè ì
,ÉÉì î
iÉÉï ñ
.ÉÉñ ó
EntryÉÉó ú
.ÉÉú ù
StateÉÉù ¢
)ÉÉ¢ £
;ÉÉ£ §
foreach
ÑÑ 
(
ÑÑ 
var
ÑÑ  
ve
ÑÑ! #
in
ÑÑ$ &
i
ÑÑ' (
.
ÑÑ( )
ValidationErrors
ÑÑ) 9
)
ÑÑ9 :
{
ÖÖ 
aMerdaQueDeu
ÜÜ $
+=
ÜÜ% '
string
ÜÜ( .
.
ÜÜ. /
Format
ÜÜ/ 5
(
ÜÜ5 6
$str
ÜÜ6 [
,
ÜÜ[ \
ve
ÜÜ] _
.
ÜÜ_ `
PropertyName
ÜÜ` l
,
ÜÜl m
ve
ÜÜn p
.
ÜÜp q
ErrorMessage
ÜÜq }
)
ÜÜ} ~
;
ÜÜ~ 
Console
áá 
.
áá  
	WriteLine
áá  )
(
áá) *
$str
áá* O
,
ááO P
ve
ááQ S
.
ááS T
PropertyName
ááT `
,
áá` a
ve
ááb d
.
áád e
ErrorMessage
ááe q
)
ááq r
;
áár s
}
àà 
}
ââ 
}
åå 
catch
çç 
(
çç 
	Exception
çç 
ex
çç 
)
çç  
{
éé 
}
ëë 
}
íí 	
}
ññ 
}óó ‘¬
cC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\Api\ApiPa_AcaoController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
.$ %
Api% (
{ 
[ 
RoutePrefix 
( 
$str 
) 
]  
public 

class  
ApiPa_AcaoController %
:& '
BaseApiController( 9
{ 
[ 	
HttpGet	 
] 
[ 	
Route	 
( 
$str 
) 
] 
public 
IEnumerable 
< 
Pa_Acao "
>" #
List$ (
(( )
)) *
{ 	
return 
Pa_Acao 
. 
Listar !
(! "
)" #
;# $
} 	
[ 	
HttpGet	 
] 
[ 	
Route	 
( 
$str 
) 
] 
public 
Pa_Acao 
Get 
( 
int 
id !
)! "
{ 	
return   
Pa_Acao   
.   
Get   
(   
id   !
)  ! "
;  " #
}!! 	
[## 	
HttpPost##	 
]## 
[$$ 	
Route$$	 
($$ 
$str$$ 
)$$ 
]$$ 
public%% 
List%% 
<%% 
Pa_Acao%% 
>%% 
Save%% !
(%%! "
[%%" #
FromBody%%# +
]%%+ ,
List%%- 1
<%%1 2
Pa_Acao%%2 9
>%%9 :
acao%%; ?
)%%? @
{&& 	
bool'' 
IsFTA'' 
='' 
false'' 
;'' 
foreach)) 
()) 
var)) 
i)) 
in)) 
acao)) "
)))" #
i** 
.** 
IsValid** 
(** 
)** 
;** 
foreach,, 
(,, 
var,, 
i,, 
in,, 
acao,, "
),," #
{-- 
var.. 
	acaoSaved.. 
=.. 
Mapper..  &
...& '
Map..' *
<..* +
PlanoAcaoEF..+ 6
...6 7
Pa_Acao..7 >
>..> ?
(..? @
i..@ A
)..A B
;..B C

SalvarAcao// 
(// 
	acaoSaved// $
,//$ %
IsFTA//& +
)//+ ,
;//, -

CreateMail00 
(00 
i00 
.00 
Panejamento_Id00 +
,00+ ,
	acaoSaved00- 6
.006 7
Id007 9
,009 :
i00; <
.00< =
Quem_Id00= D
,00D E
Conn00F J
.00J K
TitileMailNovaAcao00K ]
)00] ^
;00^ _
}11 
return33 
acao33 
;33 
}44 	
[66 	
HttpPost66	 
]66 
[77 	
Route77	 
(77 
$str77 #
)77# $
]77$ %
public88 
Pa_Acompanhamento88  
Acompanhamento88! /
(88/ 0
Pa_Acompanhamento880 A
obj88B E
)88E F
{99 	
var:: 
acompanhamento:: 
=::  
Mapper::! '
.::' (
Map::( +
<::+ ,
PlanoAcaoEF::, 7
.::7 8
Pa_Acompanhamento::8 I
>::I J
(::J K
obj::K N
)::N O
;::O P
using;; 
(;; 
var;; 
db;; 
=;; 
new;; 
PlanoAcaoEF;;  +
.;;+ ,
PlanoDeAcaoEntities;;, ?
(;;? @
);;@ A
);;A B
{<<  
SalvarAcompanhamento== $
(==$ %
db==% '
,==' (
acompanhamento==) 7
)==7 8
;==8 9
var>> 
acao>> 
=>> 
db>> 
.>> 
Pa_Acao>> %
.>>% &
FirstOrDefault>>& 4
(>>4 5
r>>5 6
=>>>7 9
r>>: ;
.>>; <
Id>>< >
==>>? A
acompanhamento>>B P
.>>P Q
Acao_Id>>Q X
)>>X Y
;>>Y Z
foreach?? 
(?? 
var?? 
i?? 
in?? !
obj??" %
.??% &
MailTo??& ,
)??, -
{@@ $
Pa_AcompanhamentoXQuemVMAA ,
obj2AA- 1
=AA2 3
newAA4 7$
Pa_AcompanhamentoXQuemVMAA8 P
(AAP Q
)AAQ R
;AAR S
varBB 
	acomXQuemBB !
=BB" #
MapperBB$ *
.BB* +
MapBB+ .
<BB. /
PlanoAcaoEFBB/ :
.BB: ;"
Pa_AcompanhamentoXQuemBB; Q
>BBQ R
(BBR S
obj2BBS W
)BBW X
;BBX Y
	acomXQuemCC 
.CC 
Acompanhamento_IdCC /
=CC0 1
acompanhamentoCC2 @
.CC@ A
IdCCA C
;CCC D
	acomXQuemDD 
.DD 
Quem_IdDD %
=DD& '
iDD( )
;DD) *%
SalvarAcompanhamentoXQuemEE -
(EE- .
dbEE. 0
,EE0 1
	acomXQuemEE2 ;
)EE; <
;EE< =

CreateMailFF 
(FF 
acaoFF #
.FF# $
Panejamento_IdFF$ 2
.FF2 3
GetValueOrDefaultFF3 D
(FFD E
)FFE F
,FFF G
acaoFFH L
.FFL M
IdFFM O
,FFO P
	acomXQuemFFQ Z
.FFZ [
Quem_IdFF[ b
,FFb c
ConnFFd h
.FFh i%
TitileMailAcompanhamento	FFi Å
,
FFÅ Ç
true
FFÉ á
)
FFá à
;
FFà â
}GG 
}HH 
returnII 
objII 
;II 
}JJ 	
[LL 	
HttpPostLL	 
]LL 
[MM 	
RouteMM	 
(MM 
$strMM 
)MM 
]MM 
publicNN 
FTANN 
SaveFTANN 
(NN 
FTANN 
objNN "
)NN" #
{OO 	
objPP 
.PP 
	ValidaFTAPP 
(PP 
)PP 
;PP 
objQQ 
.QQ 
IsValidQQ 
(QQ 
)QQ 
;QQ 
varRR 
acaoRR 
=RR 
MapperRR 
.RR 
MapRR !
<RR! "
PlanoAcaoEFRR" -
.RR- .
Pa_AcaoRR. 5
>RR5 6
(RR6 7
objRR7 :
)RR: ;
;RR; <
varSS 
ftaSS 
=SS 
MapperSS 
.SS 
MapSS  
<SS  !
PlanoAcaoEFSS! ,
.SS, -
Pa_FTASS- 3
>SS3 4
(SS4 5
objSS5 8
)SS8 9
;SS9 :
SalvaFTATT 
(TT 
ftaTT 
)TT 
;TT 
acaoUU 
.UU 
Fta_IdUU 
=UU 
ftaUU 
.UU 
IdUU  
;UU  !

SalvarAcaoVV 
(VV 
acaoVV 
,VV 
objVV  
.VV  !
IsFTAVV! &
)VV& '
;VV' (

CreateMailWW 
(WW 
objWW 
.WW 
Panejamento_IdWW )
,WW) *
acaoWW+ /
.WW/ 0
IdWW0 2
,WW2 3
objWW4 7
.WW7 8
Quem_IdWW8 ?
,WW? @
ConnWWA E
.WWE F
TitileMailNovoFTAWWF W
)WWW X
;WWX Y
returnXX 
objXX 
;XX 
}YY 	
private]] 
void]] %
SalvarAcompanhamentoXQuem]] .
(]]. /
PlanoAcaoEF]]/ :
.]]: ;
PlanoDeAcaoEntities]]; N
db]]O Q
,]]Q R
PlanoAcaoEF]]S ^
.]]^ _"
Pa_AcompanhamentoXQuem]]_ u
quem]]v z
)]]z {
{^^ 	
if__ 
(__ 
quem__ 
.__ 
Id__ 
>__ 
$num__ 
)__ 
{`` 
dbaa 
.aa "
Pa_AcompanhamentoXQuemaa )
.aa) *
Attachaa* 0
(aa0 1
quemaa1 5
)aa5 6
;aa6 7
varbb 
entrybb 
=bb 
dbbb 
.bb 
Entrybb $
(bb$ %
quembb% )
)bb) *
;bb* +
entrycc 
.cc 
Statecc 
=cc 
Systemcc $
.cc$ %
Datacc% )
.cc) *
Entitycc* 0
.cc0 1
EntityStatecc1 <
.cc< =
Modifiedcc= E
;ccE F
dbdd 
.dd 
SaveChangesdd 
(dd 
)dd  
;dd  !
}ee 
elseff 
{gg 
dbhh 
.hh "
Pa_AcompanhamentoXQuemhh )
.hh) *
Addhh* -
(hh- .
quemhh. 2
)hh2 3
;hh3 4
dbii 
.ii 
SaveChangesii 
(ii 
)ii  
;ii  !
}jj 
}kk 	
privatemm 
voidmm  
SalvarAcompanhamentomm )
(mm) *
PlanoAcaoEFmm* 5
.mm5 6
PlanoDeAcaoEntitiesmm6 I
dbmmJ L
,mmL M
PlanoAcaoEFmmN Y
.mmY Z
Pa_AcompanhamentommZ k
acommml p
)mmp q
{nn 	
ifoo 
(oo 
acomoo 
.oo 
Idoo 
>oo 
$numoo 
)oo 
{pp 
acomqq 
.qq 
	AlterDateqq 
=qq  
DateTimeqq! )
.qq) *
Nowqq* -
;qq- .
dbrr 
.rr 
Pa_Acompanhamentorr $
.rr$ %
Attachrr% +
(rr+ ,
acomrr, 0
)rr0 1
;rr1 2
varss 
entryss 
=ss 
dbss 
.ss 
Entryss $
(ss$ %
acomss% )
)ss) *
;ss* +
entrytt 
.tt 
Statett 
=tt 
Systemtt $
.tt$ %
Datatt% )
.tt) *
Entitytt* 0
.tt0 1
EntityStatett1 <
.tt< =
Modifiedtt= E
;ttE F
dbuu 
.uu 
SaveChangesuu 
(uu 
)uu  
;uu  !
dbvv 
.vv 
Databasevv 
.vv 
ExecuteSqlCommandvv -
(vv- .
$strvv. L
+vvM N
acomvvO S
.vvS T
	Status_IdvvT ]
+vv^ _
$strvv` n
+vvo p
acomvvq u
.vvu v
Acao_Idvvv }
)vv} ~
;vv~ 
}ww 
elsexx 
{yy 
acomzz 
.zz 
AddDatezz 
=zz 
DateTimezz '
.zz' (
Nowzz( +
;zz+ ,
db{{ 
.{{ 
Pa_Acompanhamento{{ $
.{{$ %
Add{{% (
({{( )
acom{{) -
){{- .
;{{. /
db|| 
.|| 
SaveChanges|| 
(|| 
)||  
;||  !
db}} 
.}} 
Database}} 
.}} 
ExecuteSqlCommand}} -
(}}- .
$str}}. L
+}}M N
acom}}O S
.}}S T
	Status_Id}}T ]
+}}^ _
$str}}` n
+}}o p
acom}}q u
.}}u v
Acao_Id}}v }
)}}} ~
;}}~ 
}~~ 
} 	
private
ÅÅ 
void
ÅÅ 

SalvarAcao
ÅÅ 
(
ÅÅ  
PlanoAcaoEF
ÅÅ  +
.
ÅÅ+ ,
Pa_Acao
ÅÅ, 3
acao
ÅÅ4 8
,
ÅÅ8 9
bool
ÅÅ: >
IsFTA
ÅÅ? D
)
ÅÅD E
{
ÇÇ 	
GetLevelName
ÖÖ 
(
ÖÖ 
acao
ÖÖ 
)
ÖÖ 
;
ÖÖ 
GetUnidadeName
áá 
(
áá 
acao
áá 
,
áá  
IsFTA
áá! &
)
áá& '
;
áá' (
GetRegionalName
ââ 
(
ââ 
acao
ââ  
)
ââ  !
;
ââ! "
Salvar
ãã 
(
ãã 
acao
ãã 
)
ãã 
;
ãã 
}
çç 	
private
èè 
static
èè 
void
èè 
GetRegionalName
èè +
(
èè+ ,
PlanoAcaoEF
èè, 7
.
èè7 8
Pa_Acao
èè8 ?
acao
èè@ D
)
èèD E
{
êê 	
if
ëë 
(
ëë 
acao
ëë 
.
ëë 

Unidade_Id
ëë 
>
ëë  !
$num
ëë" #
)
ëë# $
{
íí 
using
ïï 
(
ïï 
var
ïï 
dbSgq
ïï  
=
ïï! "
new
ïï# &

ConexaoSgq
ïï' 1
(
ïï1 2
)
ïï2 3
.
ïï3 4
db
ïï4 6
)
ïï6 7
{
ññ 
var
óó 
Regional
óó  
=
óó! "
dbSgq
óó# (
.
óó( )
QueryNinjaADO
óó) 6
(
óó6 7
$str
óó7 v
+
óów x
$str
òò$ g
+
òòh i
$str
ôô$ >
+
ôô? @
acao
ôôA E
.
ôôE F

Unidade_Id
ôôF P
)
ôôP Q
.
ôôQ R
FirstOrDefault
ôôR `
(
ôô` a
)
ôôa b
;
ôôb c
if
öö 
(
öö 
Regional
öö  
!=
öö! #
null
öö$ (
)
öö( )
{
õõ 
acao
úú 
.
úú 
Regional
úú %
=
úú& '
Regional
úú( 0
.
úú0 1
GetValue
úú1 9
(
úú9 :
$str
úú: @
)
úú@ A
.
úúA B
Value
úúB G
<
úúG H
string
úúH N
>
úúN O
(
úúO P
)
úúP Q
;
úúQ R
}
ùù 
}
ûû 
}
§§ 
}
•• 	
private
ßß 
void
ßß 
GetUnidadeName
ßß #
(
ßß# $
PlanoAcaoEF
ßß$ /
.
ßß/ 0
Pa_Acao
ßß0 7
acao
ßß8 <
,
ßß< =
bool
ßß> B
IsFTA
ßßC H
)
ßßH I
{
®® 	
if
©© 
(
©© 
acao
©© 
.
©© 

Unidade_Id
©© 
>
©©  !
$num
©©" #
)
©©# $
{
™™ 
if
´´ 
(
´´ 
IsFTA
´´ 
)
´´ 
{
¨¨ 
using
ÆÆ 
(
ÆÆ 
var
ÆÆ 
dbSgq
ÆÆ $
=
ÆÆ% &
new
ÆÆ' *

ConexaoSgq
ÆÆ+ 5
(
ÆÆ5 6
)
ÆÆ6 7
.
ÆÆ7 8
db
ÆÆ8 :
)
ÆÆ: ;
{
ØØ 
acao
∞∞ 
.
∞∞ 
UnidadeName
∞∞ (
=
∞∞) *
dbSgq
∞∞+ 0
.
∞∞0 1
QueryNinjaADO
∞∞1 >
(
∞∞> ?
$str
∞∞? h
+
∞∞i j
acao
∞∞k o
.
∞∞o p

Unidade_Id
∞∞p z
)
∞∞z {
.
∞∞{ |
FirstOrDefault∞∞| ä
(∞∞ä ã
)∞∞ã å
.∞∞å ç
GetValue∞∞ç ï
(∞∞ï ñ
$str∞∞ñ ú
)∞∞ú ù
.∞∞ù û
Value∞∞û £
<∞∞£ §
string∞∞§ ™
>∞∞™ ´
(∞∞´ ¨
)∞∞¨ ≠
;∞∞≠ Æ
}
±± 
using
¥¥ 
(
¥¥ 
var
¥¥ 
dbPa
¥¥ #
=
¥¥$ %
new
¥¥& )
PlanoAcaoEF
¥¥* 5
.
¥¥5 6!
PlanoDeAcaoEntities
¥¥6 I
(
¥¥I J
)
¥¥J K
)
¥¥K L
{
µµ 
acao
∂∂ 
.
∂∂ 

Unidade_Id
∂∂ '
=
∂∂( )

QueryNinja
∂∂* 4
(
∂∂4 5
dbPa
∂∂5 9
,
∂∂9 :
$str
∂∂; k
+
∂∂l m
acao
∂∂n r
.
∂∂r s
UnidadeName
∂∂s ~
+∂∂ Ä
$str∂∂Å Ñ
)∂∂Ñ Ö
.∂∂Ö Ü
FirstOrDefault∂∂Ü î
(∂∂î ï
)∂∂ï ñ
.∂∂ñ ó
GetValue∂∂ó ü
(∂∂ü †
$str∂∂† §
)∂∂§ •
.∂∂• ¶
Value∂∂¶ ´
<∂∂´ ¨
int∂∂¨ Ø
>∂∂Ø ∞
(∂∂∞ ±
)∂∂± ≤
;∂∂≤ ≥
}
∑∑ 
}
∏∏ 
else
ππ 
{
∫∫ 
using
ªª 
(
ªª 
var
ªª 
dbPa
ªª #
=
ªª$ %
new
ªª& )
PlanoAcaoEF
ªª* 5
.
ªª5 6!
PlanoDeAcaoEntities
ªª6 I
(
ªªI J
)
ªªJ K
)
ªªK L
{
ºº 
acao
ΩΩ 
.
ΩΩ 
UnidadeName
ΩΩ (
=
ΩΩ) *

QueryNinja
ΩΩ+ 5
(
ΩΩ5 6
dbPa
ΩΩ6 :
,
ΩΩ: ;
$str
ΩΩ< b
+
ΩΩc d
acao
ΩΩe i
.
ΩΩi j

Unidade_Id
ΩΩj t
)
ΩΩt u
.
ΩΩu v
FirstOrDefaultΩΩv Ñ
(ΩΩÑ Ö
)ΩΩÖ Ü
.ΩΩÜ á
GetValueΩΩá è
(ΩΩè ê
$strΩΩê ù
)ΩΩù û
.ΩΩû ü
ValueΩΩü §
<ΩΩ§ •
stringΩΩ• ´
>ΩΩ´ ¨
(ΩΩ¨ ≠
)ΩΩ≠ Æ
;ΩΩÆ Ø
}
ææ 
}
øø 
}
¡¡ 
}
¬¬ 	
private
ƒƒ 
void
ƒƒ 
GetLevelName
ƒƒ !
(
ƒƒ! "
PlanoAcaoEF
ƒƒ" -
.
ƒƒ- .
Pa_Acao
ƒƒ. 5
acao
ƒƒ6 :
)
ƒƒ: ;
{
≈≈ 	
using
∆∆ 
(
∆∆ 
var
∆∆ 
dbSgq
∆∆ 
=
∆∆ 
new
∆∆ "

ConexaoSgq
∆∆# -
(
∆∆- .
)
∆∆. /
.
∆∆/ 0
db
∆∆0 2
)
∆∆2 3
{
«« 
try
»» 
{
…… 
if
   
(
   
acao
   
.
   
Level1Id
   %
>
  & '
$num
  ( )
)
  ) *
{
ÀÀ 
acao
ÃÃ 
.
ÃÃ 

Level1Name
ÃÃ '
=
ÃÃ( )
dbSgq
ÃÃ* /
.
ÃÃ/ 0
QueryNinjaADO
ÃÃ0 =
(
ÃÃ= >
$str
ÃÃ> f
+
ÃÃg h
acao
ÃÃi m
.
ÃÃm n
Level1Id
ÃÃn v
)
ÃÃv w
.
ÃÃw x
FirstOrDefaultÃÃx Ü
(ÃÃÜ á
)ÃÃá à
.ÃÃà â
GetValueÃÃâ ë
(ÃÃë í
$strÃÃí ò
)ÃÃò ô
.ÃÃô ö
ValueÃÃö ü
<ÃÃü †
stringÃÃ† ¶
>ÃÃ¶ ß
(ÃÃß ®
)ÃÃ® ©
;ÃÃ© ™
}
ÕÕ 
if
œœ 
(
œœ 
acao
œœ 
.
œœ 
Level2Id
œœ %
>
œœ& '
$num
œœ( )
)
œœ) *
{
–– 
acao
—— 
.
—— 

Level2Name
—— '
=
——( )
dbSgq
——* /
.
——/ 0
QueryNinjaADO
——0 =
(
——= >
$str
——> f
+
——g h
acao
——i m
.
——m n
Level2Id
——n v
)
——v w
.
——w x
FirstOrDefault——x Ü
(——Ü á
)——á à
.——à â
GetValue——â ë
(——ë í
$str——í ò
)——ò ô
.——ô ö
Value——ö ü
<——ü †
string——† ¶
>——¶ ß
(——ß ®
)——® ©
;——© ™
}
““ 
if
‘‘ 
(
‘‘ 
acao
‘‘ 
.
‘‘ 
Level3Id
‘‘ %
>
‘‘& '
$num
‘‘( )
)
‘‘) *
{
’’ 
acao
÷÷ 
.
÷÷ 

Level3Name
÷÷ '
=
÷÷( )
dbSgq
÷÷* /
.
÷÷/ 0
QueryNinjaADO
÷÷0 =
(
÷÷= >
$str
÷÷> f
+
÷÷g h
acao
÷÷i m
.
÷÷m n
Level3Id
÷÷n v
)
÷÷v w
.
÷÷w x
FirstOrDefault÷÷x Ü
(÷÷Ü á
)÷÷á à
.÷÷à â
GetValue÷÷â ë
(÷÷ë í
$str÷÷í ò
)÷÷ò ô
.÷÷ô ö
Value÷÷ö ü
<÷÷ü †
string÷÷† ¶
>÷÷¶ ß
(÷÷ß ®
)÷÷® ©
;÷÷© ™
}
◊◊ 
}
ÿÿ 
catch
ŸŸ 
(
ŸŸ 
	Exception
ŸŸ  
ex
ŸŸ! #
)
ŸŸ# $
{
⁄⁄ 
throw
€€ 
ex
€€ 
;
€€ 
}
‹‹ 
}
ﬁﬁ 
}
ﬂﬂ 	
private
·· 
static
·· 
void
·· 
Salvar
·· "
(
··" #
PlanoAcaoEF
··# .
.
··. /
Pa_Acao
··/ 6
acao
··7 ;
)
··; <
{
‚‚ 	
using
„„ 
(
„„ 
var
„„ 
db
„„ 
=
„„ 
new
„„ 
PlanoAcaoEF
„„  +
.
„„+ ,!
PlanoDeAcaoEntities
„„, ?
(
„„? @
)
„„@ A
)
„„A B
{
‰‰ 
if
ÂÂ 
(
ÂÂ 
acao
ÂÂ 
.
ÂÂ 
Id
ÂÂ 
>
ÂÂ 
$num
ÂÂ 
)
ÂÂ  
{
ÊÊ 
acao
ÁÁ 
.
ÁÁ 
	AlterDate
ÁÁ "
=
ÁÁ# $
DateTime
ÁÁ% -
.
ÁÁ- .
Now
ÁÁ. 1
;
ÁÁ1 2
db
ËË 
.
ËË 
Pa_Acao
ËË 
.
ËË 
Attach
ËË %
(
ËË% &
acao
ËË& *
)
ËË* +
;
ËË+ ,
var
ÈÈ 
entry
ÈÈ 
=
ÈÈ 
db
ÈÈ  "
.
ÈÈ" #
Entry
ÈÈ# (
(
ÈÈ( )
acao
ÈÈ) -
)
ÈÈ- .
;
ÈÈ. /
entry
ÍÍ 
.
ÍÍ 
State
ÍÍ 
=
ÍÍ  !
System
ÍÍ" (
.
ÍÍ( )
Data
ÍÍ) -
.
ÍÍ- .
Entity
ÍÍ. 4
.
ÍÍ4 5
EntityState
ÍÍ5 @
.
ÍÍ@ A
Modified
ÍÍA I
;
ÍÍI J
entry
ÎÎ 
.
ÎÎ 
Property
ÎÎ "
(
ÎÎ" #
e
ÎÎ# $
=>
ÎÎ% '
e
ÎÎ( )
.
ÎÎ) *
AddDate
ÎÎ* 1
)
ÎÎ1 2
.
ÎÎ2 3

IsModified
ÎÎ3 =
=
ÎÎ> ?
false
ÎÎ@ E
;
ÎÎE F
db
ÏÏ 
.
ÏÏ 
SaveChanges
ÏÏ "
(
ÏÏ" #
)
ÏÏ# $
;
ÏÏ$ %
}
ÌÌ 
else
ÓÓ 
{
ÔÔ 
acao
 
.
 
AddDate
  
=
! "
DateTime
# +
.
+ ,
Now
, /
;
/ 0
db
ÒÒ 
.
ÒÒ 
Pa_Acao
ÒÒ 
.
ÒÒ 
Add
ÒÒ "
(
ÒÒ" #
acao
ÒÒ# '
)
ÒÒ' (
;
ÒÒ( )
db
ÚÚ 
.
ÚÚ 
SaveChanges
ÚÚ "
(
ÚÚ" #
)
ÚÚ# $
;
ÚÚ$ %
}
ÛÛ 
}
ÙÙ 
}
ıı 	
private
˜˜ 
void
˜˜ 
SalvaFTA
˜˜ 
(
˜˜ 
PlanoAcaoEF
˜˜ )
.
˜˜) *
Pa_FTA
˜˜* 0
fta
˜˜1 4
)
˜˜4 5
{
¯¯ 	
using
˚˚ 
(
˚˚ 
var
˚˚ 
db
˚˚ 
=
˚˚ 
new
˚˚ 
PlanoAcaoEF
˚˚  +
.
˚˚+ ,!
PlanoDeAcaoEntities
˚˚, ?
(
˚˚? @
)
˚˚@ A
)
˚˚A B
{
¸¸ 
if
˝˝ 
(
˝˝ 
fta
˝˝ 
.
˝˝ 
Id
˝˝ 
>
˝˝ 
$num
˝˝ 
)
˝˝ 
{
˛˛ 
fta
ˇˇ 
.
ˇˇ 
AddDate
ˇˇ 
=
ˇˇ  !
DateTime
ˇˇ" *
.
ˇˇ* +
Now
ˇˇ+ .
;
ˇˇ. /
db
ÄÄ 
.
ÄÄ 
Pa_FTA
ÄÄ 
.
ÄÄ 
Attach
ÄÄ $
(
ÄÄ$ %
fta
ÄÄ% (
)
ÄÄ( )
;
ÄÄ) *
var
ÅÅ 
entry
ÅÅ 
=
ÅÅ 
db
ÅÅ  "
.
ÅÅ" #
Entry
ÅÅ# (
(
ÅÅ( )
fta
ÅÅ) ,
)
ÅÅ, -
;
ÅÅ- .
entry
ÇÇ 
.
ÇÇ 
State
ÇÇ 
=
ÇÇ  !
System
ÇÇ" (
.
ÇÇ( )
Data
ÇÇ) -
.
ÇÇ- .
Entity
ÇÇ. 4
.
ÇÇ4 5
EntityState
ÇÇ5 @
.
ÇÇ@ A
Modified
ÇÇA I
;
ÇÇI J
db
ÉÉ 
.
ÉÉ 
SaveChanges
ÉÉ "
(
ÉÉ" #
)
ÉÉ# $
;
ÉÉ$ %
}
ÑÑ 
else
ÖÖ 
{
ÜÜ 
fta
áá 
.
áá 
AddDate
áá 
=
áá  !
DateTime
áá" *
.
áá* +
Now
áá+ .
;
áá. /
db
àà 
.
àà 
Pa_FTA
àà 
.
àà 
Add
àà !
(
àà! "
fta
àà" %
)
àà% &
;
àà& '
db
ââ 
.
ââ 
SaveChanges
ââ "
(
ââ" #
)
ââ# $
;
ââ$ %
}
ää 
}
ãã 
}
çç 	
}
ëë 
}ìì „Ç
kC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\Api\ApiPa_PlanejamentoController.cs
	namespace		 	
PlanoDeAcaoMVC		
 
.		 
Controllers		 $
.		$ %
Api		% (
{

 
[ 
RoutePrefix 
( 
$str &
)& '
]' (
public 

class (
ApiPa_PlanejamentoController -
:. /
ApiController0 =
{ 
PlanoAcaoEF 
. 
PlanoDeAcaoEntities '
db( *
;* +
public (
ApiPa_PlanejamentoController +
(+ ,
), -
{ 	
db 
= 
new 
PlanoAcaoEF  
.  !
PlanoDeAcaoEntities! 4
(4 5
)5 6
;6 7
} 	
[ 	
HttpGet	 
] 
[ 	
Route	 
( 
$str 
) 
] 
public 
IEnumerable 
< 
Pa_Planejamento *
>* +
List, 0
(0 1
)1 2
{ 	
return 
Pa_Planejamento "
." #
Listar# )
() *
)* +
;+ ,
} 	
[ 	
HttpGet	 
] 
[ 	
Route	 
( 
$str 
) 
] 
public 
Pa_Planejamento 
Get "
(" #
int# &
id' )
)) *
{ 	
var   
planejamento   
=   
Pa_Planejamento   .
.  . /
Get  / 2
(  2 3
id  3 5
)  5 6
;  6 7
if!! 
(!! 
planejamento!! 
.!! 
Estrategico_Id!! +
.!!+ ,
GetValueOrDefault!!, =
(!!= >
)!!> ?
>!!@ A
$num!!B C
)!!C D
{"" 
}$$ 
return%% 
planejamento%% 
;%%  
}&& 	
[(( 	
HttpGet((	 
](( 
[)) 	
HttpPost))	 
])) 
[** 	
Route**	 
(** 
$str** $
)**$ %
]**% &
public++ 
IEnumerable++ 
<++ 
Pa_Planejamento++ *
>++* +
GetPlanejamentoAcao++, ?
(++? @
)++@ A
{,, 	
var-- 
retorno-- 
=-- 
Pa_Planejamento-- )
.--) *
GetPlanejamentoAcao--* =
(--= >
)--> ?
;--? @
foreach.. 
(.. 
var.. 
i.. 
in.. 
retorno.. %
)..% &
{// 
if11 
(11 
i11 
.11 
Estrategico_Id11 $
.11$ %
GetValueOrDefault11% 6
(116 7
)117 8
>119 :
$num11; <
)11< =
{22 
}44 
}55 
return66 
retorno66 
;66 
}77 	
[99 	
HttpPost99	 
]99 
[:: 	
Route::	 
(:: 
$str:: 
):: 
]:: 
public;; 
Pa_Planejamento;; 
Save;; #
(;;# $
[;;$ %
FromBody;;% -
];;- .
Pa_Planejamento;;. =
planejamento;;> J
);;J K
{<< 	
planejamento>> 
.>> 
IsValid>> $
(>>$ %
)>>% &
;>>& '
planejamento@@ 
.@@ 
IsfiltrarAcao@@ *
=@@+ ,
null@@- 1
;@@1 2
ifBB 
(BB 
planejamentoBB  
.BB  !
Estrategico_IdBB! /
.BB/ 0
GetValueOrDefaultBB0 A
(BBA B
)BBB C
>BBD E
$numBBF G
)BBG H
{CC 
ifDD 
(DD 
!DD 
stringDD 
.DD  
IsNullOrEmptyDD  -
(DD- .
planejamentoDD. :
.DD: ;
_ValorDeDD; C
)DDC D
)DDD E
planejamentoEE $
.EE$ %
ValorDeEE% ,
=EE- .
NumericExtensionsEE/ @
.EE@ A
CustomParseDecimalEEA S
(EES T
planejamentoEET `
.EE` a
_ValorDeEEa i
)EEi j
.EEj k
GetValueOrDefaultEEk |
(EE| }
)EE} ~
;EE~ 
ifFF 
(FF 
!FF 
stringFF 
.FF  
IsNullOrEmptyFF  -
(FF- .
planejamentoFF. :
.FF: ;

_ValorParaFF; E
)FFE F
)FFF G
planejamentoGG $
.GG$ %
	ValorParaGG% .
=GG/ 0
NumericExtensionsGG1 B
.GGB C
CustomParseDecimalGGC U
(GGU V
planejamentoGGV b
.GGb c

_ValorParaGGc m
)GGm n
.GGn o
GetValueOrDefault	GGo Ä
(
GGÄ Å
)
GGÅ Ç
;
GGÇ É
planejamentoHH  
.HH  !

DataInicioHH! +
=HH, -
GuardHH. 3
.HH3 4
ParseDateToSqlV2HH4 D
(HHD E
planejamentoHHE Q
.HHQ R
_DataInicioHHR ]
,HH] ^
GuardHH_ d
.HHd e
CultureCurrentHHe s
.HHs t
BRHHt v
)HHv w
;HHw x
planejamentoII  
.II  !
DataFimII! (
=II) *
GuardII+ 0
.II0 1
ParseDateToSqlV2II1 A
(IIA B
planejamentoIIB N
.IIN O
_DataFimIIO W
,IIW X
GuardIIY ^
.II^ _
CultureCurrentII_ m
.IIm n
BRIIn p
)IIp q
;IIq r
}JJ 
ifLL 
(LL 
!LL 
planejamentoLL !
.LL! "
IsTaticoLL" *
)LL* +
{MM 
planejamentoNN  
.NN  !
	Tatico_IdNN! *
=NN+ ,
nullNN- 1
;NN1 2
planejamentoOO  
.OO  !
Gerencia_IdOO! ,
=OO- .
$numOO/ 0
;OO0 1
planejamentoPP  
.PP  !
Coordenacao_IdPP! /
=PP0 1
$numPP2 3
;PP3 4
planejamentoQQ  
.QQ  !
Iniciativa_IdQQ! .
=QQ/ 0
$numQQ1 2
;QQ2 3
planejamentoRR  
.RR  ! 
ObjetivoGerencial_IdRR! 5
=RR6 7
$numRR8 9
;RR9 :
planejamentoSS  
.SS  !
Responsavel_ProjetoSS! 4
=SS5 6
$numSS7 8
;SS8 9
planejamentoTT  
.TT  !
UnidadeDeMedida_IdTT! 3
=TT4 5
$numTT6 7
;TT7 8
planejamentoUU  
.UU  !#
IndicadoresDeProjeto_IdUU! 8
=UU9 :
$numUU; <
;UU< =
}VV 
elseWW 
ifWW 
(WW 
planejamentoWW %
.WW% &
IsTaticoWW& .
&&WW/ 1
planejamentoWW2 >
.WW> ?
	Tatico_IdWW? H
.WWH I
GetValueOrDefaultWWI Z
(WWZ [
)WW[ \
>WW] ^
$numWW_ `
)WW` a
{XX 
planejamentoYY  
.YY  !
IdYY! #
=YY$ %
planejamentoYY& 2
.YY2 3
	Tatico_IdYY3 <
.YY< =
GetValueOrDefaultYY= N
(YYN O
)YYO P
;YYP Q
}ZZ 
var]] 
a]] 
=]] 
Mapper]] 
.]] 
Map]] "
<]]" #
PlanoAcaoEF]]# .
.]]. /
Pa_Planejamento]]/ >
>]]> ?
(]]? @
planejamento]]@ L
)]]L M
;]]M N
if__ 
(__ 
a__ 
.__ 
Id__ 
>__ 
$num__ 
)__ 
{`` 
dbaa 
.aa 
Pa_Planejamentoaa &
.aa& '
Attachaa' -
(aa- .
aaa. /
)aa/ 0
;aa0 1
varbb 
entrybb 
=bb 
dbbb  "
.bb" #
Entrybb# (
(bb( )
abb) *
)bb* +
;bb+ ,
entrycc 
.cc 
Statecc 
=cc  !
Systemcc" (
.cc( )
Datacc) -
.cc- .
Entitycc. 4
.cc4 5
EntityStatecc5 @
.cc@ A
ModifiedccA I
;ccI J
dbff 
.ff 
SaveChangesff "
(ff" #
)ff# $
;ff$ %
}gg 
elsehh 
{ii 
dbjj 
.jj 
Pa_Planejamentojj &
.jj& '
Addjj' *
(jj* +
ajj+ ,
)jj, -
;jj- .
dbkk 
.kk 
SaveChangeskk "
(kk" #
)kk# $
;kk$ %
}ll 
ifpp 
(pp 
planejamentopp  
.pp  !
IsTaticopp! )
)pp) *
{qq 
arr 
.rr 
	Tatico_Idrr 
=rr  !
arr" #
.rr# $
Idrr$ &
;rr& '
dbuu 
.uu 
Pa_Planejamentouu &
.uu& '
Attachuu' -
(uu- .
auu. /
)uu/ 0
;uu0 1
varvv 
entryvv 
=vv 
dbvv  "
.vv" #
Entryvv# (
(vv( )
avv) *
)vv* +
;vv+ ,
entryww 
.ww 
Stateww 
=ww  !
Systemww" (
.ww( )
Dataww) -
.ww- .
Entityww. 4
.ww4 5
EntityStateww5 @
.ww@ A
ModifiedwwA I
;wwI J
dbzz 
.zz 
SaveChangeszz "
(zz" #
)zz# $
;zz$ %
}|| 
return
ÄÄ 
planejamento
ÄÄ 
;
ÄÄ  
}
ÅÅ 	
public
ãã 
Pa_Planejamento
ãã ,
CreateGenericEstrategicoTatico
ãã =
(
ãã= >
)
ãã> ?
{
åå 	
var
êê 
estrategico
êê 
=
êê 
new
êê !
PlanoAcaoEF
êê" -
.
êê- .
Pa_Planejamento
êê. =
(
êê= >
)
êê> ?
{
êê@ A
IsTatico
êêB J
=
êêK L
false
êêM R
}
êêS T
;
êêT U
estrategico
ëë 
.
ëë 
	Tatico_Id
ëë !
=
ëë" #
null
ëë$ (
;
ëë( )
estrategico
íí 
.
íí 
Gerencia_Id
íí #
=
íí$ %
$num
íí& '
;
íí' (
estrategico
ìì 
.
ìì 
Coordenacao_Id
ìì &
=
ìì' (
$num
ìì) *
;
ìì* +
estrategico
îî 
.
îî 
Iniciativa_Id
îî %
=
îî& '
$num
îî( )
;
îî) *
estrategico
ïï 
.
ïï "
ObjetivoGerencial_Id
ïï ,
=
ïï- .
$num
ïï/ 0
;
ïï0 1
estrategico
ññ 
.
ññ !
Responsavel_Projeto
ññ +
=
ññ, -
$num
ññ. /
;
ññ/ 0
estrategico
óó 
.
óó  
UnidadeDeMedida_Id
óó *
=
óó+ ,
$num
óó- .
;
óó. /
estrategico
òò 
.
òò %
IndicadoresDeProjeto_Id
òò /
=
òò0 1
$num
òò2 3
;
òò3 4"
SavePlanejamentoInDb
ôô  
(
ôô  !
estrategico
ôô! ,
)
ôô, -
;
ôô- .
var
õõ 
tatico
õõ 
=
õõ 
new
õõ 
PlanoAcaoEF
õõ (
.
õõ( )
Pa_Planejamento
õõ) 8
(
õõ8 9
)
õõ9 :
{
õõ; <
IsTatico
õõ= E
=
õõF G
true
õõH L
,
õõL M
Estrategico_Id
õõN \
=
õõ] ^
estrategico
õõ_ j
.
õõj k
Id
õõk m
}
õõn o
;
õõo p"
SavePlanejamentoInDb
úú  
(
úú  !
tatico
úú! '
)
úú' (
;
úú( )
tatico
ùù 
.
ùù 
	Tatico_Id
ùù 
=
ùù 
tatico
ùù %
.
ùù% &
Id
ùù& (
;
ùù( )"
SavePlanejamentoInDb
ûû  
(
ûû  !
tatico
ûû! '
)
ûû' (
;
ûû( )
return
££ 
Mapper
££ 
.
££ 
Map
££ 
<
££ 
Pa_Planejamento
££ -
>
££- .
(
££. /
tatico
££/ 5
)
££5 6
;
££6 7
}
§§ 	
public
ßß 
Pa_Planejamento
ßß /
!CreateGenericEstrategicoTaticoFta
ßß @
(
ßß@ A
)
ßßA B
{
®® 	
var
¨¨ 
estrategico
¨¨ 
=
¨¨ 
new
¨¨ !
PlanoAcaoEF
¨¨" -
.
¨¨- .
Pa_Planejamento
¨¨. =
(
¨¨= >
)
¨¨> ?
{
¨¨@ A
IsTatico
¨¨B J
=
¨¨K L
false
¨¨M R
}
¨¨S T
;
¨¨T U
estrategico
≠≠ 
.
≠≠ 
	Tatico_Id
≠≠ !
=
≠≠" #
null
≠≠$ (
;
≠≠( )
estrategico
ÆÆ 
.
ÆÆ 
Gerencia_Id
ÆÆ #
=
ÆÆ$ %
$num
ÆÆ& '
;
ÆÆ' (
estrategico
ØØ 
.
ØØ 
Coordenacao_Id
ØØ &
=
ØØ' (
$num
ØØ) *
;
ØØ* +
estrategico
∞∞ 
.
∞∞ 
Iniciativa_Id
∞∞ %
=
∞∞& '
$num
∞∞( )
;
∞∞) *
estrategico
±± 
.
±± "
ObjetivoGerencial_Id
±± ,
=
±±- .
$num
±±/ 0
;
±±0 1
estrategico
≤≤ 
.
≤≤ !
Responsavel_Projeto
≤≤ +
=
≤≤, -
$num
≤≤. /
;
≤≤/ 0
estrategico
≥≥ 
.
≥≥  
UnidadeDeMedida_Id
≥≥ *
=
≥≥+ ,
$num
≥≥- .
;
≥≥. /
estrategico
¥¥ 
.
¥¥ %
IndicadoresDeProjeto_Id
¥¥ /
=
¥¥0 1
$num
¥¥2 3
;
¥¥3 4"
SavePlanejamentoInDb
µµ  
(
µµ  !
estrategico
µµ! ,
)
µµ, -
;
µµ- .
var
∑∑ 
tatico
∑∑ 
=
∑∑ 
new
∑∑ 
PlanoAcaoEF
∑∑ (
.
∑∑( )
Pa_Planejamento
∑∑) 8
(
∑∑8 9
)
∑∑9 :
{
∑∑; <
IsTatico
∑∑= E
=
∑∑F G
true
∑∑H L
,
∑∑L M
Estrategico_Id
∑∑N \
=
∑∑] ^
estrategico
∑∑_ j
.
∑∑j k
Id
∑∑k m
}
∑∑n o
;
∑∑o p"
SavePlanejamentoInDb
∏∏  
(
∏∏  !
tatico
∏∏! '
)
∏∏' (
;
∏∏( )
tatico
ππ 
.
ππ 
	Tatico_Id
ππ 
=
ππ 
tatico
ππ %
.
ππ% &
Id
ππ& (
;
ππ( )
tatico
∫∫ 
.
∫∫ 
IsFta
∫∫ 
=
∫∫ 
true
∫∫ 
;
∫∫  "
SavePlanejamentoInDb
ªª  
(
ªª  !
tatico
ªª! '
)
ªª' (
;
ªª( )
return
¿¿ 
Mapper
¿¿ 
.
¿¿ 
Map
¿¿ 
<
¿¿ 
Pa_Planejamento
¿¿ -
>
¿¿- .
(
¿¿. /
tatico
¿¿/ 5
)
¿¿5 6
;
¿¿6 7
}
¡¡ 	
private
ƒƒ 
void
ƒƒ "
SavePlanejamentoInDb
ƒƒ )
(
ƒƒ) *
PlanoAcaoEF
ƒƒ* 5
.
ƒƒ5 6
Pa_Planejamento
ƒƒ6 E
a
ƒƒF G
)
ƒƒG H
{
≈≈ 	
if
∆∆ 
(
∆∆ 
a
∆∆ 
.
∆∆ 
Id
∆∆ 
>
∆∆ 
$num
∆∆ 
)
∆∆ 
{
«« 
db
»» 
.
»» 
Pa_Planejamento
»» "
.
»»" #
Attach
»»# )
(
»») *
a
»»* +
)
»»+ ,
;
»», -
var
…… 
entry
…… 
=
…… 
db
…… 
.
…… 
Entry
…… $
(
……$ %
a
……% &
)
……& '
;
……' (
entry
   
.
   
State
   
=
   
System
   $
.
  $ %
Data
  % )
.
  ) *
Entity
  * 0
.
  0 1
EntityState
  1 <
.
  < =
Modified
  = E
;
  E F
}
ÕÕ 
else
ŒŒ 
{
œœ 
db
–– 
.
–– 
Pa_Planejamento
–– "
.
––" #
Add
––# &
(
––& '
a
––' (
)
––( )
;
––) *
}
—— 
db
”” 
.
”” 
SaveChanges
”” 
(
”” 
)
”” 
;
”” 
}
‘‘ 	
}
÷÷ 
}◊◊ –
cC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\Api\ApiPa_UserController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
.$ %
Api% (
{ 
[ 
RoutePrefix 
( 
$str 
) 
]  
public 

class  
ApiPa_UserController %
:& '
BaseApiController( 9
{ 
[ 	
HttpPost	 
] 
[ 	
Route	 
( 
$str 
) 
] 
public 
JObject 
	CheckPass  
(  !
JObject! (
form) -
)- .
{ 	
dynamic 
user 
= 
form 
;  
string 
pass 
= 
user 
. 
pass #
;# $
string 
name 
= 
user 
. 
name #
;# $
using 
( 
var 
db 
= 
new 
Factory  '
(' (
Conn( ,
., -
dataSource2- 8
,8 9
Conn: >
.> ?
catalog2? G
,G H
ConnI M
.M N
pass2N S
,S T
ConnU Y
.Y Z
user2Z _
)_ `
)` a
{ 
var 
userSgq 
= 
db  
.  !
QueryNinjaADO! .
(. /
$str/ U
+V W
nameX \
+] ^
$str_ s
+t u
Guardv {
.{ |
EncryptStringAES	| å
(
å ç
pass
ç ë
)
ë í
+
ì î
$str
ï ò
)
ò ô
.
ô ö
FirstOrDefault
ö ®
(
® ©
)
© ™
;
™ ´
if 
( 
userSgq 
!= 
null #
)# $
{ 
user 
. 
response !
=" #
$str$ A
;A B
user 
. 
	isInvalid "
=# $
false% *
;* +
return 
user 
;  
}   
else!! 
{"" 
user## 
.## 
response## !
=##" #
$str##$ B
;##B C
user$$ 
.$$ 
	isInvalid$$ "
=$$# $
true$$% )
;$$) *
return%% 
user%% 
;%%  
}&& 
}'' 
}(( 	
[++ 	
HttpPost++	 
]++ 
[,, 	
Route,,	 
(,, 
$str,, 
),, 
],,  
public-- 
HttpResponseMessage-- "
GetUserCookie--# 0
(--0 1
[--1 2
FromBody--2 :
]--: ;
UserDTO--; B
userDto--C J
)--J K
{.. 	
var// 
resp// 
=// 
new// 
HttpResponseMessage// .
(//. /
)/// 0
;//0 1
var00 
cookie00 
=00 #
CreateCookieFromUserDTO00 0
(000 1
userDto001 8
)008 9
;009 :
resp11 
.11 
Headers11 
.11 

AddCookies11 #
(11# $
new11$ '
CookieHeaderValue11( 9
[119 :
]11: ;
{11< =
cookie11> D
}11E F
)11F G
;11G H
return22 
resp22 
;22 
}33 	
}77 
}88 øõ
`C:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\Api\BaseApiController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
.$ %
Api% (
{ 
public 

class 
BaseApiController "
:# $
ApiController% 2
{ 
	protected 
List 
< 
JObject 
> 

QueryNinja  *
(* +
	DbContext+ 4
db5 7
,7 8
string9 ?
query@ E
)E F
{ 	
db 
. 
Database 
. 

Connection "
." #
Open# '
(' (
)( )
;) *
var 
cmd 
= 
db 
. 
Database !
.! "

Connection" ,
., -
CreateCommand- :
(: ;
); <
;< =
cmd   
.   
CommandText   
=   
query   #
;  # $
var!! 
reader!! 
=!! 
cmd!! 
.!! 
ExecuteReader!! *
(!!* +
)!!+ ,
;!!, -
List"" 
<"" 
JObject"" 
>"" 
items"" 
=""  !
new""" %
List""& *
<""* +
JObject""+ 2
>""2 3
(""3 4
)""4 5
;""5 6
while## 
(## 
reader## 
.## 
Read## 
(## 
)##  
)##  !
{$$ 
JObject%% 
row%% 
=%% 
new%% !
JObject%%" )
(%%) *
)%%* +
;%%+ ,
for&& 
(&& 
int&& 
i&& 
=&& 
$num&& 
;&& 
i&&  !
<&&" #
reader&&$ *
.&&* +

FieldCount&&+ 5
;&&5 6
i&&7 8
++&&8 :
)&&: ;
row'' 
['' 
reader'' 
.'' 
GetName'' &
(''& '
i''' (
)''( )
]'') *
=''+ ,
reader''- 3
[''3 4
i''4 5
]''5 6
.''6 7
ToString''7 ?
(''? @
)''@ A
;''A B
items)) 
.)) 
Add)) 
()) 
row)) 
))) 
;)) 
}** 
db++ 
.++ 
Database++ 
.++ 

Connection++ "
.++" #
Close++# (
(++( )
)++) *
;++* +
return,, 
items,, 
;,, 
}-- 	
	protected44 
async44 
Task44 
<44 
string44 #
>44# $
GetExternalResponse44% 8
(448 9
string449 ?
url44@ C
)44C D
{55 	
using66 
(66 
var66 
client66 
=66 
new66  #

HttpClient66$ .
(66. /
)66/ 0
)660 1
{77 
client88 
.88 
Timeout88 
=88  
TimeSpan88! )
.88) *
FromMinutes88* 5
(885 6
$num886 7
)887 8
;888 9
var99 
response99 
=99 
await99 $
client99% +
.99+ ,
GetAsync99, 4
(994 5
url995 8
)998 9
.999 :
Result99: @
.99@ A
Content99A H
.99H I
ReadAsStringAsync99I Z
(99Z [
)99[ \
;99\ ]
return:: 
response:: 
;::  
};; 
}<< 	
	protectedBB 
voidBB 
ExecuteBatchBB #
(BB# $
stringBB$ *
pathBB+ /
)BB/ 0
{CC 	
varDD 

mappedPathDD 
=DD 
SystemDD #
.DD# $
WebDD$ '
.DD' (
HostingDD( /
.DD/ 0
HostingEnvironmentDD0 B
.DDB C
MapPathDDC J
(DDJ K
$strDDK O
+DDP Q
pathDDR V
)DDV W
;DDW X
varEE 
procEE 
=EE 
newEE 
SystemEE !
.EE! "
DiagnosticsEE" -
.EE- .
ProcessEE. 5
(EE5 6
)EE6 7
;EE7 8
procGG 
.GG 
	StartInfoGG 
.GG 
UseShellExecuteGG *
=GG+ ,
falseGG- 2
;GG2 3
procHH 
.HH 
	StartInfoHH 
.HH 
CreateNoWindowHH )
=HH* +
falseHH, 1
;HH1 2
procII 
.II 
	StartInfoII 
.II 
FileNameII #
=II$ %

mappedPathII& 0
;II0 1
procMM 
.MM 
StartMM 
(MM 
)MM 
;MM 
procNN 
.NN 
WaitForExitNN 
(NN 
)NN 
;NN 
}OO 	
	protectedVV 
CookieHeaderValueVV ##
CreateCookieFromUserDTOVV$ ;
(VV; <
UserDTOVV< C
userDtoVVD K
)VVK L
{WW 	
varXX 
valuesXX 
=XX 
newXX 
NameValueCollectionXX 0
(XX0 1
)XX1 2
;XX2 3
valuesYY 
.YY 
AddYY 
(YY 
$strYY 
,YY  
userDtoYY! (
.YY( )
IdYY) +
.YY+ ,
ToStringYY, 4
(YY4 5
)YY5 6
)YY6 7
;YY7 8
valuesZZ 
.ZZ 
AddZZ 
(ZZ 
$strZZ !
,ZZ! "
userDtoZZ# *
.ZZ* +
NameZZ+ /
)ZZ/ 0
;ZZ0 1
values[[ 
.[[ 
Add[[ 
([[ 
$str[[ "
,[[" #
userDto[[$ +
.[[+ ,
ParCompany_Id[[, 9
.[[9 :
GetValueOrDefault[[: K
([[K L
)[[L M
.[[M N
ToString[[N V
([[V W
)[[W X
)[[X Y
;[[Y Z
if\\ 
(\\ 
userDto\\ 
.\\ 
	AlterDate\\ !
!=\\" $
null\\% )
)\\) *
values]] 
.]] 
Add]] 
(]] 
$str]] &
,]]& '
userDto]]( /
.]]/ 0
	AlterDate]]0 9
.]]9 :
GetValueOrDefault]]: K
(]]K L
)]]L M
.]]M N
ToString]]N V
(]]V W
$str]]W c
)]]c d
)]]d e
;]]e f
else^^ 
values__ 
.__ 
Add__ 
(__ 
$str__ &
,__& '
$str__( *
)__* +
;__+ ,
valuesaa 
.aa 
Addaa 
(aa 
$straa  
,aa  !
userDtoaa" )
.aa) *
AddDateaa* 1
.aa1 2
ToStringaa2 :
(aa: ;
$straa; G
)aaG H
)aaH I
;aaI J
ifcc 
(cc 
userDtocc 
.cc 
Rolecc 
!=cc 
nullcc  $
)cc$ %
valuesdd 
.dd 
Adddd 
(dd 
$strdd "
,dd" #
userDtodd$ +
.dd+ ,
Roledd, 0
.dd0 1
Replacedd1 8
(dd8 9
$chardd9 <
,dd< =
$chardd> A
)ddA B
.ddB C
ToStringddC K
(ddK L
)ddL M
)ddM N
;ddN O
elseee 
valuesff 
.ff 
Addff 
(ff 
$strff "
,ff" #
$strff$ &
)ff& '
;ff' (
ifhh 
(hh 
userDtohh 
.hh 
ParCompanyXUserSgqhh *
!=hh+ -
nullhh. 2
)hh2 3
ifii 
(ii 
userDtoii 
.ii 
ParCompanyXUserSgqii .
.ii. /
Anyii/ 2
(ii2 3
rii3 4
=>ii5 7
rii8 9
.ii9 :
Roleii: >
!=ii? A
nulliiB F
)iiF G
)iiG H
valuesjj 
.jj 
Addjj 
(jj 
$strjj -
,jj- .
stringjj/ 5
.jj5 6
Joinjj6 :
(jj: ;
$strjj; >
,jj> ?
userDtojj@ G
.jjG H
ParCompanyXUserSgqjjH Z
.jjZ [
Selectjj[ a
(jja b
njjb c
=>jjd f
njjg h
.jjh i
Rolejji m
)jjm n
.jjn o
Distinctjjo w
(jjw x
)jjx y
.jjy z
ToArray	jjz Å
(
jjÅ Ç
)
jjÇ É
)
jjÉ Ñ
)
jjÑ Ö
;
jjÖ Ü
elsekk 
valuesll 
.ll 
Addll 
(ll 
$strll -
,ll- .
stringll/ 5
.ll5 6
Joinll6 :
(ll: ;
$strll; >
,ll> ?
userDtoll@ G
.llG H
ParCompanyXUserSgqllH Z
.llZ [
Selectll[ a
(lla b
nllb c
=>lld f
nllg h
.llh i
ParCompany_Idlli v
)llv w
.llw x
Distinct	llx Ä
(
llÄ Å
)
llÅ Ç
.
llÇ É
ToArray
llÉ ä
(
llä ã
)
llã å
)
llå ç
)
llç é
;
llé è
varoo 
cookieoo 
=oo 
newoo 
CookieHeaderValueoo .
(oo. /
$stroo/ A
,ooA B
valuesooC I
)ooI J
;ooJ K
cookiepp 
.pp 
MaxAgepp 
=pp 
TimeSpanpp $
.pp$ %
FromMinutespp% 0
(pp0 1
Connpp1 5
.pp5 6
sessionTimerpp6 B
)ppB C
;ppC D
cookieqq 
.qq 
Pathqq 
=qq 
$strqq 
;qq 
returnss 
cookiess 
;ss 
}tt 	
	protectedvv 
Listvv 
<vv 
JObjectvv 
>vv 
QueryNinjaPeloDbSgqvv  3
(vv3 4
stringvv4 :
queryvv; @
)vv@ A
{ww 	
usingxx 
(xx 
varxx 
dbSgqxx 
=xx 
newxx "
Factoryxx# *
(xx* +
Connxx+ /
.xx/ 0
dataSource2xx0 ;
,xx; <
Connxx= A
.xxA B
catalog2xxB J
,xxJ K
ConnxxL P
.xxP Q
pass2xxQ V
,xxV W
ConnxxX \
.xx\ ]
user2xx] b
)xxb c
)xxc d
{yy 
returnzz 
dbSgqzz 
.zz 
QueryNinjaADOzz *
(zz* +
queryzz+ 0
)zz0 1
;zz1 2
}{{ 
}|| 	
	protected~~ 
Factory~~ 

ConexaoSgq~~ $
(~~$ %
)~~% &
{ 	
return
ÄÄ 
new
ÄÄ 
Factory
ÄÄ 
(
ÄÄ 
Conn
ÄÄ #
.
ÄÄ# $
dataSource2
ÄÄ$ /
,
ÄÄ/ 0
Conn
ÄÄ1 5
.
ÄÄ5 6
catalog2
ÄÄ6 >
,
ÄÄ> ?
Conn
ÄÄ@ D
.
ÄÄD E
pass2
ÄÄE J
,
ÄÄJ K
Conn
ÄÄL P
.
ÄÄP Q
user2
ÄÄQ V
)
ÄÄV W
;
ÄÄW X
}
ÅÅ 	
	protected
ÉÉ 
void
ÉÉ 
UpdateStatus
ÉÉ #
(
ÉÉ# $
)
ÉÉ$ %
{
ÑÑ 	
using
ÖÖ 
(
ÖÖ 
var
ÖÖ 
dbPa
ÖÖ 
=
ÖÖ 
new
ÖÖ !
PlanoAcaoEF
ÖÖ" -
.
ÖÖ- .!
PlanoDeAcaoEntities
ÖÖ. A
(
ÖÖA B
)
ÖÖB C
)
ÖÖC D
{
ÜÜ 
dbPa
áá 
.
áá 
Database
áá 
.
áá 
ExecuteSqlCommand
áá /
(
áá/ 0
$stráá0 ∆
)áá∆ «
;áá« »
}
àà 
}
ââ 	
	protected
ãã 
void
ãã 

CreateMail
ãã !
(
ãã! "
int
ãã" %
idPlanejamento
ãã& 4
,
ãã4 5
int
ãã6 9
idAcao
ãã: @
,
ãã@ A
int
ããB E
?
ããE F
idQuem
ããG M
,
ããM N
string
ããO U
title
ããV [
,
ãã[ \
bool
ãã] a
?
ããa b
isAcompanhamento
ããc s
=
ããt u
false
ããv {
)
ãã{ |
{
åå 	
if
çç 
(
çç 
idQuem
çç 
.
çç 
GetValueOrDefault
çç (
(
çç( )
)
çç) *
>
çç+ ,
$num
çç- .
)
çç. /
using
éé 
(
éé 
var
éé 
dbSgq
éé  
=
éé! "

ConexaoSgq
éé# -
(
éé- .
)
éé. /
)
éé/ 0
{
èè 
var
êê 
paUser
êê 
=
êê  
Pa_Quem
êê! (
.
êê( )
Get
êê) ,
(
êê, -
idQuem
êê- 3
.
êê3 4
GetValueOrDefault
êê4 E
(
êêE F
)
êêF G
)
êêG H
;
êêH I
dynamic
ëë 

enviarPara
ëë &
=
ëë' (
dbSgq
ëë) .
.
ëë. /
QueryNinjaADO
ëë/ <
(
ëë< =
$str
ëë= d
+
ëëe f
paUser
ëëg m
.
ëëm n
Name
ëën r
+
ëës t
$str
ëëu x
)
ëëx y
.
ëëy z
FirstOrDefaultëëz à
(ëëà â
)ëëâ ä
;ëëä ã
string
íí 
emailTo
íí "
=
íí# $
$str
íí% '
;
íí' (
if
ìì 
(
ìì 

enviarPara
ìì "
!=
ìì# %
null
ìì& *
)
ìì* +
{
îî 
emailTo
ïï 
=
ïï  !

enviarPara
ïï" ,
.
ïï, -
Email
ïï- 2
;
ïï2 3
}
ññ 
var
òò 
todoConteudo
òò $
=
òò% &
string
òò' -
.
òò- .
Empty
òò. 3
;
òò3 4
if
öö 
(
öö 
!
öö 
isAcompanhamento
öö )
.
öö) *
GetValueOrDefault
öö* ;
(
öö; <
)
öö< =
)
öö= >
{
õõ 
var
úú "
conteudoPlanejamento
úú 0
=
úú1 2!
GetExternalResponse
úú3 F
(
úúF G
Conn
úúG K
.
úúK L
selfRoot
úúL T
+
úúU V
$str
úúW u
+
úúv w
idPlanejamentoúúx Ü
)úúÜ á
;úúá à
var
ùù 
conteudoAcao
ùù (
=
ùù) *!
GetExternalResponse
ùù+ >
(
ùù> ?
Conn
ùù? C
.
ùùC D
selfRoot
ùùD L
+
ùùM N
$str
ùùO e
+
ùùf g
idAcao
ùùh n
)
ùùn o
;
ùùo p
if
ûû 
(
ûû 
Conn
ûû  
.
ûû  !
visaoOperacional
ûû! 1
)
ûû1 2
todoConteudo
üü (
=
üü) *
conteudoAcao
üü+ 7
.
üü7 8
Result
üü8 >
;
üü> ?
else
†† 
todoConteudo
°° (
=
°°) *"
conteudoPlanejamento
°°+ ?
.
°°? @
Result
°°@ F
+
°°G H
conteudoAcao
°°I U
.
°°U V
Result
°°V \
;
°°\ ]
}
¢¢ 
else
££ 
{
§§ 
var
•• $
conteudoAcompanhamento
•• 2
=
••3 4!
GetExternalResponse
••5 H
(
••H I
Conn
••I M
.
••M N
selfRoot
••N V
+
••W X
$str
••Y v
+
••w x
idAcao
••y 
)•• Ä
;••Ä Å
todoConteudo
¶¶ $
=
¶¶% &$
conteudoAcompanhamento
¶¶' =
.
¶¶= >
Result
¶¶> D
;
¶¶D E
}
ßß 
if
®® 
(
®® 
string
®® 
.
®® 
IsNullOrEmpty
®® ,
(
®®, -
emailTo
®®- 4
)
®®4 5
)
®®5 6
{
©© 
emailTo
™™ 
=
™™  !
$str
™™" >
;
™™> ?
title
´´ 
+=
´´  
$str
´´! <
+
´´= >
paUser
´´? E
.
´´E F
Name
´´F J
;
´´J K
}
¨¨ 

CreateMail
ÆÆ 
(
ÆÆ 
idPlanejamento
ÆÆ -
,
ÆÆ- .
idAcao
ÆÆ/ 5
,
ÆÆ5 6
emailTo
ÆÆ7 >
,
ÆÆ> ?
title
ÆÆ@ E
,
ÆÆE F
todoConteudo
ÆÆG S
)
ÆÆS T
;
ÆÆT U
}
ØØ 
}
∞∞ 	
	protected
≤≤ 
void
≤≤ 

CreateMail
≤≤ !
(
≤≤! "
int
≤≤" %
idPlanejamento
≤≤& 4
,
≤≤4 5
int
≤≤6 9
idAcao
≤≤: @
,
≤≤@ A
string
≤≤B H
emailTo
≤≤I P
,
≤≤P Q
string
≤≤R X
title
≤≤Y ^
,
≤≤^ _
string
≤≤` f
body
≤≤g k
)
≤≤k l
{
≥≥ 	
if
¥¥ 
(
¥¥ 
string
¥¥ 
.
¥¥ 
IsNullOrEmpty
¥¥ $
(
¥¥$ %
emailTo
¥¥% ,
)
¥¥, -
)
¥¥- .
{
µµ 
emailTo
∂∂ 
=
∂∂ 
$str
∂∂ 6
;
∂∂6 7
title
∑∑ 
+=
∑∑ 
$str
∑∑ 4
;
∑∑4 5
}
∏∏ 
var
ππ 
email
ππ 
=
ππ 
new
ππ 
PlanoAcaoEF
ππ '
.
ππ' (
EmailContent
ππ( 4
(
ππ4 5
)
ππ5 6
{
∫∫ 

IsBodyHtml
ªª 
=
ªª 
true
ªª !
,
ªª! "
AddDate
ºº 
=
ºº 
DateTime
ºº "
.
ºº" #
Now
ºº# &
,
ºº& '
Subject
ΩΩ 
=
ΩΩ 
title
ΩΩ 
,
ΩΩ  
Project
ææ 
=
ææ 
$str
ææ )
,
ææ) *
Body
øø 
=
øø 
body
øø 
,
øø 
To
¿¿ 
=
¿¿ 
emailTo
¿¿ 
,
¿¿ 
}
¡¡ 
;
¡¡ 
PaAsyncServices
¬¬ 
.
¬¬ 
SendMailPATeste
¬¬ +
(
¬¬+ ,
email
¬¬, 1
)
¬¬1 2
;
¬¬2 3
}
√√ 	
	protected
ÀÀ 
void
ÀÀ !
GetParamsPeloFiltro
ÀÀ *
(
ÀÀ* +
JObject
ÀÀ+ 2
filtro
ÀÀ3 9
,
ÀÀ9 :
out
ÀÀ; >
string
ÀÀ? E
dtInit
ÀÀF L
,
ÀÀL M
out
ÀÀN Q
string
ÀÀR X
dtFim
ÀÀY ^
)
ÀÀ^ _
{
ÃÃ 	
dynamic
ÕÕ 
	filtroObj
ÕÕ 
=
ÕÕ 
filtro
ÕÕ  &
;
ÕÕ& '
string
ŒŒ 
	startDate
ŒŒ 
=
ŒŒ 
	filtroObj
ŒŒ (
.
ŒŒ( )
	startDate
ŒŒ) 2
;
ŒŒ2 3
string
œœ 
endDate
œœ 
=
œœ 
	filtroObj
œœ &
.
œœ& '
endDate
œœ' .
;
œœ. /
dtInit
–– 
=
–– 
Guard
–– 
.
–– 
ParseDateToSqlV2
–– +
(
––+ ,
	startDate
––, 5
,
––5 6
Guard
––7 <
.
––< =
CultureCurrent
––= K
.
––K L
BR
––L N
)
––N O
.
––O P
ToString
––P X
(
––X Y
$str
––Y n
)
––n o
;
––o p
dtFim
—— 
=
—— 
Guard
—— 
.
—— 
ParseDateToSqlV2
—— *
(
——* +
endDate
——+ 2
,
——2 3
Guard
——4 9
.
——9 :
CultureCurrent
——: H
.
——H I
BR
——I K
)
——K L
.
——L M
ToString
——M U
(
——U V
$str
——V k
)
——k l
;
——l m
}
““ 	
}
‘‘ 
}’’ •
aC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\Api\GenericsController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
.$ %
Api% (
{ 
[ 
RoutePrefix 
( 
$str 
)  
]  !
public 

class 
GenericsController #
:$ %
ApiController& 3
{ 
[		 	
HttpGet			 
]		 
[

 	
Route

	 
(

 
$str

 1
)

1 2
]

2 3
public 
int 
Save 
( 
string 
val "
," #
string$ *
param+ 0
,0 1
int2 5
?5 6
predecessor7 B
=C D
$numE F
)F G
{ 	
var 
retorno 
= 
$num 
; 
var 
table 
= 
string 
. 
Empty $
;$ %
string 
fk 
= 
string 
. 
Empty $
;$ %
switch 
( 
param 
) 
{ 
case 
$str "
:" #
table 
= 
$str ,
;, -
break 
; 
case 
$str 
:  
table 
= 
$str )
;) *
fk 
= 
$str )
;) *
break 
; 
case 
$str "
:" #
table 
= 
$str ,
;, -
break 
; 
case 
$str (
:( )
table 
= 
$str .
;. /
fk   
=   
$str   5
;  5 6
break!! 
;!! 
case"" 
$str"" +
:""+ ,
table## 
=## 
$str## 5
;##5 6
fk$$ 
=$$ 
$str$$ +
;$$+ ,
break%% 
;%% 
case&& 
$str&& *
:&&* +
table'' 
='' 
$str'' 4
;''4 5
fk(( 
=(( 
$str(( )
;(() *
break)) 
;)) 
case** 
$str** !
:**! "
table++ 
=++ 
$str++ +
;+++ ,
break,, 
;,, 
default-- 
:-- 
break.. 
;.. 
}// 
if11 
(11 
predecessor11 
>11 
$num11 
)11 
retorno22 
=22 
Pa_BaseObject22 '
.22' (
GenericInsert22( 5
(225 6
val226 9
,229 :
table22; @
,22@ A
predecessor22B M
.22M N
GetValueOrDefault22N _
(22_ `
)22` a
,22a b
fk22c e
)22e f
;22f g
else33 
retorno44 
=44 
Pa_BaseObject44 '
.44' (
GenericInsert44( 5
(445 6
val446 9
,449 :
table44; @
)44@ A
;44A B
return66 
retorno66 
;66 
}88 	
}99 
}<< ¶≠
fC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\Api\ApiRelatoriosController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
.$ %
Api% (
{ 
[ 
RoutePrefix 
( 
$str !
)! "
]" #
public 

class #
ApiRelatoriosController (
:) *
BaseApiController+ <
{ 
private 
PlanoAcaoEF 
. 
PlanoDeAcaoEntities /
db0 2
;2 3
public #
ApiRelatoriosController &
(& '
)' (
{ 	
db 
= 
new 
PlanoAcaoEF  
.  !
PlanoDeAcaoEntities! 4
(4 5
)5 6
;6 7
db 
. 
Configuration 
. 
LazyLoadingEnabled /
=0 1
false2 7
;7 8
db 
. 
Configuration 
. $
AutoDetectChangesEnabled 5
=6 7
false8 =
;= >
UpdateStatus 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
[ 	
Route	 
( 
$str 
) 
] 
public 
List 
< 
JObject 
> 

GetGrafico '
(' (
JObject( /
filtro0 6
)6 7
{ 	
string   
dtInit   
;   
string!! 
dtFim!! 
;!! 
GetParamsPeloFiltro"" 
(""  
filtro""  &
,""& '
out""( +
dtInit"", 2
,""2 3
out""4 7
dtFim""8 =
)""= >
;""> ?
var$$ 
query$$ 
=$$ 
$str$$ )
+$$* +
$str%% :
+%%; <
$str&& 4
+&&5 6
$str'' #
+''$ %
$str(( K
;((K L
if** 
(** 
!** 
Conn** 
.** 
visaoOperacional** &
)**& '
{++ 
query,, 
+=,, 
$str	,, â
+
,,ä ã
$str-- f
+--g h
$str.. ]
+..^ _
$str// I
+//J K
$str00 i
+00j k
$str11 g
+11h i
$str22 R
+22S T
$str33 O
+33P Q
$str44 M
+44N O
$str55 U
+55V W
$str66 R
+66R S
$str77 S
+77T U
$str88 V
+88W X
$str99 ^
+99_ `
$str:: O
;::O P
};; 
query== 
+=== 
$str== .
+==/ 0
$str>> @
+>>A B
$str?? A
+??B C
$str@@ q
+@@r s
$strAA [
+AA\ ]
$strBB U
+BBV W
$strCC C
+CCD E
$strDD \
+DD] ^
$strEE h
+EEi j
$strFF p
+FFq r
$strGG Z
+GG[ \
$strHH Z
+HH[ \
$strII V
+IIW X
$strJJ O
+JJP Q
$strKK W
+KKX Y
$strLL .
+LL/ 0
dtInitLL1 7
+LL8 9
$strLL: D
+LLE F
dtFimLLG L
+LLM N
$strLLO S
;LLS T
varNN 
resultsNN 
=NN 

QueryNinjaNN $
(NN$ %
dbNN% '
,NN' (
queryNN) .
)NN. /
;NN/ 0
returnPP 
resultsPP 
;PP 
}QQ 	
[SS 	
HttpPostSS	 
]SS 
[TT 	
RouteTT	 
(TT 
$strTT 
)TT 
]TT 
publicUU 
ListUU 
<UU 
JObjectUU 
>UU 

GraficoPieUU '
(UU' (
JObjectUU( /
filtroUU0 6
)UU6 7
{VV 	
stringWW 
dtInitWW 
;WW 
stringXX 
dtFimXX 
;XX 
GetParamsPeloFiltroYY 
(YY  
filtroYY  &
,YY& '
outYY( +
dtInitYY, 2
,YY2 3
outYY4 7
dtFimYY8 =
)YY= >
;YY> ?
var[[ 
query[[ 
=[[ 
$str[[ A
+[[B C
$str\\ [
+\\\ ]
$str]] :
+]]; <
dtInit]]= C
+]]D E
$str]]F P
+]]Q R
dtFim]]S X
+]]Y Z
$str]][ _
+]]` a
$str^^ 2
;^^2 3
dynamic__ 
	resultPie__ 
=__ 

QueryNinja__  *
(__* +
db__+ -
,__- .
query__/ 4
)__4 5
;__5 6
returnaa 
	resultPieaa 
;aa 
}bb 	
[dd 	
HttpPostdd	 
]dd 
[ee 	
Routeee	 
(ee 
$stree +
)ee+ ,
]ee, -
publicff 
Listff 
<ff 
JObjectff 
>ff &
NumeroDeAcoesEstabelecidasff 7
(ff7 8
JObjectff8 ?
formff@ D
)ffD E
{gg 	
dynamichh 
testehh 
=hh 
formhh  
;hh  !
varjj 
queryjj 
=jj 
$strjj j
+jjk l
$strll ,
+ll- .
DateTimell/ 7
.ll7 8
Nowll8 ;
.ll; <
	AddMonthsll< E
(llE F
-llF G
$numllG H
)llH I
.llI J
ToStringllJ R
(llR S
$strllS h
)llh i
+llj k
$strlll o
+llp q
$strmm 8
;mm8 9
varoo 
itemsoo 
=oo 

QueryNinjaoo "
(oo" #
dboo# %
,oo% &
queryoo' ,
)oo, -
;oo- .
returnqq 
itemsqq 
;qq 
}rr 	
[tt 	
HttpPosttt	 
]tt 
[uu 	
Routeuu	 
(uu 
$struu (
)uu( )
]uu) *
publicvv 
Listvv 
<vv 
JObjectvv 
>vv #
NumeroDeAcoesConcluidasvv 4
(vv4 5
JObjectvv5 <
formvv= A
)vvA B
{ww 	
dynamicxx 
testexx 
=xx 
formxx  
;xx  !
varzz 
queryzz 
=zz 
$strzz B
+zzC D
$str{{ -
+{{. /
$str|| %
+||& '
$str}} -
+}}. /
$str~~ *
+~~+ ,
DateTime~~- 5
.~~5 6
Now~~6 9
.~~9 :
	AddMonths~~: C
(~~C D
-~~D E
$num~~E F
)~~F G
.~~G H
ToString~~H P
(~~P Q
$str~~Q f
)~~f g
+~~h i
$str~~j m
+~~n o
$str 8
;8 9
var
ÅÅ 
items
ÅÅ 
=
ÅÅ 

QueryNinja
ÅÅ "
(
ÅÅ" #
db
ÅÅ# %
,
ÅÅ% &
query
ÅÅ' ,
)
ÅÅ, -
;
ÅÅ- .
return
ÉÉ 
items
ÉÉ 
;
ÉÉ 
}
ÑÑ 	
[
ÜÜ 	
HttpPost
ÜÜ	 
]
ÜÜ 
[
áá 	
Route
áá	 
(
áá 
$str
áá 
)
áá 
]
áá  
public
àà 
List
àà 
<
àà 
JObject
àà 
>
àà 
NumeroDeAcoes
àà *
(
àà* +
JObject
àà+ 2
form
àà3 7
)
àà7 8
{
ââ 	
dynamic
ää 
teste
ää 
=
ää 
form
ää  
;
ää  !
var
åå 
query
åå 
=
åå 
$stråå ¥
+ååµ ∂
$str
çç !
+
çç" #
$stréé ©
+éé™ ´
$strèè §
+èè• ¶
$str
êê 2
+
êê3 4
DateTime
êê5 =
.
êê= >
Now
êê> A
.
êêA B
	AddMonths
êêB K
(
êêK L
-
êêL M
$num
êêM N
)
êêN O
.
êêO P
ToString
êêP X
(
êêX Y
$str
êêY n
)
êên o
+
êêp q
$str
êêr u
+
êêv w
$str
ëë e
;
ëëe f
var
ìì 
items
ìì 
=
ìì 

QueryNinja
ìì "
(
ìì" #
db
ìì# %
,
ìì% &
query
ìì' ,
)
ìì, -
;
ìì- .
return
ïï 
items
ïï 
;
ïï 
}
ññ 	
[
òò 	
HttpPost
òò	 
]
òò 
[
ôô 	
Route
ôô	 
(
ôô 
$str
ôô $
)
ôô$ %
]
ôô% &
public
öö 
List
öö 
<
öö 
JObject
öö 
>
öö !
EvolucaoDoResultado
öö 0
(
öö0 1
JObject
öö1 8
form
öö9 =
)
öö= >
{
õõ 	
dynamic
úú 
teste
úú 
=
úú 
form
úú  
;
úú  !
var
ûû 
query
ûû 
=
ûû 
$strûû ¿
+ûû¡ ¬
$str
üü !
+
üü" #
$str†† ©
+††™ ´
$str°° §
+°°• ¶
$str
¢¢ 3
+
¢¢4 5
DateTime
¢¢6 >
.
¢¢> ?
Now
¢¢? B
.
¢¢B C
	AddMonths
¢¢C L
(
¢¢L M
-
¢¢M N
$num
¢¢N O
)
¢¢O P
.
¢¢P Q
ToString
¢¢Q Y
(
¢¢Y Z
$str
¢¢Z o
)
¢¢o p
+
¢¢q r
$str
¢¢s v
+
¢¢w x
$str
££ i
;
££i j
var
•• 
items
•• 
=
•• 

QueryNinja
•• "
(
••" #
db
••# %
,
••% &
query
••' ,
)
••, -
;
••- .
return
ßß 
items
ßß 
;
ßß 
}
®® 	
[
™™ 	
HttpPost
™™	 
]
™™ 
[
´´ 	
Route
´´	 
(
´´ 
$str
´´ 
)
´´ 
]
´´  
public
¨¨ 
List
¨¨ 
<
¨¨ 
JObject
¨¨ 
>
¨¨ 
GetGraficoSgq
¨¨ *
(
¨¨* +
JObject
¨¨+ 2
filtro
¨¨3 9
)
¨¨9 :
{
≠≠ 	
string
ÆÆ 
dtInit
ÆÆ 
;
ÆÆ 
string
ØØ 
dtFim
ØØ 
;
ØØ !
GetParamsPeloFiltro
∞∞ 
(
∞∞  
filtro
∞∞  &
,
∞∞& '
out
∞∞( +
dtInit
∞∞, 2
,
∞∞2 3
out
∞∞4 7
dtFim
∞∞8 =
)
∞∞= >
;
∞∞> ?
var
≤≤ 
query
≤≤ 
=
≤≤ 
$str
≤≤ )
+
≤≤* +
$str
≥≥  
+
≥≥! "
$str
¥¥  
+
¥¥! "
$str
µµ  
+
µµ! "
$str
∂∂ ;
+
∂∂< =
$str
∑∑ 5
+
∑∑6 7
$str
∏∏ $
+
∏∏% &
$str
ππ L
;
ππL M
if
ªª 
(
ªª 
!
ªª 
Conn
ªª 
.
ªª 
visaoOperacional
ªª &
)
ªª& '
{
ºº 
query
ΩΩ 
+=
ΩΩ 
$strΩΩ â
+ΩΩä ã
$str
ææ f
+
ææg h
$str
øø ]
+
øø^ _
$str
¿¿ I
+
¿¿J K
$str
¡¡ i
+
¡¡j k
$str
¬¬ g
+
¬¬h i
$str
√√ R
+
√√S T
$str
ƒƒ O
+
ƒƒP Q
$str
≈≈ M
+
≈≈N O
$str
∆∆ S
;
∆∆S T
}
«« 
query
…… 
+=
…… 
$str
…… .
+
……/ 0
$str
   @
+
  A B
$str
ÀÀ A
+
ÀÀB C
$str
ÃÃ q
+
ÃÃr s
$str
ÕÕ [
+
ÕÕ\ ]
$str
ŒŒ U
+
ŒŒV W
$str
œœ C
+
œœD E
$str
–– \
+
––] ^
$str
—— h
+
——i j
$str
““ p
+
““q r
$str
”” Z
+
””[ \
$str
‘‘ Z
+
‘‘[ \
$str
’’ V
+
’’W X
$str
÷÷ O
+
÷÷P Q
$str
◊◊ W
+
◊◊X Y
$str
ÿÿ .
+
ÿÿ/ 0
dtInit
ÿÿ1 7
+
ÿÿ8 9
$str
ÿÿ: D
+
ÿÿE F
dtFim
ÿÿG L
+
ÿÿM N
$str
ÿÿO n
;
ÿÿn o
var
€€ 
results
€€ 
=
€€ 

QueryNinja
€€ $
(
€€$ %
db
€€% '
,
€€' (
query
€€) .
)
€€. /
;
€€/ 0
if
ﬂﬂ 
(
ﬂﬂ 
results
ﬂﬂ 
.
ﬂﬂ 
Count
ﬂﬂ 
>
ﬂﬂ 
$num
ﬂﬂ  !
)
ﬂﬂ! "
{
‡‡ 
var
·· 
parLevel1Ids
··  
=
··! "
results
··# *
.
··* +
Select
··+ 1
(
··1 2
r
··2 3
=>
··4 6
r
··7 8
.
··8 9
GetValue
··9 A
(
··A B
$str
··B L
)
··L M
.
··M N
ToString
··N V
(
··V W
)
··W X
)
··X Y
.
··Y Z
Distinct
··Z b
(
··b c
)
··c d
.
··d e
ToList
··e k
(
··k l
)
··l m
;
··m n
var
‚‚ 
parLevel2Ids
‚‚  
=
‚‚! "
results
‚‚# *
.
‚‚* +
Select
‚‚+ 1
(
‚‚1 2
r
‚‚2 3
=>
‚‚4 6
r
‚‚7 8
.
‚‚8 9
GetValue
‚‚9 A
(
‚‚A B
$str
‚‚B L
)
‚‚L M
.
‚‚M N
ToString
‚‚N V
(
‚‚V W
)
‚‚W X
)
‚‚X Y
.
‚‚Y Z
Distinct
‚‚Z b
(
‚‚b c
)
‚‚c d
.
‚‚d e
ToList
‚‚e k
(
‚‚k l
)
‚‚l m
;
‚‚m n
var
„„ 
parLevel3Ids
„„  
=
„„! "
results
„„# *
.
„„* +
Select
„„+ 1
(
„„1 2
r
„„2 3
=>
„„4 6
r
„„7 8
.
„„8 9
GetValue
„„9 A
(
„„A B
$str
„„B L
)
„„L M
.
„„M N
ToString
„„N V
(
„„V W
)
„„W X
)
„„X Y
.
„„Y Z
Distinct
„„Z b
(
„„b c
)
„„c d
.
„„d e
ToList
„„e k
(
„„k l
)
„„l m
;
„„m n
var
‰‰ 
	level1ids
‰‰ 
=
‰‰ 
String
‰‰  &
.
‰‰& '
Join
‰‰' +
(
‰‰+ ,
$str
‰‰, 0
,
‰‰0 1
parLevel1Ids
‰‰2 >
.
‰‰> ?
ToArray
‰‰? F
(
‰‰F G
)
‰‰G H
)
‰‰H I
;
‰‰I J
var
ÂÂ 
	level2ids
ÂÂ 
=
ÂÂ 
String
ÂÂ  &
.
ÂÂ& '
Join
ÂÂ' +
(
ÂÂ+ ,
$str
ÂÂ, 0
,
ÂÂ0 1
parLevel2Ids
ÂÂ2 >
.
ÂÂ> ?
ToArray
ÂÂ? F
(
ÂÂF G
)
ÂÂG H
)
ÂÂH I
;
ÂÂI J
var
ÊÊ 
	level3ids
ÊÊ 
=
ÊÊ 
String
ÊÊ  &
.
ÊÊ& '
Join
ÊÊ' +
(
ÊÊ+ ,
$str
ÊÊ, 0
,
ÊÊ0 1
parLevel3Ids
ÊÊ2 >
.
ÊÊ> ?
ToArray
ÊÊ? F
(
ÊÊF G
)
ÊÊG H
)
ÊÊH I
;
ÊÊI J
var
ÒÒ 
level1
ÒÒ 
=
ÒÒ !
QueryNinjaPeloDbSgq
ÒÒ 0
(
ÒÒ0 1
$str
ÒÒ1 ^
+
ÒÒ_ `
	level1ids
ÒÒa j
+
ÒÒk l
$str
ÒÒm p
)
ÒÒp q
;
ÒÒq r
var
ÚÚ 
level2
ÚÚ 
=
ÚÚ !
QueryNinjaPeloDbSgq
ÚÚ 0
(
ÚÚ0 1
$str
ÚÚ1 ^
+
ÚÚ_ `
	level2ids
ÚÚa j
+
ÚÚk l
$str
ÚÚm p
)
ÚÚp q
;
ÚÚq r
var
ÛÛ 
level3
ÛÛ 
=
ÛÛ !
QueryNinjaPeloDbSgq
ÛÛ 0
(
ÛÛ0 1
$str
ÛÛ1 ^
+
ÛÛ_ `
	level3ids
ÛÛa j
+
ÛÛk l
$str
ÛÛm p
)
ÛÛp q
;
ÛÛq r
foreach
ıı 
(
ıı 
var
ıı 
i
ıı 
in
ıı !
results
ıı" )
)
ıı) *
{
ˆˆ 
i
˜˜ 
[
˜˜ 
$str
˜˜ !
]
˜˜! "
=
˜˜# $
level1
˜˜% +
.
˜˜+ ,
FirstOrDefault
˜˜, :
(
˜˜: ;
r
˜˜; <
=>
˜˜= ?
i
˜˜@ A
.
˜˜A B
GetValue
˜˜B J
(
˜˜J K
$str
˜˜K U
)
˜˜U V
.
˜˜V W
Equals
˜˜W ]
(
˜˜] ^
r
˜˜^ _
.
˜˜_ `
GetValue
˜˜` h
(
˜˜h i
$str
˜˜i m
)
˜˜m n
)
˜˜n o
)
˜˜o p
.
˜˜p q
GetValue
˜˜q y
(
˜˜y z
$str˜˜z Ä
)˜˜Ä Å
;˜˜Å Ç
i
¯¯ 
[
¯¯ 
$str
¯¯ %
]
¯¯% &
=
¯¯' (
level2
¯¯) /
.
¯¯/ 0
FirstOrDefault
¯¯0 >
(
¯¯> ?
r
¯¯? @
=>
¯¯A C
i
¯¯D E
.
¯¯E F
GetValue
¯¯F N
(
¯¯N O
$str
¯¯O Y
)
¯¯Y Z
.
¯¯Z [
Equals
¯¯[ a
(
¯¯a b
r
¯¯b c
.
¯¯c d
GetValue
¯¯d l
(
¯¯l m
$str
¯¯m q
)
¯¯q r
)
¯¯r s
)
¯¯s t
.
¯¯t u
GetValue
¯¯u }
(
¯¯} ~
$str¯¯~ Ñ
)¯¯Ñ Ö
;¯¯Ö Ü
i
˘˘ 
[
˘˘ 
$str
˘˘ 
]
˘˘ 
=
˘˘  !
level3
˘˘" (
.
˘˘( )
FirstOrDefault
˘˘) 7
(
˘˘7 8
r
˘˘8 9
=>
˘˘: <
i
˘˘= >
.
˘˘> ?
GetValue
˘˘? G
(
˘˘G H
$str
˘˘H R
)
˘˘R S
.
˘˘S T
Equals
˘˘T Z
(
˘˘Z [
r
˘˘[ \
.
˘˘\ ]
GetValue
˘˘] e
(
˘˘e f
$str
˘˘f j
)
˘˘j k
)
˘˘k l
)
˘˘l m
.
˘˘m n
GetValue
˘˘n v
(
˘˘v w
$str
˘˘w }
)
˘˘} ~
;
˘˘~ 
}
˙˙ 
}
˚˚ 
return
˝˝ 
results
˝˝ 
;
˝˝ 
}
˛˛ 	
[
ÄÄ 	
HttpPost
ÄÄ	 
]
ÄÄ 
[
ÅÅ 	
Route
ÅÅ	 
(
ÅÅ 
$str
ÅÅ %
)
ÅÅ% &
]
ÅÅ& '
public
ÇÇ 
List
ÇÇ 
<
ÇÇ 
JObject
ÇÇ 
>
ÇÇ "
GetPessoasEnvolvidas
ÇÇ 1
(
ÇÇ1 2
JObject
ÇÇ2 9
filtro
ÇÇ: @
)
ÇÇ@ A
{
ÉÉ 	
string
ÑÑ 
dtInit
ÑÑ 
;
ÑÑ 
string
ÖÖ 
dtFim
ÖÖ 
;
ÖÖ !
GetParamsPeloFiltro
ÜÜ 
(
ÜÜ  
filtro
ÜÜ  &
,
ÜÜ& '
out
ÜÜ( +
dtInit
ÜÜ, 2
,
ÜÜ2 3
out
ÜÜ4 7
dtFim
ÜÜ8 =
)
ÜÜ= >
;
ÜÜ> ?
var
àà 
query
àà 
=
àà 
$str
àà  
+
àà  !
$str
ââ L
+
ââL M
$str
ää %
+
ää% &
$str
ãã '
+
ãã' (
$str
åå $
+
åå$ %
$str
çç ?
+
çç? @
$str
éé @
+
éé@ A
$str
èè p
+
èèp q
$str
êê Z
+
êêZ [
$str
ëë T
+
ëëT U
$str
íí B
+
ííB C
$str
ìì [
+
ìì[ \
$str
îî g
+
îîg h
$str
ïï o
+
ïïo p
$str
ññ Y
+
ññY Z
$str
óó Y
+
óóY Z
$str
òò U
+
òòU V
$str
ôô N
+
ôôN O
$str
öö V
+
ööV W
$str
õõ /
+
õõ0 1
dtInit
õõ2 8
+
õõ9 :
$str
õõ; E
+
õõF G
dtFim
õõH M
+
õõN O
$str
õõP T
+
õõT U
$str
úú O
;
úúO P
var
ûû 
results
ûû 
=
ûû 

QueryNinja
ûû $
(
ûû$ %
db
ûû% '
,
ûû' (
query
ûû) .
)
ûû. /
;
ûû/ 0
return
†† 
results
†† 
;
†† 
}
°° 	
[
££ 	
HttpGet
££	 
]
££ 
[
§§ 	
Route
§§	 
(
§§ 
$str
§§ 
)
§§ 
]
§§ 
public
•• 
List
•• 
<
•• 
JObject
•• 
>
•• 
getUnits
•• %
(
••% &
)
••& '
{
¶¶ 	
var
ßß 
query
ßß 
=
ßß 
$str
ßß 2
;
ßß2 3
var
®® 
items
®® 
=
®® 

QueryNinja
®® "
(
®®" #
db
®®# %
,
®®% &
query
®®' ,
)
®®, -
;
®®- .
return
™™ 
items
™™ 
;
™™ 
}
´´ 	
[
≠≠ 	
HttpGet
≠≠	 
]
≠≠ 
[
ÆÆ 	
Route
ÆÆ	 
(
ÆÆ 
$str
ÆÆ 
)
ÆÆ  
]
ÆÆ  !
public
ØØ 
List
ØØ 
<
ØØ 
	ParLevel1
ØØ 
>
ØØ 
getIndicadores
ØØ -
(
ØØ- .
)
ØØ. /
{
∞∞ 	
var
±± 
items
±± 
=
±± 
new
±± 
List
±±  
<
±±  !
	ParLevel1
±±! *
>
±±* +
(
±±+ ,
)
±±, -
;
±±- .
using
≤≤ 
(
≤≤ 
var
≤≤ 
db
≤≤ 
=
≤≤ 
new
≤≤ 
SgqDbDevEntities
≤≤  0
(
≤≤0 1
)
≤≤1 2
)
≤≤2 3
{
≥≥ 
items
¥¥ 
=
¥¥ 
db
¥¥ 
.
¥¥ 
	ParLevel1
¥¥ $
.
¥¥$ %
ToList
¥¥% +
(
¥¥+ ,
)
¥¥, -
;
¥¥- .
}
µµ 
return
∏∏ 
items
∏∏ 
;
∏∏ 
}
ππ 	
}
∫∫ 
}ªª Õ
dC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\Api\OperacionalController.cs
	namespace		 	
PlanoDeAcaoMVC		
 
.		 
Controllers		 $
.		$ %
Api		% (
{

 
public 

class !
OperacionalController &
:' (
ApiController) 6
{ 
public 
static 
int 
HttpPost "
{# $
get% (
;( )
private* 1
set2 5
;5 6
}7 8
}!! 
}"" ∂
YC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\HomeController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
{ 
[ 

IntegraSgq 
] 
public 

class 
HomeController 
:  !

Controller" ,
{		 
public

 
HomeController

 
(

 
)

 
{ 	
UpdateStatus 
( 
) 
; 
} 	
	protected 
void 
UpdateStatus #
(# $
)$ %
{ 	
using 
( 
var 
dbPa 
= 
new !
PlanoAcaoEF" -
.- .
PlanoDeAcaoEntities. A
(A B
)B C
)C D
{ 
dbPa 
. 
Database 
. 
ExecuteSqlCommand /
(/ 0
$str	0 ∆
)
∆ «
;
« »
} 
} 	
public 
ActionResult 
Index !
(! "
)" #
{ 	
ViewBag 
. 
Title 
= 
$str '
;' (
return 
View 
( 
) 
; 
} 	
public 
ActionResult 
LogOut "
(" #
)# $
{ 	
ExpireCookie   
(   
)   
;   
return!! 
View!! 
(!! 
$str!! 
)!!  
;!!  !
}"" 	
	protected$$ 
void$$ 
ExpireCookie$$ #
($$# $
)$$$ %
{%% 	

HttpCookie&& 
currentUserCookie&& (
=&&) *
Request&&+ 2
.&&2 3
Cookies&&3 :
[&&: ;
$str&&; M
]&&M N
;&&N O
if'' 
('' 
currentUserCookie'' !
!=''" $
null''% )
)'') *
{(( 
Response)) 
.)) 
Cookies))  
.))  !
Remove))! '
())' (
$str))( :
))): ;
;)); <
Response** 
.** 
Cookies**  
.**  !
Remove**! '
(**' (
$str**( 2
)**2 3
;**3 4
currentUserCookie,, !
.,,! "
Expires,," )
=,,* +
DateTime,,, 4
.,,4 5
Now,,5 8
.,,8 9
AddDays,,9 @
(,,@ A
-,,A B
$num,,B D
),,D E
;,,E F
currentUserCookie-- !
.--! "
Value--" '
=--( )
null--* .
;--. /
Response.. 
... 
	SetCookie.. "
(.." #
currentUserCookie..# 4
)..4 5
;..5 6
}// 
}11 	
}33 
}44 ¬
gC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\PaPlanejamentoAcaoController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
{ 
public 

class (
PaPlanejamentoAcaoController -
:. /

Controller0 :
{ 
public 
ActionResult 
Index !
(! "
)" #
{		 	
return

 
View

 
(

 
)

 
;

 
} 	
} 
} Ó 
\C:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\Pa_AcaoController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
{ 
[ 

IntegraSgq 
] 
public 

class 
Pa_AcaoController "
:# $

Controller% /
{ 
PlanoAcaoEF 
. 
PlanoDeAcaoEntities '
db( *
;* +
public 
Pa_AcaoController  
(  !
)! "
{ 	
db 
= 
new 
PlanoAcaoEF  
.  !
PlanoDeAcaoEntities! 4
(4 5
)5 6
;6 7
if 
( 
ViewBag 
. 
Unidade 
==  "
null# '
)' (
ViewBag 
. 
Unidade 
=  !

Pa_Unidade" ,
., -
Listar- 3
(3 4
)4 5
;5 6
if!! 
(!! 
ViewBag!! 
.!! 
Quem!! 
==!! 
null!!  $
)!!$ %
ViewBag"" 
."" 
Quem"" 
="" 
Pa_Quem"" &
.""& '
Listar""' -
(""- .
)"". /
;""/ 0
ViewBag$$ 
.$$ 
Departamento$$  
=$$! "
Pa_Departamento$$# 2
.$$2 3
Listar$$3 9
($$9 :
)$$: ;
;$$; <
ViewBag%% 
.%% 
CausaGenerica%% !
=%%" #
Pa_CausaGenerica%%$ 4
.%%4 5
Listar%%5 ;
(%%; <
)%%< =
;%%= >
ViewBag&& 
.&& 

GrupoCausa&& 
=&&  
Pa_GrupoCausa&&! .
.&&. /
Listar&&/ 5
(&&5 6
)&&6 7
;&&7 8
ViewBag'' 
.''  
ContramedidaGenerica'' (
='') *#
Pa_ContramedidaGenerica''+ B
.''B C
Listar''C I
(''I J
)''J K
;''K L
ViewBag(( 
.(( 
Predecessora((  
=((! "
Pa_Planejamento((# 2
.((2 3
Listar((3 9
(((9 :
)((: ;
;((; <
ViewBag)) 
.)) 
Status)) 
=)) 
	Pa_Status)) &
.))& '
Listar))' -
())- .
))). /
;))/ 0
ViewBag** 
.** 
Pa_IndicadorSgqAcao** '
=**( )
Pa_IndicadorSgqAcao*** =
.**= >
Listar**> D
(**D E
)**E F
;**F G
ViewBag++ 
.++ 
Pa_Problema_Desvio++ &
=++' (
Pa_Problema_Desvio++) ;
.++; <
Listar++< B
(++B C
)++C D
;++D E
},, 	
public44 
ActionResult44 
Index44 !
(44! "
)44" #
{55 	
return77 
PartialView77 
(77 
)77  
;77  !
}88 	
public?? 
ActionResult?? 
Edit??  
(??  !
int??! $
id??% '
)??' (
{@@ 	
varAA 
objAA 
=AA 
Pa_AcaoAA 
.AA 
GetAA !
(AA! "
idAA" $
)AA$ %
;AA% &
returnCC 
PartialViewCC 
(CC 
$strCC %
,CC% &
objCC' *
)CC* +
;CC+ ,
}DD 	
[KK 	
HttpGetKK	 
]KK 
publicLL 
ActionResultLL 
DetailsLL #
(LL# $
intLL$ '
idLL( *
)LL* +
{MM 	
varNN 
objNN 
=NN 
Pa_AcaoNN 
.NN 
GetNN !
(NN! "
idNN" $
)NN$ %
;NN% &
returnOO 
PartialViewOO 
(OO 
$strOO (
,OO( )
objOO* -
)OO- .
;OO. /
}PP 	
publicWW 
ActionResultWW 
GETGrupoCausaWW )
(WW) *
intWW* -
idWW. 0
)WW0 1
{XX 	
ifYY 
(YY 
idYY 
>YY 
$numYY 
)YY 
ViewBagZZ 
.ZZ 
DisabledZZ  
=ZZ! "
$strZZ# *
;ZZ* +
else[[ 
ViewBag\\ 
.\\ 
Disabled\\  
=\\! "
$str\\# )
;\\) *
ViewBag]] 
.]] 
DdlName]] 
=]] 
$str]] -
;]]- .
var__ 
results__ 
=__ 
Pa_GrupoCausa__ '
.__' (&
GrupoCausaPorCausaGenerica__( B
(__B C
id__C E
)__E F
;__F G
if`` 
(`` 
results`` 
==`` 
null`` 
)``  
resultsaa 
=aa 
newaa 
Listaa "
<aa" #
Pa_GrupoCausaaa# 0
>aa0 1
(aa1 2
)aa2 3
;aa3 4
ifcc 
(cc 
resultscc 
.cc 
Countcc 
==cc  
$numcc! "
)cc" #
ViewBagdd 
.dd 
Ddldd 
=dd 
newdd !

SelectListdd" ,
(dd, -
resultsdd- 4
,dd4 5
$strdd6 :
,dd: ;
$strdd< H
,ddH I
resultsddJ Q
.ddQ R
FirstOrDefaultddR `
(dd` a
)dda b
.ddb c
Idddc e
)dde f
;ddf g
elseee 
ViewBagff 
.ff 
Ddlff 
=ff 
newff !

SelectListff" ,
(ff, -
resultsff- 4
,ff4 5
$strff6 :
,ff: ;
$strff< H
)ffH I
;ffI J
returnhh 
PartialViewhh 
(hh 
$strhh -
)hh- .
;hh. /
}ii 	
publicpp 
ActionResultpp #
GETContramedidaGenericapp 3
(pp3 4
intpp4 7
idpp8 :
)pp: ;
{qq 	
ifrr 
(rr 
idrr 
>rr 
$numrr 
)rr 
ViewBagss 
.ss 
Disabledss  
=ss! "
truess# '
;ss' (
elsett 
ViewBaguu 
.uu 
Disableduu  
=uu! "
falseuu# (
;uu( )
ViewBagww 
.ww 
DdlNameww 
=ww 
$strww 7
;ww7 8
varyy 
resultsyy 
=yy #
Pa_ContramedidaGenericayy 1
.yy1 2-
!ContramedidaGenericaPorGrupoCausayy2 S
(yyS T
idyyT V
)yyV W
;yyW X
ifzz 
(zz 
resultszz 
==zz 
nullzz 
)zz  
results{{ 
={{ 
new{{ 
List{{ "
<{{" ##
Pa_ContramedidaGenerica{{# :
>{{: ;
({{; <
){{< =
;{{= >
if}} 
(}} 
results}} 
.}} 
Count}} 
==}}  
$num}}! "
)}}" #
ViewBag~~ 
.~~ 
Ddl~~ 
=~~ 
new~~ !

SelectList~~" ,
(~~, -
results~~- 4
,~~4 5
$str~~6 :
,~~: ;
$str~~< R
,~~R S
results~~T [
.~~[ \
FirstOrDefault~~\ j
(~~j k
)~~k l
.~~l m
Id~~m o
)~~o p
;~~p q
else 
ViewBag
ÄÄ 
.
ÄÄ 
Ddl
ÄÄ 
=
ÄÄ 
new
ÄÄ !

SelectList
ÄÄ" ,
(
ÄÄ, -
results
ÄÄ- 4
,
ÄÄ4 5
$str
ÄÄ6 :
,
ÄÄ: ;
$str
ÄÄ< R
)
ÄÄR S
;
ÄÄS T
return
ÇÇ 
PartialView
ÇÇ 
(
ÇÇ 
$str
ÇÇ -
)
ÇÇ- .
;
ÇÇ. /
}
ÉÉ 	
public
ää 
ActionResult
ää 
Acompanhamento
ää *
(
ää* +
int
ää+ .
id
ää/ 1
)
ää1 2
{
ãã 	
Pa_Acao
åå 
model
åå 
;
åå 
using
çç 
(
çç 
var
çç 
dbADO
çç 
=
çç 

ConexaoADO
çç )
(
çç) *
)
çç* +
)
çç+ ,
{
éé 
dynamic
èè 
obj2
èè 
=
èè 
dbADO
èè $
.
èè$ %
QueryNinjaADO
èè% 2
(
èè2 3
$str
èè3 V
+
èèW X
id
èèY [
)
èè[ \
.
èè\ ]
FirstOrDefault
èè] k
(
èèk l
)
èèl m
;
èèm n
int
êê 
quemId
êê 
=
êê 
obj2
êê !
.
êê! "
Quem_Id
êê" )
;
êê) *
var
ëë 
obj
ëë 
=
ëë 
db
ëë 
.
ëë 
Pa_Acao
ëë $
.
ëë$ %
FirstOrDefault
ëë% 3
(
ëë3 4
r
ëë4 5
=>
ëë6 8
r
ëë9 :
.
ëë: ;
Id
ëë; =
==
ëë> @
id
ëëA C
)
ëëC D
;
ëëD E
model
íí 
=
íí 
Mapper
íí 
.
íí 
Map
íí "
<
íí" #
Pa_Acao
íí# *
>
íí* +
(
íí+ ,
obj
íí, /
)
íí/ 0
;
íí0 1
model
ìì 
.
ìì 
Quem_Id
ìì 
=
ìì 
obj2
ìì  $
.
ìì$ %
Quem_Id
ìì% ,
;
ìì, -
if
îî 
(
îî 
quemId
îî 
>
îî 
$num
îî 
)
îî 
{
ïï 
dynamic
ññ 
quem
ññ  
=
ññ! "
dbADO
ññ# (
.
ññ( )
QueryNinjaADO
ññ) 6
(
ññ6 7
$str
ññ7 Z
+
ññ[ \
quemId
ññ] c
)
ññc d
.
ññd e
FirstOrDefault
ññe s
(
ññs t
)
ññt u
;
ññu v
model
óó 
.
óó 
_Quem
óó 
=
óó  !
quem
óó" &
.
óó& '
Name
óó' +
;
óó+ ,
}
òò 
}
ôô 
return
ùù 
PartialView
ùù 
(
ùù 
$str
ùù /
,
ùù/ 0
model
ùù1 6
)
ùù6 7
;
ùù7 8
}
ûû 	
	protected
†† 
Factory
†† 

ConexaoADO
†† $
(
††$ %
)
††% &
{
°° 	
return
¢¢ 
new
¢¢ 
Factory
¢¢ 
(
¢¢ 
Conn
¢¢ #
.
¢¢# $

dataSource
¢¢$ .
,
¢¢. /
Conn
¢¢0 4
.
¢¢4 5
catalog
¢¢5 <
,
¢¢< =
Conn
¢¢> B
.
¢¢B C
pass
¢¢C G
,
¢¢G H
Conn
¢¢I M
.
¢¢M N
user
¢¢N R
)
¢¢R S
;
¢¢S T
}
££ 	
[
ºº 	
HttpGet
ºº	 
]
ºº 
public
ΩΩ 
ActionResult
ΩΩ 
NewFTA
ΩΩ "
(
ΩΩ" #
FTA
ΩΩ# &
fta
ΩΩ' *
)
ΩΩ* +
{
ææ 	
ViewBag
øø 
.
øø !
PlanejamentosComFTA
øø '
=
øø( )"
GetPlanejamentoFTAId
øø* >
(
øø> ?
)
øø? @
;
øø@ A
fta
¿¿ 
.
¿¿ 
	ValidaFTA
¿¿ 
(
¿¿ 
)
¿¿ 
;
¿¿ !
NovoFtaModelParaSgq
¡¡ 
(
¡¡  
fta
¡¡  #
)
¡¡# $
;
¡¡$ %
fta
¬¬ 
.
¬¬ 
IsFTA
¬¬ 
=
¬¬ 
true
¬¬ 
;
¬¬ 
return
√√ 
View
√√ 
(
√√ 
fta
√√ 
)
√√ 
;
√√ 
}
ƒƒ 	
private
∆∆ 
static
∆∆ 
void
∆∆ !
NovoFtaModelParaSgq
∆∆ /
(
∆∆/ 0
FTA
∆∆0 3
fta
∆∆4 7
)
∆∆7 8
{
«« 	
Guard
»» 
.
»» #
CheckStringFullSimple
»» '
(
»»' (
fta
»»( +
.
»»+ ,
_Level1
»», 3
,
»»3 4
$str
»»5 >
)
»»> ?
;
»»? @
Guard
…… 
.
…… #
CheckStringFullSimple
…… '
(
……' (
fta
……( +
.
……+ ,
_Level2
……, 3
,
……3 4
$str
……5 >
)
……> ?
;
……? @
Guard
   
.
   #
CheckStringFullSimple
   '
(
  ' (
fta
  ( +
.
  + ,
_Level3
  , 3
,
  3 4
$str
  5 >
)
  > ?
;
  ? @
Guard
ÀÀ 
.
ÀÀ #
CheckStringFullSimple
ÀÀ '
(
ÀÀ' (
fta
ÀÀ( +
.
ÀÀ+ ,
_DataInicioFTA
ÀÀ, :
,
ÀÀ: ;
$str
ÀÀ< L
)
ÀÀL M
;
ÀÀM N
Guard
ÃÃ 
.
ÃÃ #
CheckStringFullSimple
ÃÃ '
(
ÃÃ' (
fta
ÃÃ( +
.
ÃÃ+ ,
_DataFimFTA
ÃÃ, 7
,
ÃÃ7 8
$str
ÃÃ9 F
)
ÃÃF G
;
ÃÃG H
Guard
ÕÕ 
.
ÕÕ 

ForValidId
ÕÕ 
(
ÕÕ 
fta
ÕÕ  
.
ÕÕ  !
Supervisor_Id
ÕÕ! .
,
ÕÕ. /
$str
ÕÕ0 E
)
ÕÕE F
;
ÕÕF G
using
—— 
(
—— 
var
—— 
	dbFActory
——  
=
——! "
new
——# &

ADOFactory
——' 1
.
——1 2
Factory
——2 9
(
——9 :
Conn
——: >
.
——> ?
dataSource2
——? J
,
——J K
Conn
——L P
.
——P Q
catalog2
——Q Y
,
——Y Z
Conn
——[ _
.
——_ `
pass2
——` e
,
——e f
Conn
——g k
.
——k l
user2
——l q
)
——q r
)
——r s
{
““ 
var
‘‘ 
level1
‘‘ 
=
‘‘ 
	dbFActory
‘‘ &
.
‘‘& '
SearchQuery
‘‘' 2
<
‘‘2 3
ParLevel1DTO
‘‘3 ?
>
‘‘? @
(
‘‘@ A
$str
‘‘A i
+
‘‘j k
fta
‘‘l o
.
‘‘o p
_Level1
‘‘p w
+
‘‘x y
$str
‘‘z }
)
‘‘} ~
.
‘‘~ 
FirstOrDefault‘‘ ç
(‘‘ç é
r‘‘é è
=>‘‘ê í
r‘‘ì î
.‘‘î ï
IsActive‘‘ï ù
)‘‘ù û
;‘‘û ü
var
’’ 
level2
’’ 
=
’’ 
	dbFActory
’’ &
.
’’& '
SearchQuery
’’' 2
<
’’2 3
ParLevel2DTO
’’3 ?
>
’’? @
(
’’@ A
$str
’’A i
+
’’j k
fta
’’l o
.
’’o p
_Level2
’’p w
+
’’x y
$str
’’z }
)
’’} ~
.
’’~ 
FirstOrDefault’’ ç
(’’ç é
r’’é è
=>’’ê í
r’’ì î
.’’î ï
IsActive’’ï ù
)’’ù û
;’’û ü
var
÷÷ 
level3
÷÷ 
=
÷÷ 
	dbFActory
÷÷ &
.
÷÷& '
SearchQuery
÷÷' 2
<
÷÷2 3
ParLevel3DTO
÷÷3 ?
>
÷÷? @
(
÷÷@ A
$str
÷÷A i
+
÷÷j k
fta
÷÷l o
.
÷÷o p
_Level3
÷÷p w
+
÷÷x y
$str
÷÷z }
)
÷÷} ~
.
÷÷~ 
FirstOrDefault÷÷ ç
(÷÷ç é
r÷÷é è
=>÷÷ê í
r÷÷ì î
.÷÷î ï
IsActive÷÷ï ù
)÷÷ù û
;÷÷û ü
var
◊◊ 
usersgq
◊◊ 
=
◊◊ 
	dbFActory
◊◊ '
.
◊◊' (
SearchQuery
◊◊( 3
<
◊◊3 4
UserDTO
◊◊4 ;
>
◊◊; <
(
◊◊< =
$str
◊◊= `
+
◊◊a b
fta
◊◊c f
.
◊◊f g
Supervisor_Id
◊◊g t
)
◊◊t u
.
◊◊u v
FirstOrDefault◊◊v Ñ
(◊◊Ñ Ö
)◊◊Ö Ü
;◊◊Ü á
var
ÿÿ 

parcompany
ÿÿ 
=
ÿÿ  
	dbFActory
ÿÿ! *
.
ÿÿ* +
SearchQuery
ÿÿ+ 6
<
ÿÿ6 7
ParCompanyDTO
ÿÿ7 D
>
ÿÿD E
(
ÿÿE F
$str
ÿÿF l
+
ÿÿm n
fta
ÿÿo r
.
ÿÿr s

Unidade_Id
ÿÿs }
)
ÿÿ} ~
.
ÿÿ~ 
FirstOrDefaultÿÿ ç
(ÿÿç é
rÿÿé è
=>ÿÿê í
rÿÿì î
.ÿÿî ï
IsActiveÿÿï ù
)ÿÿù û
;ÿÿû ü
var
ŸŸ 
parDepartment
ŸŸ !
=
ŸŸ" #
	dbFActory
ŸŸ$ -
.
ŸŸ- .
SearchQuery
ŸŸ. 9
<
ŸŸ9 :
ParDepartmentDTO
ŸŸ: J
>
ŸŸJ K
(
ŸŸK L
$str
ŸŸL u
+
ŸŸv w
level2
ŸŸx ~
.
ŸŸ~ 
ParDepartment_IdŸŸ è
)ŸŸè ê
.ŸŸê ë
FirstOrDefaultŸŸë ü
(ŸŸü †
)ŸŸ† °
;ŸŸ° ¢
if
‹‹ 
(
‹‹ 
fta
‹‹ 
.
‹‹ 

Unidade_Id
‹‹ "
>
‹‹# $
$num
‹‹% &
)
‹‹& '
{
›› 
fta
ﬁﬁ 
.
ﬁﬁ 
_Unidade
ﬁﬁ  
=
ﬁﬁ! "

parcompany
ﬁﬁ# -
.
ﬁﬁ- .
Name
ﬁﬁ. 2
;
ﬁﬁ2 3
}
ﬂﬂ 
else
‡‡ 
{
·· 
fta
‚‚ 
.
‚‚ 
_Unidade
‚‚  
=
‚‚! "
$str
‚‚# 0
;
‚‚0 1
}
„„ 
var
ÂÂ 
dtInit
ÂÂ 
=
ÂÂ 
Guard
ÂÂ "
.
ÂÂ" #
ParseDateToSqlV2
ÂÂ# 3
(
ÂÂ3 4
fta
ÂÂ4 7
.
ÂÂ7 8
_DataInicioFTA
ÂÂ8 F
)
ÂÂF G
.
ÂÂG H
ToString
ÂÂH P
(
ÂÂP Q
$str
ÂÂQ [
)
ÂÂ[ \
;
ÂÂ\ ]
var
ÊÊ 
dtEnd
ÊÊ 
=
ÊÊ 
Guard
ÊÊ !
.
ÊÊ! "
ParseDateToSqlV2
ÊÊ" 2
(
ÊÊ2 3
fta
ÊÊ3 6
.
ÊÊ6 7
_DataFimFTA
ÊÊ7 B
)
ÊÊB C
.
ÊÊC D
ToString
ÊÊD L
(
ÊÊL M
$str
ÊÊM W
)
ÊÊW X
;
ÊÊX Y
var
ËË 
	metaQuery
ËË 
=
ËË 
$str
ËË  3
+
ËË4 5
$str
ÈÈ H
+
ÈÈI J
level1
ÈÈK Q
.
ÈÈQ R
Id
ÈÈR T
+
ÈÈU V
$str
ÈÈW p
+
ÈÈq r
fta
ÈÈs v
.
ÈÈv w

Unidade_IdÈÈw Å
+ÈÈÇ É
$strÈÈÑ µ
+ÈÈ∂ ∑
dtEndÈÈ∏ Ω
+ÈÈæ ø
$strÈÈ¿ ÿ
+ÈÈŸ ⁄
$str
ÍÍ e
+
ÍÍf g
level1
ÍÍh n
.
ÍÍn o
Id
ÍÍo q
+
ÍÍr s
$strÍÍt é
+ÍÍè ê
ftaÍÍë î
.ÍÍî ï

Unidade_IdÍÍï ü
+ÍÍ† °
$strÍÍ¢ ”
+ÍÍ‘ ’
dtEndÍÍ÷ €
+ÍÍ‹ ›
$strÍÍﬁ ó
+ÍÍò ô
$str
ÎÎ 
+
ÎÎ 
$str
ÏÏ e
+
ÏÏf g
level1
ÏÏh n
.
ÏÏn o
Id
ÏÏo q
+
ÏÏr s
$strÏÏt é
+ÏÏè ê
ftaÏÏë î
.ÏÏî ï

Unidade_IdÏÏï ü
+ÏÏ† °
$strÏÏ¢ Ó
+ÏÏÔ 
$str
ÌÌ 
+
ÌÌ 
$str
ÓÓ 
;
ÓÓ 
fta
 
.
 
_Level1
 
=
 
level1
 $
.
$ %
Name
% )
;
) *
fta
ÒÒ 
.
ÒÒ 
_Departamento
ÒÒ !
=
ÒÒ" #
parDepartment
ÒÒ$ 1
.
ÒÒ1 2
Name
ÒÒ2 6
;
ÒÒ6 7
fta
ÚÚ 
.
ÚÚ 
Departamento_Id
ÚÚ #
=
ÚÚ$ %
parDepartment
ÚÚ& 3
.
ÚÚ3 4
Id
ÚÚ4 6
;
ÚÚ6 7
fta
ÛÛ 
.
ÛÛ 
Level1Id
ÛÛ 
=
ÛÛ 
level1
ÛÛ %
.
ÛÛ% &
Id
ÛÛ& (
;
ÛÛ( )
fta
ÙÙ 
.
ÙÙ 
Level2Id
ÙÙ 
=
ÙÙ 
level2
ÙÙ %
.
ÙÙ% &
Id
ÙÙ& (
;
ÙÙ( )
fta
ıı 
.
ıı 
Level3Id
ıı 
=
ıı 
level3
ıı %
.
ıı% &
Id
ıı& (
;
ıı( )
fta
ˆˆ 
.
ˆˆ 
MetaFTA
ˆˆ 
+=
ˆˆ 
$str
ˆˆ #
;
ˆˆ# $
var
˜˜ 
PercentualNCFTA2f
˜˜ %
=
˜˜& '
decimal
˜˜( /
.
˜˜/ 0
Round
˜˜0 5
(
˜˜5 6
decimal
˜˜6 =
.
˜˜= >
Parse
˜˜> C
(
˜˜C D
fta
˜˜D G
.
˜˜G H
PercentualNCFTA
˜˜H W
.
˜˜W X
Replace
˜˜X _
(
˜˜_ `
$str
˜˜` c
,
˜˜c d
$str
˜˜e h
)
˜˜h i
)
˜˜i j
,
˜˜j k
$num
˜˜l m
,
˜˜m n
MidpointRounding
˜˜o 
.˜˜ Ä
AwayFromZero˜˜Ä å
)˜˜å ç
.˜˜ç é
ToString˜˜é ñ
(˜˜ñ ó
)˜˜ó ò
;˜˜ò ô
fta
¯¯ 
.
¯¯ 
PercentualNCFTA
¯¯ #
=
¯¯$ %
level2
¯¯& ,
.
¯¯, -
Name
¯¯- 1
+
¯¯2 3
$str
¯¯4 9
+
¯¯: ;
level3
¯¯< B
.
¯¯B C
Name
¯¯C G
+
¯¯H I
$str
¯¯J N
+
¯¯O P
PercentualNCFTA2f
¯¯Q b
+
¯¯c d
$str
¯¯e i
;
¯¯i j
fta
˘˘ 
.
˘˘ #
ReincidenciaDesvioFTA
˘˘ )
=
˘˘* +
level2
˘˘, 2
.
˘˘2 3
Name
˘˘3 7
+
˘˘8 9
$str
˘˘: ?
+
˘˘@ A
level3
˘˘B H
.
˘˘H I
Name
˘˘I M
+
˘˘N O
$str
˘˘P T
+
˘˘U V
fta
˘˘W Z
.
˘˘Z [#
ReincidenciaDesvioFTA
˘˘[ p
;
˘˘p q
fta
˙˙ 
.
˙˙ 
_Supervisor
˙˙ 
=
˙˙  !
usersgq
˙˙" )
.
˙˙) *
Name
˙˙* .
;
˙˙. /
dynamic
˚˚ 
meta
˚˚ 
=
˚˚ 
	dbFActory
˚˚ (
.
˚˚( )
QueryNinjaADO
˚˚) 6
(
˚˚6 7
	metaQuery
˚˚7 @
)
˚˚@ A
.
˚˚A B
FirstOrDefault
˚˚B P
(
˚˚P Q
)
˚˚Q R
;
˚˚R S
string
¸¸ 
meta2
¸¸ 
=
¸¸ 
meta
¸¸ #
.
¸¸# $
META
¸¸$ (
;
¸¸( )
fta
˝˝ 
.
˝˝ 
MetaFTA
˝˝ 
=
˝˝ 
decimal
˝˝ %
.
˝˝% &
Round
˝˝& +
(
˝˝+ ,
decimal
˝˝, 3
.
˝˝3 4
Parse
˝˝4 9
(
˝˝9 :
meta2
˝˝: ?
)
˝˝? @
,
˝˝@ A
$num
˝˝B C
,
˝˝C D
MidpointRounding
˝˝E U
.
˝˝U V
AwayFromZero
˝˝V b
)
˝˝b c
.
˝˝c d
ToString
˝˝d l
(
˝˝l m
)
˝˝m n
;
˝˝n o
}
˛˛ 
}
ˇˇ 	
[
ÖÖ 	
HttpGet
ÖÖ	 
]
ÖÖ 
public
ÜÜ 
ActionResult
ÜÜ 
FTAMock
ÜÜ #
(
ÜÜ# $
)
ÜÜ$ %
{
áá 	
var
àà 
fta
àà 
=
àà 
new
àà 
FTA
àà 
(
àà 
)
àà 
;
àà  
fta
ââ 
.
ââ 
_DataInicioFTA
ââ 
=
ââ  
$str
ââ! -
;
ââ- .
fta
ää 
.
ää 
_DataFimFTA
ää 
=
ää 
$str
ää *
;
ää* +
fta
åå 
.
åå 
_Unidade
åå 
=
åå 
$str
åå (
;
åå( )
fta
çç 
.
çç 
_Departamento
çç 
=
çç 
$str
çç  (
;
çç( )
fta
éé 
.
éé 
_Supervisor
éé 
=
éé 
$str
éé /
;
éé/ 0
fta
èè 
.
èè 
_Level1
èè 
=
èè 
$str
èè ,
;
èè, -
fta
êê 
.
êê 
MetaFTA
êê 
=
êê 
$str
êê ,
;
êê, -
fta
ëë 
.
ëë #
ReincidenciaDesvioFTA
ëë %
=
ëë& '
$str
ëë( ;
;
ëë; <
fta
íí 
.
íí 
PercentualNCFTA
íí 
=
íí  !
$str
íí" 5
;
íí5 6
return
îî 
View
îî 
(
îî 
$str
îî  
,
îî  !
fta
îî" %
)
îî% &
;
îî& '
}
ññ 	
private
òò 
int
òò "
GetPlanejamentoFTAId
òò (
(
òò( )
)
òò) *
{
ôô 	
var
öö $
novoPlanejamentoTatico
öö &
=
öö' (
Mapper
öö) /
.
öö/ 0
Map
öö0 3
<
öö3 4
Pa_Planejamento
öö4 C
>
ööC D
(
ööD E
db
ööE G
.
ööG H
Pa_Planejamento
ööH W
.
ööW X
FirstOrDefault
ööX f
(
ööf g
r
öög h
=>
ööi k
r
ööl m
.
ööm n
IsFta
öön s
==
ööt v
true
ööw {
)
öö{ |
)
öö| }
;
öö} ~
if
úú 
(
úú $
novoPlanejamentoTatico
úú &
==
úú' )
null
úú* .
)
úú. /
using
ùù 
(
ùù 
var
ùù 
apiTmp
ùù !
=
ùù" #
new
ùù$ '*
ApiPa_PlanejamentoController
ùù( D
(
ùùD E
)
ùùE F
)
ùùF G$
novoPlanejamentoTatico
ûû *
=
ûû+ ,
apiTmp
ûû- 3
.
ûû3 4/
!CreateGenericEstrategicoTaticoFta
ûû4 U
(
ûûU V
)
ûûV W
;
ûûW X
return
†† $
novoPlanejamentoTatico
†† )
.
††) *
Id
††* ,
;
††, -
}
°° 	
}
•• 
}¶¶ ®ö
dC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\Pa_PlanejamentoController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
{ 
[		 

IntegraSgq		 
]		 
public

 

class

 %
Pa_PlanejamentoController

 *
:

+ ,

Controller

- 7
{ 
public %
Pa_PlanejamentoController (
(( )
)) *
{ 	
ViewBag 
. 
Dimensao 
= 
Pa_Dimensao *
.* +
Listar+ 1
(1 2
)2 3
;3 4
ViewBag 
. 
Objetivo 
= 
Pa_Objetivo *
.* +
Listar+ 1
(1 2
)2 3
;3 4
ViewBag 
. 
IndicadoresDiretriz '
=( )"
Pa_IndicadoresDiretriz* @
.@ A
ListarA G
(G H
)H I
;I J
ViewBag 
. 
	Diretoria 
= 
Pa_Diretoria  ,
., -
Listar- 3
(3 4
)4 5
;5 6
ViewBag 
. 
Gerencia 
= 
Pa_Gerencia *
.* +
Listar+ 1
(1 2
)2 3
;3 4
ViewBag 
. 
Coordenacao 
=  !
Pa_Coordenacao" 0
.0 1
Listar1 7
(7 8
)8 9
;9 :
ViewBag 
. 
Missao 
= 
	Pa_Missao &
.& '
Listar' -
(- .
). /
;/ 0
ViewBag 
. 
Visao 
= 
Pa_Visao $
.$ %
Listar% +
(+ ,
), -
;- .
ViewBag 
. 
TemaAssunto 
=  !
Pa_TemaAssunto" 0
.0 1
Listar1 7
(7 8
)8 9
;9 :
ViewBag 
.  
IndicadoresDeProjeto (
=) *#
Pa_IndicadoresDeProjeto+ B
.B C
ListarC I
(I J
)J K
;K L
ViewBag 
. 

Iniciativa 
=  
Pa_Iniciativas! /
./ 0
Listar0 6
(6 7
)7 8
;8 9
ViewBag 
. 
ObjetivoGerencial %
=& '
Pa_ObjetivoGeral( 8
.8 9
Listar9 ?
(? @
)@ A
;A B
ViewBag   
.   
UnidadeMedida   !
=  " #
Pa_UnidadeMedida  $ 4
.  4 5
Listar  5 ;
(  ; <
)  < =
;  = >
if"" 
("" 
ViewBag"" 
."" 
Quem"" 
=="" 
null""  $
)""$ %
ViewBag## 
.## 
Quem## 
=## 
Pa_Quem## &
.##& '
Listar##' -
(##- .
)##. /
;##/ 0
}$$ 	
public'' 
ActionResult'' 
Index'' !
(''! "
int''" %
?''% &
id''' )
=''* +
$num'', -
)''- .
{(( 	
ViewBag)) 
.)) 
urlSend)) 
=)) 
Url)) !
.))! "
Action))" (
())( )
$str))) /
,))/ 0
$str))1 F
)))F G
;))G H
ViewBag** 
.** 
urlList** 
=** 
Url** !
.**! "
Action**" (
(**( )
$str**) /
,**/ 0
$str**1 F
)**F G
;**G H
var,, 
model,, 
=,, 
new,, 
Pa_Planejamento,, +
(,,+ ,
),,, -
;,,- .
if.. 
(.. 
id.. 
... 
GetValueOrDefault.. #
(..# $
)..$ %
>..& '
$num..( )
)..) *
model// 
=// 
Pa_Planejamento// &
.//& '
Get//' *
(//* +
id//+ -
.//- .
GetValueOrDefault//. ?
(//? @
)//@ A
)//A B
;//B C
return11 
PartialView11 
(11 
$str11 &
,11& '
model11( -
)11- .
;11. /
}22 	
public44 
ActionResult44 
Details44 #
(44# $
int44$ '
?44' (
id44) +
=44, -
$num44. /
)44/ 0
{55 	
if66 
(66 
id66 
>66 
$num66 
)66 
{77 
var88 
model88 
=88 
Pa_Planejamento88 +
.88+ ,
	GetTatico88, 5
(885 6
id886 8
.888 9
GetValueOrDefault889 J
(88J K
)88K L
)88L M
;88M N
if99 
(99 
model99 
==99 
null99 !
)99! "
model:: 
=:: 
Pa_Planejamento:: +
.::+ ,
GetEstrategico::, :
(::: ;
id::; =
.::= >
GetValueOrDefault::> O
(::O P
)::P Q
)::Q R
;::R S
if;; 
(;; 
model;; 
!=;; 
null;; !
);;! "
return<< 
PartialView<< &
(<<& '
$str<<' 0
,<<0 1
model<<2 7
)<<7 8
;<<8 9
}== 
return?? 
null?? 
;?? 
}@@ 	
publicBB 
ActionResultBB 
BuscarBB "
(BB" #
)BB# $
{CC 	
returnDD 
PartialViewDD 
(DD 
$strDD '
)DD' (
;DD( )
}EE 	
[GG 	
HttpPostGG	 
]GG 
publicHH 
ActionResultHH 
FiltrarHH #
(HH# $
Pa_PlanejamentoHH$ 3
filtroHH4 :
)HH: ;
{II 	
varJJ 
listaJJ 
=JJ 
Pa_PlanejamentoJJ '
.JJ' (
ListarJJ( .
(JJ. /
)JJ/ 0
;JJ0 1
ifMM 
(MM 
filtroMM 
.MM 
Diretoria_IdMM #
>MM$ %
$numMM& '
)MM' (
listaNN 
=NN 
listaNN 
.NN 
WhereNN #
(NN# $
rNN$ %
=>NN& (
rNN) *
.NN* +
Diretoria_IdNN+ 7
==NN8 :
filtroNN; A
.NNA B
Diretoria_IdNNB N
)NNN O
.NNO P
ToListNNP V
(NNV W
)NNW X
;NNX Y
ifPP 
(PP 
filtroPP 
.PP 
	Missao_IdPP  
>PP! "
$numPP# $
)PP$ %
listaQQ 
=QQ 
listaQQ 
.QQ 
WhereQQ #
(QQ# $
rQQ$ %
=>QQ& (
rQQ) *
.QQ* +
	Missao_IdQQ+ 4
==QQ5 7
filtroQQ8 >
.QQ> ?
Gerencia_IdQQ? J
)QQJ K
.QQK L
ToListQQL R
(QQR S
)QQS T
;QQT U
ifSS 
(SS 
filtroSS 
.SS 
Visao_IdSS 
>SS  !
$numSS" #
)SS# $
listaTT 
=TT 
listaTT 
.TT 
WhereTT #
(TT# $
rTT$ %
=>TT& (
rTT) *
.TT* +
Visao_IdTT+ 3
==TT4 6
filtroTT7 =
.TT= >
Coordenacao_IdTT> L
)TTL M
.TTM N
ToListTTN T
(TTT U
)TTU V
;TTV W
ifVV 
(VV 
filtroVV 
.VV 
Dimensao_IdVV "
>VV# $
$numVV% &
)VV& '
listaWW 
=WW 
listaWW 
.WW 
WhereWW #
(WW# $
rWW$ %
=>WW& (
rWW) *
.WW* +
Dimensao_IdWW+ 6
==WW7 9
filtroWW: @
.WW@ A
TemaAssunto_IdWWA O
)WWO P
.WWP Q
ToListWWQ W
(WWW X
)WWX Y
;WWY Z
ifYY 
(YY 
filtroYY 
.YY 
Objetivo_IdYY "
>YY# $
$numYY% &
)YY& '
listaZZ 
=ZZ 
listaZZ 
.ZZ 
WhereZZ #
(ZZ# $
rZZ$ %
=>ZZ& (
rZZ) *
.ZZ* +
Objetivo_IdZZ+ 6
==ZZ7 9
filtroZZ: @
.ZZ@ A 
ObjetivoGerencial_IdZZA U
)ZZU V
.ZZV W
ToListZZW ]
(ZZ] ^
)ZZ^ _
;ZZ_ `
if\\ 
(\\ 
filtro\\ 
.\\ "
IndicadoresDiretriz_Id\\ -
>\\. /
$num\\0 1
)\\1 2
lista]] 
=]] 
lista]] 
.]] 
Where]] #
(]]# $
r]]$ %
=>]]& (
r]]) *
.]]* +"
IndicadoresDiretriz_Id]]+ A
==]]B D
filtro]]E K
.]]K L#
IndicadoresDeProjeto_Id]]L c
)]]c d
.]]d e
ToList]]e k
(]]k l
)]]l m
;]]m n
if__ 
(__ 
filtro__ 
.__  
Responsavel_Diretriz__ +
>__, -
$num__. /
)__/ 0
lista`` 
=`` 
lista`` 
.`` 
Where`` #
(``# $
r``$ %
=>``& (
r``) *
.``* + 
Responsavel_Diretriz``+ ?
==``@ B
filtro``C I
.``I J"
IndicadoresDiretriz_Id``J `
)``` a
.``a b
ToList``b h
(``h i
)``i j
;``j k
ifbb 
(bb 
filtrobb 
.bb 
IsfiltrarAcaobb $
.bb$ %
GetValueOrDefaultbb% 6
(bb6 7
)bb7 8
)bb8 9
listacc 
=cc 
listacc 
.cc 
Wherecc #
(cc# $
rcc$ %
=>cc& (
rcc) *
.cc* +
Estrategico_Idcc+ 9
!=cc: <
nullcc= A
)ccA B
.ccB C
ToListccC I
(ccI J
)ccJ K
;ccK L
elsedd 
listaee 
=ee 
listaee 
.ee 
Whereee #
(ee# $
ree$ %
=>ee& (
ree) *
.ee* +
Diretoria_Idee+ 7
>ee8 9
$numee: ;
&&ee< >
ree? @
.ee@ A
	Missao_IdeeA J
>eeK L
$numeeM N
&&eeO Q
reeR S
.eeS T
Dimensao_IdeeT _
>ee` a
$numeeb c
)eec d
.eed e
ToListeee k
(eek l
)eel m
;eem n
ViewBaggg 
.gg 
	Filtradasgg 
=gg 
listagg  %
;gg% &
returnii 
PartialViewii 
(ii 
$strii (
)ii( )
;ii) *
}jj 	
[ll 	
HttpGetll	 
]ll 
publicmm 
ActionResultmm 
Editarmm "
(mm" #
intmm# &
idmm' )
)mm) *
{nn 	
varpp 
modelpp 
=pp 
Pa_Planejamentopp '
.pp' (
Getpp( +
(pp+ ,
idpp, .
)pp. /
;pp/ 0
ifrr 
(rr 
modelrr 
.rr 

DataIniciorr 
!=rr  "
nullrr# '
)rr' (
modelss 
.ss 
_DataInicioss !
=ss" #
modelss$ )
.ss) *

DataInicioss* 4
.ss4 5
GetValueOrDefaultss5 F
(ssF G
)ssG H
.ssH I
ToStringssI Q
(ssQ R
$strssR ^
)ss^ _
;ss_ `
iftt 
(tt 
modeltt 
.tt 
DataFimtt 
!=tt  
nulltt! %
)tt% &
modeluu 
.uu 
_DataFimuu 
=uu  
modeluu! &
.uu& '
DataFimuu' .
.uu. /
GetValueOrDefaultuu/ @
(uu@ A
)uuA B
.uuB C
ToStringuuC K
(uuK L
$struuL X
)uuX Y
;uuY Z
ifvv 
(vv 
modelvv 
.vv 
ValorDevv 
>vv 
$numvv  !
)vv! "
modelww 
.ww 
_ValorDeww 
=ww  
modelww! &
.ww& '
ValorDeww' .
.ww. /
ToStringww/ 7
(ww7 8
$strww8 =
)ww= >
;ww> ?
ifxx 
(xx 
modelxx 
.xx 
	ValorParaxx 
>xx  !
$numxx" #
)xx# $
modelyy 
.yy 

_ValorParayy  
=yy! "
modelyy# (
.yy( )
	ValorParayy) 2
.yy2 3
ToStringyy3 ;
(yy; <
$stryy< A
)yyA B
;yyB C
returnzz 
PartialViewzz 
(zz 
$strzz &
,zz& '
modelzz( -
)zz- .
;zz. /
}{{ 	
public
ÑÑ 
ActionResult
ÑÑ 
GETObjetivo
ÑÑ '
(
ÑÑ' (
int
ÑÑ( +
id
ÑÑ, .
)
ÑÑ. /
{
ÖÖ 	
if
ÜÜ 
(
ÜÜ 
id
ÜÜ 
>
ÜÜ 
$num
ÜÜ 
)
ÜÜ 
ViewBag
áá 
.
áá 
Disabled
áá  
=
áá! "
$str
áá# *
;
áá* +
else
àà 
ViewBag
ââ 
.
ââ 
Disabled
ââ  
=
ââ! "
$str
ââ# )
;
ââ) *
ViewBag
ää 
.
ää 
DdlName
ää 
=
ää 
$str
ää +
;
ää+ ,
var
åå 
results
åå 
=
åå 
Pa_Objetivo
åå %
.
åå% &"
GetObjetivoXDimensao
åå& :
(
åå: ;
id
åå; =
)
åå= >
;
åå> ?
if
çç 
(
çç 
results
çç 
==
çç 
null
çç 
)
çç  
results
éé 
=
éé 
new
éé 
List
éé "
<
éé" #
Pa_Objetivo
éé# .
>
éé. /
(
éé/ 0
)
éé0 1
;
éé1 2
ViewBag
ëë 
.
ëë 
Ddl
ëë 
=
ëë 
new
ëë 

SelectList
ëë (
(
ëë( )
results
ëë) 0
,
ëë0 1
$str
ëë2 6
,
ëë6 7
$str
ëë8 >
)
ëë> ?
;
ëë? @
return
ìì 
PartialView
ìì 
(
ìì 
$str
ìì -
)
ìì- .
;
ìì. /
}
îî 	
public
óó 
ActionResult
óó $
GETIndicadoresDiretriz
óó 2
(
óó2 3
int
óó3 6
id
óó7 9
)
óó9 :
{
òò 	
if
ôô 
(
ôô 
id
ôô 
>
ôô 
$num
ôô 
)
ôô 
ViewBag
öö 
.
öö 
Disabled
öö  
=
öö! "
$str
öö# *
;
öö* +
else
õõ 
ViewBag
úú 
.
úú 
Disabled
úú  
=
úú! "
$str
úú# )
;
úú) *
ViewBag
ùù 
.
ùù 
DdlName
ùù 
=
ùù 
$str
ùù 6
;
ùù6 7
var
üü 
results
üü 
=
üü $
Pa_IndicadoresDiretriz
üü 0
.
üü0 1-
GetIndicadoresDiretrizXObjetivo
üü1 P
(
üüP Q
id
üüQ S
)
üüS T
;
üüT U
if
†† 
(
†† 
results
†† 
==
†† 
null
†† 
)
††  
results
°° 
=
°° 
new
°° 
List
°° "
<
°°" #$
Pa_IndicadoresDiretriz
°°# 9
>
°°9 :
(
°°: ;
)
°°; <
;
°°< =
ViewBag
££ 
.
££ 
Ddl
££ 
=
££ 
new
££ 

SelectList
££ (
(
££( )
results
££) 0
,
££0 1
$str
££2 6
,
££6 7
$str
££8 >
)
££> ?
;
££? @
return
•• 
PartialView
•• 
(
•• 
$str
•• -
)
••- .
;
••. /
}
¶¶ 	
public
®® 
ActionResult
®® -
GETIndicadoresProjetoIniciativa
®® ;
(
®®; <
int
®®< ?
id
®®@ B
)
®®B C
{
©© 	
if
™™ 
(
™™ 
id
™™ 
>
™™ 
$num
™™ 
)
™™ 
ViewBag
´´ 
.
´´ 
Disabled
´´  
=
´´! "
$str
´´# *
;
´´* +
else
¨¨ 
ViewBag
≠≠ 
.
≠≠ 
Disabled
≠≠  
=
≠≠! "
$str
≠≠# )
;
≠≠) *
ViewBag
ÆÆ 
.
ÆÆ 
DdlName
ÆÆ 
=
ÆÆ 
$str
ÆÆ 7
;
ÆÆ7 8
var
∞∞ 
results
∞∞ 
=
∞∞ %
Pa_IndicadoresDeProjeto
∞∞ 1
.
∞∞1 2.
 GetIndicadoresProjetoXiniciativa
∞∞2 R
(
∞∞R S
id
∞∞S U
)
∞∞U V
;
∞∞V W
if
±± 
(
±± 
results
±± 
==
±± 
null
±± 
)
±±  
results
≤≤ 
=
≤≤ 
new
≤≤ 
List
≤≤ "
<
≤≤" #%
Pa_IndicadoresDeProjeto
≤≤# :
>
≤≤: ;
(
≤≤; <
)
≤≤< =
;
≤≤= >
ViewBag
¥¥ 
.
¥¥ 
Ddl
¥¥ 
=
¥¥ 
new
¥¥ 

SelectList
¥¥ (
(
¥¥( )
results
¥¥) 0
,
¥¥0 1
$str
¥¥2 6
,
¥¥6 7
$str
¥¥8 >
)
¥¥> ?
;
¥¥? @
return
∂∂ 
PartialView
∂∂ 
(
∂∂ 
$str
∂∂ -
)
∂∂- .
;
∂∂. /
}
∑∑ 	
public
ππ 
ActionResult
ππ $
GETObjetivosGerenciais
ππ 2
(
ππ2 3
int
ππ3 6
id
ππ7 9
)
ππ9 :
{
∫∫ 	
if
ªª 
(
ªª 
id
ªª 
>
ªª 
$num
ªª 
)
ªª 
ViewBag
ºº 
.
ºº 
Disabled
ºº  
=
ºº! "
$str
ºº# *
;
ºº* +
else
ΩΩ 
ViewBag
ææ 
.
ææ 
Disabled
ææ  
=
ææ! "
$str
ææ# )
;
ææ) *
ViewBag
øø 
.
øø 
DdlName
øø 
=
øø 
$str
øø 4
;
øø4 5
var
¡¡ 
results
¡¡ 
=
¡¡ 
Pa_ObjetivoGeral
¡¡ *
.
¡¡* +,
GetObjetivoXIndicadoresProjeto
¡¡+ I
(
¡¡I J
id
¡¡J L
)
¡¡L M
;
¡¡M N
if
¬¬ 
(
¬¬ 
results
¬¬ 
==
¬¬ 
null
¬¬ 
)
¬¬  
results
√√ 
=
√√ 
new
√√ 
List
√√ "
<
√√" #
Pa_ObjetivoGeral
√√# 3
>
√√3 4
(
√√4 5
)
√√5 6
;
√√6 7
ViewBag
≈≈ 
.
≈≈ 
Ddl
≈≈ 
=
≈≈ 
new
≈≈ 

SelectList
≈≈ (
(
≈≈( )
results
≈≈) 0
,
≈≈0 1
$str
≈≈2 6
,
≈≈6 7
$str
≈≈8 >
)
≈≈> ?
;
≈≈? @
return
«« 
PartialView
«« 
(
«« 
$str
«« -
)
««- .
;
««. /
}
»» 	
}
   
}ÀÀ «

_C:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Controllers\RelatoriosController.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
Controllers $
{ 
[ 

IntegraSgq 
] 
public 

class  
RelatoriosController %
:& '

Controller( 2
{ 
public		  
RelatoriosController		 #
(		# $
)		$ %
{

 	
UpdateStatus 
( 
) 
; 
} 	
public 
ActionResult 

Relatorios &
(& '
)' (
{ 	
return 
View 
( 
) 
; 
} 	
	protected 
void 
UpdateStatus #
(# $
)$ %
{ 	
using 
( 
var 
dbPa 
= 
new !
PlanoAcaoEF" -
.- .
PlanoDeAcaoEntities. A
(A B
)B C
)C D
{ 
dbPa 
. 
Database 
. 
ExecuteSqlCommand /
(/ 0
$str	0 ∆
)
∆ «
;
« »
} 
} 	
} 
} ’
JC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Global.asax.cs
	namespace 	
PlanoDeAcaoMVC
 
{ 
public 

class 
WebApiApplication "
:# $
System% +
.+ ,
Web, /
./ 0
HttpApplication0 ?
{ 
	protected 
void 
Application_Start (
(( )
)) *
{ 	
AreaRegistration 
. 
RegisterAllAreas -
(- .
). /
;/ 0
ModelBinders 
. 
Binders  
.  !
Add! $
($ %
typeof% +
(+ ,
decimal, 3
)3 4
,4 5
new6 9
DecimalModelBinder: L
(L M
)M N
)N O
;O P
GlobalConfiguration 
.  
	Configure  )
() *
WebApiConfig* 6
.6 7
Register7 ?
)? @
;@ A
FilterConfig 
. !
RegisterGlobalFilters .
(. /
GlobalFilters/ <
.< =
Filters= D
)D E
;E F
RouteConfig 
. 
RegisterRoutes &
(& '

RouteTable' 1
.1 2
Routes2 8
)8 9
;9 :
BundleConfig 
. 
RegisterBundles (
(( )
BundleTable) 4
.4 5
Bundles5 <
)< =
;= >
AutoMapperConfig 
. 
RegisterMappings -
(- .
). /
;/ 0
} 	
} 
} Ï
VC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\MapperConfig\MapperUtil.cs
	namespace 	
	SgqSystem
 
. 
MapperConfig  
{ 
public 

class 

MapperUtil 
: 
Profile %
{		 
public

 

MapperUtil

 
(

 
)

 
{ 	
	CreateMap 
< 
Pa_Acao 
, 
PlanoAcaoEF *
.* +
Pa_Acao+ 2
>2 3
(3 4
)4 5
;5 6
	CreateMap 
< 
PlanoAcaoEF !
.! "
Pa_Acao" )
,) *
Pa_Acao+ 2
>2 3
(3 4
)4 5
;5 6
	CreateMap 
< 
Pa_Acompanhamento '
,' (
PlanoAcaoEF) 4
.4 5
Pa_Acompanhamento5 F
>F G
(G H
)H I
;I J
	CreateMap 
< 
PlanoAcaoEF !
.! "
Pa_Acompanhamento" 3
,3 4
Pa_Acompanhamento5 F
>F G
(G H
)H I
;I J
	CreateMap 
< 
Pa_Planejamento %
,% &
PlanoAcaoEF' 2
.2 3
Pa_Planejamento3 B
>B C
(C D
)D E
;E F
	CreateMap 
< 
PlanoAcaoEF !
.! "
Pa_Planejamento" 1
,1 2
Pa_Planejamento3 B
>B C
(C D
)D E
;E F
	CreateMap 
< 
FTA 
, 
PlanoAcaoEF &
.& '
Pa_FTA' -
>- .
(. /
)/ 0
;0 1
	CreateMap 
< 
PlanoAcaoEF !
.! "
Pa_FTA" (
,( )
FTA* -
>- .
(. /
)/ 0
;0 1
	CreateMap 
< $
Pa_AcompanhamentoXQuemVM .
,. /
PlanoAcaoEF0 ;
.; <"
Pa_AcompanhamentoXQuem< R
>R S
(S T
)T U
;U V
	CreateMap 
< 
PlanoAcaoEF !
.! ""
Pa_AcompanhamentoXQuem" 8
,8 9$
Pa_AcompanhamentoXQuemVM: R
>R S
(S T
)T U
;U V
	CreateMap 
< 
PlanoAcaoEF !
.! "
EmailContent" .
,. /
EmailContentDTO0 ?
>? @
(@ A
)A B
;B C
	CreateMap 
< 
EmailContentDTO %
,% &
PlanoAcaoEF' 2
.2 3
EmailContent3 ?
>? @
(@ A
)A B
;B C
} 	
} 
} á
\C:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\MapperConfig\AutoMapperConfig.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
MapperConfig %
{ 
public 

class 
AutoMapperConfig !
{ 
public 
static 
void 
RegisterMappings +
(+ ,
), -
{		 	
Mapper

 
.

 

Initialize

 
(

 
x

 
=>

  "
{ 
x 
. 

AddProfile 
< 

MapperUtil '
>' (
(( )
)) *
;* +
} 
) 
; 
} 	
} 
} ˛
OC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Models\HandleApi.cs
	namespace 	
PlanoDeAcaoMVC
 
{ 
[		 
AttributeUsage		 
(		 
AttributeTargets		 $
.		$ %
Method		% +
|		, -
AttributeTargets		. >
.		> ?
Class		? D
,		D E
AllowMultiple		F S
=		T U
false		V [
,		[ \
	Inherited		] f
=		g h
true		i m
)		m n
]		n o
public

 

class

 
	HandleApi

 
:

 $
ExceptionFilterAttribute

 5
{ 
public 
override 
void 
OnException (
(( )%
HttpActionExecutedContext) B
contextC J
)J K
{ 	
context 
. 
Response 
= 
context &
.& '
Request' .
.. /
CreateErrorResponse/ B
(B C
HttpStatusCodeC Q
.Q R
InternalServerErrorR e
,e f
contextg n
.n o
	Exceptiono x
.x y
Message	y Ä
.
Ä Å
ToString
Å â
(
â ä
)
ä ã
)
ã å
;
å ç
base 
. 
OnException 
( 
context $
)$ %
;% &
} 	
private 
void 
LogException !
(! "
	Exception" +
ex, .
). /
{ 	
} 	
} 
} Å
VC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str )
)) *
]* +
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str +
)+ ,
], -
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
["" 
assembly"" 	
:""	 

AssemblyVersion"" 
("" 
$str"" $
)""$ %
]""% &
[## 
assembly## 	
:##	 

AssemblyFileVersion## 
(## 
$str## (
)##( )
]##) *Ú
WC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\SgqIntegracao\ConexaoSgq.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
SgqIntegracao &
{ 
public 

class 

ConexaoSgq 
: 
IDisposable )
{ 
public		 
Factory		 
db		 
;		 
public

 

ConexaoSgq

 
(

 
)

 
{

 
db 
= 
new 
Factory 
( 
Conn !
.! "
dataSource2" -
,- .
Conn/ 3
.3 4
catalog24 <
,< =
Conn> B
.B C
pass2C H
,H I
ConnJ N
.N O
user2O T
)T U
;U V
} 	
public 
void 
Dispose 
( 
) 
{ 	
} 	
} 
} ª
WC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\SgqIntegracao\IntegraFTA.cs
	namespace 	
PlanoDeAcaoMVC
 
{		 
public

 

class

 

IntegraFTA

 
:

 
AuthorizeAttribute

 0
{ 
public 
override 
void 
OnAuthorization ,
(, - 
AuthorizationContext- A
filterContextB O
)O P
{ 	
string 
catalog 
= 
$str '
;' (
string 

dataSource 
= 
$str  <
;< =
string 
user 
= 
$str 
; 
string 
pass 
= 
$str $
;$ %
var 

parcompany 
= 
new  
List! %
<% &
ParCompanyDTO& 3
>3 4
(4 5
)5 6
;6 7
var 
usersgq 
= 
new 
List "
<" #
UserDTO# *
>* +
(+ ,
), -
;- .
using 
( 
var 
db 
= 
new 
Factory  '
(' (

dataSource( 2
,2 3
catalog4 ;
,; <
pass= A
,A B
userC G
)G H
)H I
{ 
var 
level1 
= 
db 
.  
SearchQuery  +
<+ ,
ParLevel1DTO, 8
>8 9
(9 :
$str: S
)S T
.T U
WhereU Z
(Z [
r[ \
=>\ ^
r^ _
._ `
IsActive` h
)h i
.i j
ToListj p
(p q
)q r
;r s
var 
level2 
= 
db 
.  
SearchQuery  +
<+ ,
ParLevel1DTO, 8
>8 9
(9 :
$str: S
)S T
.T U
WhereU Z
(Z [
r[ \
=>\ ^
r^ _
._ `
IsActive` h
)h i
.i j
ToListj p
(p q
)q r
;r s
var 
level3 
= 
db 
.  
SearchQuery  +
<+ ,
ParLevel1DTO, 8
>8 9
(9 :
$str: S
)S T
.T U
WhereU Z
(Z [
r[ \
=>] _
r` a
.a b
IsActiveb j
)j k
.k l
ToListl r
(r s
)s t
;t u
usersgq 
= 
db 
. 
SearchQuery (
<( )
UserDTO) 0
>0 1
(1 2
$str2 I
)I J
;J K

parcompany 
= 
db 
.  
SearchQuery  +
<+ ,
ParCompanyDTO, 9
>9 :
(: ;
$str; U
)U V
.V W
WhereW \
(\ ]
r] ^
=>_ a
rb c
.c d
IsActived l
)l m
.m n
ToListn t
(t u
)u v
;v w
}!! 
}## 	
}$$ 
}%% ì8
WC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\SgqIntegracao\IntegraSgq.cs
	namespace

 	
PlanoDeAcaoMVC


 
{ 
public 

class 

IntegraSgq 
: 
AuthorizeAttribute 0
{ 
public 
override 
void 
OnAuthorization ,
(, - 
AuthorizationContext- A
filterContextB O
)O P
{ 	
var 

parcompany 
= 
new  
List! %
<% &
ParCompanyDTO& 3
>3 4
(4 5
)5 6
;6 7
var 
usersgq 
= 
new 
List "
<" #
UserDTO# *
>* +
(+ ,
), -
;- .
using 
( 
var 
db 
= 
new 

ConexaoSgq  *
(* +
)+ ,
., -
db- /
)/ 0
{ 
var 
level1 
= 
db 
.  
SearchQuery  +
<+ ,
ParLevel1DTO, 8
>8 9
(9 :
$str: f
)f g
.g h
ToListh n
(n o
)o p
;p q
var   
level2   
=   
db   
.    
SearchQuery    +
<  + ,
ParLevel1DTO  , 8
>  8 9
(  9 :
$str  : f
)  f g
.  g h
ToList  h n
(  n o
)  o p
;  p q
var!! 
level3!! 
=!! 
db!! 
.!!  
SearchQuery!!  +
<!!+ ,
ParLevel1DTO!!, 8
>!!8 9
(!!9 :
$str!!: f
)!!f g
.!!g h
ToList!!h n
(!!n o
)!!o p
;!!p q
usersgq"" 
="" 
db"" 
."" 
SearchQuery"" (
<""( )
UserDTO"") 0
>""0 1
(""1 2
$str""2 I
)""I J
;""J K

parcompany## 
=## 
db## 
.##  
SearchQuery##  +
<##+ ,
ParCompanyDTO##, 9
>##9 :
(##: ;
$str##; h
)##h i
.##i j
ToList##j p
(##p q
)##q r
;##r s
filterContext%% 
.%% 

Controller%% (
.%%( )
ViewBag%%) 0
.%%0 1
Level1%%1 7
=%%8 9
level1%%: @
;%%@ A
filterContext&& 
.&& 

Controller&& (
.&&( )
ViewBag&&) 0
.&&0 1
Level2&&1 7
=&&8 9
level2&&: @
;&&@ A
filterContext'' 
.'' 

Controller'' (
.''( )
ViewBag'') 0
.''0 1
Level3''1 7
=''8 9
level3'': @
;''@ A
}(( 
var** 
pa_unidades** 
=** 
PlanoAcaoCore** +
.**+ ,

Pa_Unidade**, 6
.**6 7
Listar**7 =
(**= >
)**> ?
;**? @
if++ 
(++ 

parcompany++ 
.++ 
Count++  
(++  !
)++! "
>++# $
$num++% &
)++& '
{,, 
var-- 
iterator-- 
=-- 

parcompany-- )
.--) *
Where--* /
(--/ 0
r--0 1
=>--2 4
!--5 6
pa_unidades--6 A
.--A B
Any--B E
(--E F
c--F G
=>--H J
c--K L
.--L M
Name--M Q
.--Q R
Equals--R X
(--X Y
r--Y Z
.--Z [
Initials--[ c
)--c d
)--d e
&&--f h
r--i j
.--j k
Initials--k s
!=--t v
null--w {
)--{ |
.--| }
ToList	--} É
(
--É Ñ
)
--Ñ Ö
;
--Ö Ü
foreach.. 
(.. 
var.. 
i.. 
in.. !
iterator.." *
)..* +
{// 
var00 
unidadeInsert00 %
=00& '
new00( +
PlanoAcaoCore00, 9
.009 :

Pa_Unidade00: D
(00D E
)00E F
{00G H
Name00I M
=00N O
i00P Q
.00Q R
Initials00R Z
,00Z [
Description00\ g
=00h i
i00j k
.00k l
Name00l p
,00p q
Sgq_Id00r x
=00y z
i00{ |
.00| }
Id00} 
}
00Ä Å
;
00Å Ç
PlanoAcaoCore11 !
.11! "
Pa_BaseObject11" /
.11/ 0
SalvarGenerico110 >
(11> ?
unidadeInsert11? L
)11L M
;11M N
}22 
}33 
var55 
pa_quem55 
=55 
PlanoAcaoCore55 '
.55' (
Pa_Quem55( /
.55/ 0
Listar550 6
(556 7
)557 8
;558 9
if66 
(66 
usersgq66 
.66 
Count66 
(66 
)66 
>66  !
$num66" #
)66# $
{77 
var88 
iterator88 
=88 
usersgq88 &
.88& '
Where88' ,
(88, -
r88- .
=>88/ 1
!882 3
pa_quem883 :
.88: ;
Any88; >
(88> ?
c88? @
=>88A C
c88D E
.88E F
Name88F J
.88J K
Equals88K Q
(88Q R
r88R S
.88S T
Name88T X
)88X Y
&&88Z \
c88] ^
.88^ _
Name88_ c
!=88d f
null88g k
)88k l
)88l m
.88m n
ToList88n t
(88t u
)88u v
;88v w
foreach99 
(99 
var99 
i99 
in99 !
iterator99" *
)99* +
{:: 
var;; 

userInsert;; "
=;;# $
new;;% (
PlanoAcaoCore;;) 6
.;;6 7
Pa_Quem;;7 >
(;;> ?
);;? @
{;;A B
Name;;C G
=;;H I
i;;J K
.;;K L
Name;;L P
};;Q R
;;;R S
PlanoAcaoCore<< !
.<<! "
Pa_BaseObject<<" /
.<</ 0
SalvarGenerico<<0 >
(<<> ?

userInsert<<? I
)<<I J
;<<J K
}== 
}>> 
filterContext@@ 
.@@ 

Controller@@ $
.@@$ %
ViewBag@@% ,
.@@, -
Unidade@@- 4
=@@5 6
PlanoAcaoCore@@7 D
.@@D E

Pa_Unidade@@E O
.@@O P
Listar@@P V
(@@V W
)@@W X
;@@X Y
filterContextAA 
.AA 

ControllerAA $
.AA$ %
ViewBagAA% ,
.AA, -
QuemAA- 1
=AA2 3
PlanoAcaoCoreAA4 A
.AAA B
Pa_QuemAAB I
.AAI J
ListarAAJ P
(AAP Q
)AAQ R
;AAR S
}CC 	
}DD 
}EE ”
YC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\PlanoDeAcaoMVC\ViewModel\Pa_AcaoViewModel.cs
	namespace 	
PlanoDeAcaoMVC
 
. 
	ViewModel "
{		 
public

 

class

 
Pa_AcaoViewModel

 !
:

" #
Pa_Acao

$ +
{ 
}jj 
}kk 