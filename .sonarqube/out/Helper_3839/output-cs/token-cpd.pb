ç
LC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\Helper\CookieDoUserSgqWebApi.cs
	namespace 	
Helper
 
{ 
public		 

static		 
class		 !
CookieDoUserSgqWebApi		 -
{

 
} 
} ùc
OC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\Helper\CustomAuthorizeAttribute.cs
	namespace		 	
Helper		
 
{

 
public 

class $
CustomAuthorizeAttribute )
:* +
AuthorizeAttribute, >
{ 
private 
string 
_filter 
; 
private 
string 
_userSgqRoles $
;$ %
private 
bool 
_isLogin 
; 
private 
string 
_controllerLogin '
;' (
private 
string 
_actionLogin #
;# $
public $
CustomAuthorizeAttribute '
(' (
)( )
{ 	
_filter 
= 
this 
. 
Roles  
;  !
} 	
public $
CustomAuthorizeAttribute '
(' (
bool( ,
isLogin- 4
)4 5
{ 	
_isLogin 
= 
isLogin 
; 
} 	
public $
CustomAuthorizeAttribute '
(' (
string( .
controllerLogin/ >
,> ?
string@ F
actionLoginG R
)R S
{ 	
_controllerLogin   
=   
controllerLogin   .
;  . /
_actionLogin!! 
=!! 
actionLogin!! &
;!!& '
}"" 	
public%% 
override%% 
void%% 
OnAuthorization%% ,
(%%, - 
AuthorizationContext%%- A
filterContext%%B O
)%%O P
{&& 	
if'' 
('' 
_isLogin'' 
)'' 
if(( 
((( 
!(( 
GlobalConfig(( !
.((! "
VerifyConfig((" .
(((. /
$str((/ @
)((@ A
)((A B
filterContext)) !
.))! "
Result))" (
=))) *
new))+ .!
RedirectToRouteResult))/ D
())D E
new))E H 
RouteValueDictionary))I ]
())] ^
new))^ a
{))b c

controller))d n
=))o p
$str))q ~
,))~ 
action
))Ä Ü
=
))á à
$str
))â ê
}
))ë í
)
))í ì
)
))ì î
;
))î ï
if++ 
(++ 
!++ 
_isLogin++ 
)++ 
{,, 

HttpCookie00 
cookie00 !
=00" #
filterContext00$ 1
.001 2
HttpContext002 =
.00= >
Request00> E
.00E F
Cookies00F M
.00M N
Get00N Q
(00Q R
$str00R d
)00d e
;00e f
if22 
(22 
cookie22 
==22 
null22 "
)22" #
{33 
if77 
(77 
!77 
string77 
.77  
IsNullOrEmpty77  -
(77- .
_controllerLogin77. >
)77> ?
&&77@ B
!77C D
string77D J
.77J K
IsNullOrEmpty77K X
(77X Y
_actionLogin77Y e
)77e f
)77f g
{88 
filterContext99 %
.99% &
HttpContext99& 1
.991 2
Response992 :
.99: ;
	SetCookie99; D
(99D E
new99E H

HttpCookie99I S
(99S T
$str99T ^
)99^ _
{99` a
Expires99b i
=99j k
DateTime99l t
.99t u
Now99u x
.99x y

AddMinutes	99y É
(
99É Ñ
$num
99Ñ Ö
)
99Ö Ü
,
99Ü á
Value
99à ç
=
99é è
filterContext
99ê ù
.
99ù û
HttpContext
99û ©
.
99© ™
Request
99™ ±
.
99± ≤
Url
99≤ µ
.
99µ ∂
OriginalString
99∂ ƒ
}
99≈ ∆
)
99∆ «
;
99« »
filterContext:: %
.::% &
Result::& ,
=::- .
new::/ 2!
RedirectToRouteResult::3 H
(::H I
new::I L 
RouteValueDictionary::M a
(::a b
new::b e
{::f g

controller::h r
=::s t
_controllerLogin	::u Ö
,
::Ö Ü
action
::á ç
=
::é è
_actionLogin
::ê ú
}
::ù û
)
::û ü
)
::ü †
;
::† °
};; 
else<< 
filterContext== %
.==% &
Result==& ,
===- .
new==/ 2!
RedirectToRouteResult==3 H
(==H I
new==I L 
RouteValueDictionary==M a
(==a b
new==b e
{==f g

controller==h r
===s t
$str	==u â
,
==â ä
action
==ã ë
=
==í ì
$str
==î õ
}
==ú ù
)
==ù û
)
==û ü
;
==ü †
}>> 
else?? 
{@@ 
varBB 
userIdBB 
=BB  
$numBB! "
;BB" #
ifCC 
(CC 
!CC 
stringCC 
.CC  
IsNullOrEmptyCC  -
(CC- .
cookieCC. 4
.CC4 5
ValuesCC5 ;
[CC; <
$strCC< D
]CCD E
)CCE F
)CCF G
{DD 
intEE 
.EE 
TryParseEE $
(EE$ %
cookieEE% +
.EE+ ,
ValuesEE, 2
[EE2 3
$strEE3 ;
]EE; <
.EE< =
ToStringEE= E
(EEE F
)EEF G
,EEG H
outEEI L
userIdEEM S
)EES T
;EET U
filterContextFF %
.FF% &

ControllerFF& 0
.FF0 1
ViewBagFF1 8
.FF8 9
	KeepAliveFF9 B
=FFC D
$strFFE Q
+FFR S
userIdFFT Z
;FFZ [
}GG 
ifpp 
(pp 
!pp 
stringpp #
.pp# $
IsNullOrEmptypp$ 1
(pp1 2
cookiepp2 8
.pp8 9
Valuespp9 ?
[pp? @
$strpp@ G
]ppG H
)ppH I
)ppI J
{qq 
_userSgqRolesrr )
=rr* +
cookierr, 2
.rr2 3
Valuesrr3 9
[rr9 :
$strrr: A
]rrA B
.rrB C
ToStringrrC K
(rrK L
)rrL M
;rrM N
filterContextss )
.ss) *

Controllerss* 4
.ss4 5
ViewBagss5 <
.ss< =
IsAdminss= D
=ssE F
VerificarRolessG T
(ssT U
$strssU \
)ss\ ]
;ss] ^
}uu 
elsevv 
{ww 
filterContextxx )
.xx) *

Controllerxx* 4
.xx4 5
ViewBagxx5 <
.xx< =
IsAdminxx= D
=xxE F
falsexxG L
;xxL M
}yy 
cookie{{ 
.{{ 
Expires{{ &
={{' (
DateTime{{) 1
.{{1 2
Now{{2 5
.{{5 6

AddMinutes{{6 @
({{@ A
$num{{A C
){{C D
;{{D E
filterContext|| %
.||% &
HttpContext||& 1
.||1 2
Response||2 :
.||: ;
Cookies||; B
.||B C
Set||C F
(||F G
cookie||G M
)||M N
;||N O
if 
( 
! 
string #
.# $
IsNullOrEmpty$ 1
(1 2
Roles2 7
)7 8
)8 9
{
ÄÄ 
if
ÅÅ 
(
ÅÅ  
!
ÅÅ  !
string
ÅÅ! '
.
ÅÅ' (
IsNullOrEmpty
ÅÅ( 5
(
ÅÅ5 6
_userSgqRoles
ÅÅ6 C
)
ÅÅC D
)
ÅÅD E
{
ÇÇ 
if
ÖÖ  "
(
ÖÖ# $
!
ÖÖ$ %
IsInRole
ÖÖ% -
(
ÖÖ- .
_userSgqRoles
ÖÖ. ;
)
ÖÖ; <
)
ÖÖ< =
filterContext
ÜÜ$ 1
.
ÜÜ1 2
Result
ÜÜ2 8
=
ÜÜ9 :
new
ÜÜ; >#
RedirectToRouteResult
ÜÜ? T
(
ÜÜT U
new
ÜÜU X"
RouteValueDictionary
ÜÜY m
(
ÜÜm n
new
ÜÜn q
{
ÜÜr s

controller
ÜÜt ~
=ÜÜ Ä
$strÜÜÅ é
,ÜÜé è
actionÜÜê ñ
=ÜÜó ò
$strÜÜô †
}ÜÜ° ¢
)ÜÜ¢ £
)ÜÜ£ §
;ÜÜ§ •
}
àà 
else
ââ  
{
ää 
filterContext
ãã  -
.
ãã- .
Result
ãã. 4
=
ãã5 6
new
ãã7 :#
RedirectToRouteResult
ãã; P
(
ããP Q
new
ããQ T"
RouteValueDictionary
ããU i
(
ããi j
new
ããj m
{
ããn o

controller
ããp z
=
ãã{ |
$strãã} ä
,ããä ã
actionããå í
=ããì î
$strããï ú
}ããù û
)ããû ü
)ããü †
;ãã† °
}
åå 
}
çç 
filterContext
èè %
.
èè% &

Controller
èè& 0
.
èè0 1
ViewBag
èè1 8
.
èè8 9
	CompanyId
èè9 B
=
èèC D
cookie
èèE K
.
èèK L
Values
èèL R
[
èèR S
$str
èèS ^
]
èè^ _
.
èè_ `
ToString
èè` h
(
èèh i
)
èèi j
;
èèj k
filterContext
êê %
.
êê% &

Controller
êê& 0
.
êê0 1
ViewBag
êê1 8
.
êê8 9
	UserSgqId
êê9 B
=
êêC D
userId
êêE K
;
êêK L

Manutencao
ëë "
(
ëë" #
filterContext
ëë# 0
)
ëë0 1
;
ëë1 2
}
ïï 
}
ññ 
}
òò 	
private
öö 
void
öö 

Manutencao
öö 
(
öö  "
AuthorizationContext
öö  4
filterContext
öö5 B
)
ööB C
{
õõ 	
if
úú 
(
úú 
!
úú 
string
úú 
.
úú 
IsNullOrEmpty
úú %
(
úú% &
_userSgqRoles
úú& 3
)
úú3 4
&&
úú5 7
!
úú8 9
Roles
úú9 >
.
úú> ?
Contains
úú? G
(
úúG H
$str
úúH _
)
úú_ `
)
úú` a
if
ùù 
(
ùù 
_userSgqRoles
ùù !
.
ùù! "
Contains
ùù" *
(
ùù* +
$str
ùù+ B
)
ùùB C
&&
ùùD F
!
ùùG H
HttpContext
ùùH S
.
ùùS T
Current
ùùT [
.
ùù[ \
Request
ùù\ c
.
ùùc d
RawUrl
ùùd j
.
ùùj k
Contains
ùùk s
(
ùùs t
$strùùt ã
)ùùã å
)ùùå ç
filterContext
ûû !
.
ûû! "
Result
ûû" (
=
ûû) *
new
ûû+ .#
RedirectToRouteResult
ûû/ D
(
ûûD E
new
ûûE H"
RouteValueDictionary
ûûI ]
(
ûû] ^
new
ûû^ a
{
ûûb c

controller
ûûd n
=
ûûo p
$strûûq Ç
,ûûÇ É
actionûûÑ ä
=ûûã å
$strûûç î
}ûûï ñ
)ûûñ ó
)ûûó ò
;ûûò ô
}
üü 	
public
¶¶ 
bool
¶¶ 
IsInRole
¶¶ 
(
¶¶ 
string
¶¶ #
role
¶¶$ (
)
¶¶( )
{
ßß 	
var
®® 
roles
®® 
=
®® 
role
®® 
.
®® 
Split
®® "
(
®®" #
new
®®# &
char
®®' +
[
®®+ ,
]
®®, -
{
®®. /
$char
®®0 3
}
®®4 5
)
®®5 6
;
®®6 7
return
™™ 
roles
™™ 
.
™™ 
Any
™™ 
(
™™ 
r
™™ 
=>
™™ !
Roles
™™" '
.
™™' (
ToLowerInvariant
™™( 8
(
™™8 9
)
™™9 :
.
™™: ;
Contains
™™; C
(
™™C D
r
™™D E
.
™™E F
ToLowerInvariant
™™F V
(
™™V W
)
™™W X
)
™™X Y
)
™™Y Z
;
™™Z [
}
´´ 	
	protected
≠≠ 
bool
≠≠ 
VerificarRole
≠≠ $
(
≠≠$ %
string
≠≠% +
role
≠≠, 0
)
≠≠0 1
{
ÆÆ 	
return
ØØ 
_userSgqRoles
ØØ  
.
ØØ  !
ToLowerInvariant
ØØ! 1
(
ØØ1 2
)
ØØ2 3
.
ØØ3 4
Contains
ØØ4 <
(
ØØ< =
role
ØØ= A
.
ØØA B
ToLowerInvariant
ØØB R
(
ØØR S
)
ØØS T
)
ØØT U
;
ØØU V
}
∞∞ 	
}
±± 
}≤≤ ê
IC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\Helper\DecimalModelBinder.cs
	namespace 	
Helper
 
{ 
public 

class 
DecimalModelBinder #
:$ %
IModelBinder& 2
{ 
public		 
object		 
	BindModel		 
(		  
ControllerContext		  1
controllerContext		2 C
,		C D
ModelBindingContext

 
bindingContext

  .
)

. /
{ 	
ValueProviderResult 
valueResult  +
=, -
bindingContext. <
.< =
ValueProvider= J
. 
GetValue 
( 
bindingContext (
.( )
	ModelName) 2
)2 3
;3 4

ModelState 

modelState !
=" #
new$ '

ModelState( 2
{3 4
Value5 :
=; <
valueResult= H
}I J
;J K
object 
actualValue 
=  
null! %
;% &
try 
{ 
actualValue 
= 
Convert %
.% &
	ToDecimal& /
(/ 0
valueResult0 ;
.; <
AttemptedValue< J
,J K
CultureInfo 
.  
InvariantCulture  0
)0 1
;1 2
} 
catch 
( 
FormatException "
e# $
)$ %
{ 

modelState 
. 
Errors !
.! "
Add" %
(% &
e& '
)' (
;( )
} 
bindingContext 
. 

ModelState %
.% &
Add& )
() *
bindingContext* 8
.8 9
	ModelName9 B
,B C

modelStateD N
)N O
;O P
return 
actualValue 
; 
} 	
} 
} ˝
JC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\Helper\HtmlHelperExtension.cs
	namespace 	
Helper
 
{ 
public 

static 
class 
HtmlHelperExtension +
{ 
public		 
static		 
MvcHtmlString		 #

LinkVoltar		$ .
(		. /
this		/ 3

HtmlHelper		4 >
html		? C
,		C D
string		E K
idLink		L R
,		R S
string		T Z
	textoLink		[ d
=		e f
$str		g o
)		o p
{

 	
string 
strLink 
= 
String #
.# $
Format$ *
(* +
$str+ f
,f g
idLinkh n
,n o
	textoLinkp y
)y z
;z {
return 
new 
MvcHtmlString $
($ %
strLink% ,
), -
;- .
} 	
public 
static 
MvcHtmlString #
DecimalFormatado$ 4
(4 5
this5 9

HtmlHelper: D
htmlE I
,I J
string0 6
name7 ;
,; <
decimal0 7
valor8 =
,= >
string0 6
idInput7 >
,> ?
string0 6
classe7 =
)0 1
{ 	
string   
strLink   
=   
html   !
.  ! "
TextBox  " )
(  ) *
name  * .
,  . /
valor  0 5
.  5 6
ToString  6 >
(  > ?
$str  ? E
,  E F
System  G M
.  M N
Globalization  N [
.  [ \
CultureInfo  \ g
.  g h
InvariantCulture  h x
)  x y
,  y z
htmlAttributes	  { â
:
  â ä
new
  ã é
{
  è ê
id
  ë ì
=
  î ï
idInput
  ñ ù
,
  ù û
@class
  ü •
=
  ¶ ß
classe
  ® Æ
,
  Æ Ø
@onkeypress
  ∞ ª
=
  º Ω
$str
  æ ¶
}
  ß ®
)
  ® ©
.
  © ™
ToString
  ™ ≤
(
  ≤ ≥
)
  ≥ ¥
;
  ¥ µ
return!! 
new!! 
MvcHtmlString!! $
(!!$ %
strLink!!% ,
)!!, -
;!!- .
}"" 	
}$$ 
}%% ¶!
AC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\Helper\MailSender.cs
	namespace 	
Helper
 
{ 
public 

static 
class 

MailSender "
{		 
public 
static 
void 
SendMail #
(# $
EmailContentDTO$ 3
	mailEntry4 =
,= >
string? E
	emailFromF O
,O P
stringQ W
	emailPassX a
,a b
stringc i
	emailSmtpj s
,s t
intu x
	emailPort	y Ç
,
Ç É
bool
Ñ à
emailSSL
â ë
,
ë í'
SendCompletedEventHandler
î ≠
callback
Æ ∂
,
∂ ∑
bool
∏ º
runCallBack
Ω »
)
» …
{ 	

SmtpClient 
client 
= 
new  #

SmtpClient$ .
(. /
	emailSmtp/ 8
,8 9
	emailPort: C
)C D
;D E
client 
. 
	EnableSsl 
= 
emailSSL '
;' (
client 
. 
Credentials 
=  
new! $
NetworkCredential% 6
(6 7
	emailFrom7 @
,@ A
	emailPassB K
)K L
;L M
MailAddress"" 
from"" 
="" 
new"" "
MailAddress""# .
("". /
	emailFrom""/ 8
,""8 9
$str"": ?
,""? @
System""A G
.""G H
Text""H L
.""L M
Encoding""M U
.""U V
UTF8""V Z
)""Z [
;""[ \
var%% 
mails%% 
=%% 
	mailEntry%% !
.%%! "
To%%" $
.%%$ %
Split%%% *
(%%* +
$char%%+ .
)%%. /
;%%/ 0
MailMessage** 
message** 
=**  !
new**" %
MailMessage**& 1
(**1 2
)**2 3
;**3 4
message++ 
.++ 
From++ 
=++ 
from++ 
;++  
foreach,, 
(,, 
var,, 
i,, 
in,, 
mails,, #
),,# $
message-- 
.-- 
To-- 
.-- 
Add-- 
(-- 
i--  
)--  !
;--! "
message.. 
... 
Subject.. 
=.. 
	mailEntry.. '
...' (
Subject..( /
;../ 0
message// 
.// 
Body// 
=// 
	mailEntry// $
.//$ %
Body//% )
;//) *
message00 
.00 
Body00 
+=00 
Environment00 '
.00' (
NewLine00( /
;00/ 0
message11 
.11 

IsBodyHtml11 
=11  
	mailEntry11! *
.11* +

IsBodyHtml11+ 5
;115 6
message22 
.22 
SubjectEncoding22 #
=22$ %
System22& ,
.22, -
Text22- 1
.221 2
Encoding222 :
.22: ;
UTF822; ?
;22? @
message33 
.33 
BodyEncoding33  
=33! "
System33# )
.33) *
Text33* .
.33. /
Encoding33/ 7
.337 8
UTF8338 <
;33< =
if55 
(55 
runCallBack55 
)55 
{66 
client99 
.99 
SendCompleted99 $
+=99% '
new99( +%
SendCompletedEventHandler:: )
(::) *
callback::* 2
)::2 3
;::3 4
};; 
	mailEntry@@ 
.@@ 

SendStatus@@  
=@@! "
$str@@# ,
;@@, -
stringAA 
	userStateAA 
=AA 
	mailEntryAA (
.AA( )
IdAA) +
.AA+ ,
ToStringAA, 4
(AA4 5
)AA5 6
;AA6 7
clientBB 
.BB 
	SendAsyncBB 
(BB 
messageBB $
,BB$ %
	userStateBB& /
)BB/ 0
;BB0 1
}DD 	
}FF 
}GG ã
HC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\Helper\NumericExtensions.cs
	namespace 	
Helper
 
{ 
static 

public 
class 
NumericExtensions )
{ 
static 
public 
decimal 
SafeDivision *
(* +
this+ /
decimal0 7
	Numerator8 A
,A B
decimalC J
DenominatorK V
)V W
{ 	
return 
( 
Denominator 
==  "
$num# $
)$ %
?& '
$num( )
:* +
	Numerator, 5
/6 7
Denominator8 C
;C D
} 	
static 
public 
decimal 
? 
CustomParseDecimal 1
(1 2
string2 8
incomingValue9 F
)F G
{ 	
decimal 
val 
; 
if 
( 
! 
decimal 
. 
TryParse !
(! "
incomingValue" /
./ 0
Replace0 7
(7 8
$str8 ;
,; <
$str= ?
)? @
.@ A
ReplaceA H
(H I
$strI L
,L M
$strN P
)P Q
,Q R
NumberStylesS _
._ `
Number` f
,f g
CultureInfoh s
.s t
InvariantCulture	t Ñ
,
Ñ Ö
out
Ü â
val
ä ç
)
ç é
)
é è
return 
null 
; 
return 
val 
/ 
$num 
; 
}   	
}!! 
}"" ˘
NC:\Users\Note-pc\Source\Repos\ddd.bitbucket2\Helper\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str !
)! "
]" #
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str #
)# $
]$ %
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *